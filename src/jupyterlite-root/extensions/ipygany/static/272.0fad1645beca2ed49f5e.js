/*! For license information please see 272.0fad1645beca2ed49f5e.js.LICENSE.txt */
(self.webpackChunkipygany=self.webpackChunkipygany||[]).push([[272],{6372:(e,t,n)=>{"use strict";n.d(t,{Il:()=>r,xV:()=>o,J5:()=>a,ZP:()=>x,SU:()=>S,B8:()=>T,Ss:()=>C,Ym:()=>L});var i=n(4087);function r(){}var o=.7,a=1/o,s="\\s*([+-]?\\d+)\\s*",c="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",u="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,d=new RegExp("^rgb\\("+[s,s,s]+"\\)$"),h=new RegExp("^rgb\\("+[u,u,u]+"\\)$"),f=new RegExp("^rgba\\("+[s,s,s,c]+"\\)$"),p=new RegExp("^rgba\\("+[u,u,u,c]+"\\)$"),v=new RegExp("^hsl\\("+[c,u,u]+"\\)$"),m=new RegExp("^hsla\\("+[c,u,u,c]+"\\)$"),g={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function y(){return this.rgb().formatHex()}function b(){return this.rgb().formatRgb()}function x(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=l.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?w(t):3===n?new C(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?N(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?N(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=d.exec(e))?new C(t[1],t[2],t[3],1):(t=h.exec(e))?new C(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=f.exec(e))?N(t[1],t[2],t[3],t[4]):(t=p.exec(e))?N(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=v.exec(e))?E(t[1],t[2]/100,t[3]/100,1):(t=m.exec(e))?E(t[1],t[2]/100,t[3]/100,t[4]):g.hasOwnProperty(e)?w(g[e]):"transparent"===e?new C(NaN,NaN,NaN,0):null}function w(e){return new C(e>>16&255,e>>8&255,255&e,1)}function N(e,t,n,i){return i<=0&&(e=t=n=NaN),new C(e,t,n,i)}function S(e){return e instanceof r||(e=x(e)),e?new C((e=e.rgb()).r,e.g,e.b,e.opacity):new C}function T(e,t,n,i){return 1===arguments.length?S(e):new C(e,t,n,null==i?1:i)}function C(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}function _(){return"#"+M(this.r)+M(this.g)+M(this.b)}function O(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function M(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function E(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new D(e,t,n,i)}function A(e){if(e instanceof D)return new D(e.h,e.s,e.l,e.opacity);if(e instanceof r||(e=x(e)),!e)return new D;if(e instanceof D)return e;var t=(e=e.rgb()).r/255,n=e.g/255,i=e.b/255,o=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,c=a-o,u=(a+o)/2;return c?(s=t===a?(n-i)/c+6*(n<i):n===a?(i-t)/c+2:(t-n)/c+4,c/=u<.5?a+o:2-a-o,s*=60):c=u>0&&u<1?0:s,new D(s,c,u,e.opacity)}function L(e,t,n,i){return 1===arguments.length?A(e):new D(e,t,n,null==i?1:i)}function D(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}function P(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}(0,i.Z)(r,x,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:y,formatHex:y,formatHsl:function(){return A(this).formatHsl()},formatRgb:b,toString:b}),(0,i.Z)(C,T,(0,i.l)(r,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new C(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?o:Math.pow(o,e),new C(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_,formatHex:_,formatRgb:O,toString:O})),(0,i.Z)(D,L,(0,i.l)(r,{brighter:function(e){return e=null==e?a:Math.pow(a,e),new D(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?o:Math.pow(o,e),new D(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new C(P(e>=240?e-240:e+120,r,i),P(e,r,i),P(e<120?e+240:e-120,r,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}))},8218:(e,t,n)=>{"use strict";n.d(t,{Z:()=>v});var i=n(4087),r=n(6372),o=n(1144),a=-.14861,s=1.78277,c=-.29227,u=-.90649,l=1.97294,d=l*u,h=l*s,f=s*c-u*a;function p(e){if(e instanceof m)return new m(e.h,e.s,e.l,e.opacity);e instanceof r.Ss||(e=(0,r.SU)(e));var t=e.r/255,n=e.g/255,i=e.b/255,a=(f*i+d*t-h*n)/(f+d-h),s=i-a,p=(l*(n-a)-c*s)/u,v=Math.sqrt(p*p+s*s)/(l*a*(1-a)),g=v?Math.atan2(p,s)*o.B-120:NaN;return new m(g<0?g+360:g,v,a,e.opacity)}function v(e,t,n,i){return 1===arguments.length?p(e):new m(e,t,n,null==i?1:i)}function m(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}(0,i.Z)(m,v,(0,i.l)(r.Il,{brighter:function(e){return e=null==e?r.J5:Math.pow(r.J5,e),new m(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?r.xV:Math.pow(r.xV,e),new m(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*o.V,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),d=Math.sin(e);return new r.Ss(255*(t+n*(a*i+s*d)),255*(t+n*(c*i+u*d)),255*(t+n*(l*i)),this.opacity)}}))},4087:(e,t,n)=>{"use strict";function i(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function r(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}n.d(t,{Z:()=>i,l:()=>r})},1324:(e,t,n)=>{"use strict";n.r(t),n.d(t,{color:()=>i.ZP,cubehelix:()=>T.Z,gray:()=>h,hcl:()=>w,hsl:()=>i.Ym,lab:()=>f,lch:()=>x,rgb:()=>i.B8});var i=n(6372),r=n(4087),o=n(1144),a=.96422,s=.82521,c=4/29,u=6/29,l=3*u*u;function d(e){if(e instanceof p)return new p(e.l,e.a,e.b,e.opacity);if(e instanceof N)return S(e);e instanceof i.Ss||(e=(0,i.SU)(e));var t,n,r=y(e.r),o=y(e.g),c=y(e.b),u=v((.2225045*r+.7168786*o+.0606169*c)/1);return r===o&&o===c?t=n=u:(t=v((.4360747*r+.3850649*o+.1430804*c)/a),n=v((.0139322*r+.0971045*o+.7141733*c)/s)),new p(116*u-16,500*(t-u),200*(u-n),e.opacity)}function h(e,t){return new p(e,0,0,null==t?1:t)}function f(e,t,n,i){return 1===arguments.length?d(e):new p(e,t,n,null==i?1:i)}function p(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}function v(e){return e>.008856451679035631?Math.pow(e,1/3):e/l+c}function m(e){return e>u?e*e*e:l*(e-c)}function g(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function y(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function b(e){if(e instanceof N)return new N(e.h,e.c,e.l,e.opacity);if(e instanceof p||(e=d(e)),0===e.a&&0===e.b)return new N(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*o.B;return new N(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function x(e,t,n,i){return 1===arguments.length?b(e):new N(n,t,e,null==i?1:i)}function w(e,t,n,i){return 1===arguments.length?b(e):new N(e,t,n,null==i?1:i)}function N(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function S(e){if(isNaN(e.h))return new p(e.l,0,0,e.opacity);var t=e.h*o.V;return new p(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}(0,r.Z)(p,f,(0,r.l)(i.Il,{brighter:function(e){return new p(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new p(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=a*m(t),e=1*m(e),n=s*m(n),new i.Ss(g(3.1338561*t-1.6168667*e-.4906146*n),g(-.9787684*t+1.9161415*e+.033454*n),g(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}})),(0,r.Z)(N,w,(0,r.l)(i.Il,{brighter:function(e){return new N(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new N(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return S(this).rgb()}}));var T=n(8218)},1144:(e,t,n)=>{"use strict";n.d(t,{V:()=>i,B:()=>r});var i=Math.PI/180,r=180/Math.PI},6722:(e,t,n)=>{"use strict";function i(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function r(e){return(e=i(Math.abs(e)))?e[1]:NaN}n.r(t),n.d(t,{FormatSpecifier:()=>c,format:()=>f,formatDefaultLocale:()=>y,formatLocale:()=>g,formatPrefix:()=>p,formatSpecifier:()=>s,precisionFixed:()=>b,precisionPrefix:()=>x,precisionRound:()=>w});var o,a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function s(e){if(!(t=a.exec(e)))throw new Error("invalid format: "+e);var t;return new c({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function c(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function u(e,t){var n=i(e,t);if(!n)return e+"";var r=n[0],o=n[1];return o<0?"0."+new Array(-o).join("0")+r:r.length>o+1?r.slice(0,o+1)+"."+r.slice(o+1):r+new Array(o-r.length+2).join("0")}s.prototype=c.prototype,c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const l={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>u(100*e,t),r:u,s:function(e,t){var n=i(e,t);if(!n)return e+"";var r=n[0],a=n[1],s=a-(o=3*Math.max(-8,Math.min(8,Math.floor(a/3))))+1,c=r.length;return s===c?r:s>c?r+new Array(s-c+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+i(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function d(e){return e}var h,f,p,v=Array.prototype.map,m=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function g(e){var t,n,i=void 0===e.grouping||void 0===e.thousands?d:(t=v.call(e.grouping,Number),n=e.thousands+"",function(e,i){for(var r=e.length,o=[],a=0,s=t[0],c=0;r>0&&s>0&&(c+s+1>i&&(s=Math.max(1,i-c)),o.push(e.substring(r-=s,r+s)),!((c+=s+1)>i));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),a=void 0===e.currency?"":e.currency[0]+"",c=void 0===e.currency?"":e.currency[1]+"",u=void 0===e.decimal?".":e.decimal+"",h=void 0===e.numerals?d:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(v.call(e.numerals,String)),f=void 0===e.percent?"%":e.percent+"",p=void 0===e.minus?"−":e.minus+"",g=void 0===e.nan?"NaN":e.nan+"";function y(e){var t=(e=s(e)).fill,n=e.align,r=e.sign,d=e.symbol,v=e.zero,y=e.width,b=e.comma,x=e.precision,w=e.trim,N=e.type;"n"===N?(b=!0,N="g"):l[N]||(void 0===x&&(x=12),w=!0,N="g"),(v||"0"===t&&"="===n)&&(v=!0,t="0",n="=");var S="$"===d?a:"#"===d&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",T="$"===d?c:/[%p]/.test(N)?f:"",C=l[N],_=/[defgprs%]/.test(N);function O(e){var a,s,c,l=S,d=T;if("c"===N)d=C(e)+d,e="";else{var f=(e=+e)<0||1/e<0;if(e=isNaN(e)?g:C(Math.abs(e),x),w&&(e=function(e){e:for(var t,n=e.length,i=1,r=-1;i<n;++i)switch(e[i]){case".":r=t=i;break;case"0":0===r&&(r=i),t=i;break;default:if(!+e[i])break e;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(t+1):e}(e)),f&&0==+e&&"+"!==r&&(f=!1),l=(f?"("===r?r:p:"-"===r||"("===r?"":r)+l,d=("s"===N?m[8+o/3]:"")+d+(f&&"("===r?")":""),_)for(a=-1,s=e.length;++a<s;)if(48>(c=e.charCodeAt(a))||c>57){d=(46===c?u+e.slice(a+1):e.slice(a))+d,e=e.slice(0,a);break}}b&&!v&&(e=i(e,1/0));var O=l.length+e.length+d.length,M=O<y?new Array(y-O+1).join(t):"";switch(b&&v&&(e=i(M+e,M.length?y-d.length:1/0),M=""),n){case"<":e=l+e+d+M;break;case"=":e=l+M+e+d;break;case"^":e=M.slice(0,O=M.length>>1)+l+e+d+M.slice(O);break;default:e=M+l+e+d}return h(e)}return x=void 0===x?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x)),O.toString=function(){return e+""},O}return{format:y,formatPrefix:function(e,t){var n=y(((e=s(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(r(t)/3))),o=Math.pow(10,-i),a=m[8+i/3];return function(e){return n(o*e)+a}}}}function y(e){return h=g(e),f=h.format,p=h.formatPrefix,h}function b(e){return Math.max(0,-r(Math.abs(e)))}function x(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(r(t)/3)))-r(Math.abs(e)))}function w(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,r(t)-r(e))+1}y({thousands:",",grouping:[3],currency:["$",""]})},5855:(e,t,n)=>{"use strict";function i(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(6*i,6*++i);return n}n.r(t),n.d(t,{interpolateBlues:()=>de,interpolateBrBG:()=>S,interpolateBuGn:()=>V,interpolateBuPu:()=>U,interpolateCividis:()=>Ne,interpolateCool:()=>Me,interpolateCubehelixDefault:()=>_e,interpolateGnBu:()=>H,interpolateGreens:()=>fe,interpolateGreys:()=>ve,interpolateInferno:()=>Fe,interpolateMagma:()=>Be,interpolateOrRd:()=>W,interpolateOranges:()=>we,interpolatePRGn:()=>C,interpolatePiYG:()=>O,interpolatePlasma:()=>ze,interpolatePuBu:()=>Z,interpolatePuBuGn:()=>X,interpolatePuOr:()=>E,interpolatePuRd:()=>Q,interpolatePurples:()=>ge,interpolateRainbow:()=>Ae,interpolateRdBu:()=>L,interpolateRdGy:()=>P,interpolateRdPu:()=>te,interpolateRdYlBu:()=>j,interpolateRdYlGn:()=>I,interpolateReds:()=>be,interpolateSinebow:()=>Re,interpolateSpectral:()=>F,interpolateTurbo:()=>je,interpolateViridis:()=>Ie,interpolateWarm:()=>Oe,interpolateYlGn:()=>oe,interpolateYlGnBu:()=>ie,interpolateYlOrBr:()=>se,interpolateYlOrRd:()=>ue,schemeAccent:()=>o,schemeBlues:()=>le,schemeBrBG:()=>N,schemeBuGn:()=>z,schemeBuPu:()=>J,schemeCategory10:()=>r,schemeDark2:()=>a,schemeGnBu:()=>q,schemeGreens:()=>he,schemeGreys:()=>pe,schemeOrRd:()=>G,schemeOranges:()=>xe,schemePRGn:()=>T,schemePaired:()=>s,schemePastel1:()=>c,schemePastel2:()=>u,schemePiYG:()=>_,schemePuBu:()=>Y,schemePuBuGn:()=>$,schemePuOr:()=>M,schemePuRd:()=>K,schemePurples:()=>me,schemeRdBu:()=>A,schemeRdGy:()=>D,schemeRdPu:()=>ee,schemeRdYlBu:()=>R,schemeRdYlGn:()=>k,schemeReds:()=>ye,schemeSet1:()=>l,schemeSet2:()=>d,schemeSet3:()=>h,schemeSpectral:()=>B,schemeTableau10:()=>f,schemeYlGn:()=>re,schemeYlGnBu:()=>ne,schemeYlOrBr:()=>ae,schemeYlOrRd:()=>ce});const r=i("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),o=i("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),a=i("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),s=i("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),c=i("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),u=i("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),l=i("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),d=i("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),h=i("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),f=i("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");var p=n(6372);function v(e,t,n,i,r){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*i+a*r)/6}function m(e){return function(){return e}}function g(e,t){return function(n){return e+n*t}}function y(e,t){var n=t-e;return n?g(e,n):m(isNaN(e)?t:e)}function b(e){return function(t){var n,i,r=t.length,o=new Array(r),a=new Array(r),s=new Array(r);for(n=0;n<r;++n)i=(0,p.B8)(t[n]),o[n]=i.r||0,a[n]=i.g||0,s[n]=i.b||0;return o=e(o),a=e(a),s=e(s),i.opacity=1,function(e){return i.r=o(e),i.g=a(e),i.b=s(e),i+""}}}!function e(t){var n=function(e){return 1==(e=+e)?y:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}(t,n,e):m(isNaN(t)?n:t)}}(t);function i(e,t){var i=n((e=(0,p.B8)(e)).r,(t=(0,p.B8)(t)).r),r=n(e.g,t.g),o=n(e.b,t.b),a=y(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=r(t),e.b=o(t),e.opacity=a(t),e+""}}return i.gamma=e,i}(1);var x=b((function(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],o=e[i+1],a=i>0?e[i-1]:2*r-o,s=i<t-1?e[i+2]:2*o-r;return v((n-i/t)*t,a,r,o,s)}}));function w(e){return x(e[e.length-1])}b((function(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],o=e[i%t],a=e[(i+1)%t],s=e[(i+2)%t];return v((n-i/t)*t,r,o,a,s)}}));var N=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(i);const S=w(N);var T=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(i);const C=w(T);var _=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(i);const O=w(_);var M=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(i);const E=w(M);var A=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(i);const L=w(A);var D=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(i);const P=w(D);var R=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(i);const j=w(R);var k=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(i);const I=w(k);var B=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(i);const F=w(B);var z=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(i);const V=w(z);var J=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(i);const U=w(J);var q=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(i);const H=w(q);var G=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(i);const W=w(G);var $=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(i);const X=w($);var Y=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(i);const Z=w(Y);var K=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(i);const Q=w(K);var ee=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(i);const te=w(ee);var ne=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(i);const ie=w(ne);var re=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(i);const oe=w(re);var ae=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(i);const se=w(ae);var ce=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(i);const ue=w(ce);var le=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(i);const de=w(le);var he=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(i);const fe=w(he);var pe=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(i);const ve=w(pe);var me=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(i);const ge=w(me);var ye=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(i);const be=w(ye);var xe=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(i);const we=w(xe);function Ne(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-e*(35.34-e*(2381.73-e*(6402.7-e*(7024.72-2710.57*e)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+e*(170.73+e*(52.82-e*(131.46-e*(176.58-67.37*e)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+e*(442.36-e*(2482.43-e*(6167.24-e*(6614.94-2475.67*e)))))))+")"}var Se=n(8218);function Te(e){return function t(n){function i(t,i){var r=e((t=(0,Se.Z)(t)).h,(i=(0,Se.Z)(i)).h),o=y(t.s,i.s),a=y(t.l,i.l),s=y(t.opacity,i.opacity);return function(e){return t.h=r(e),t.s=o(e),t.l=a(Math.pow(e,n)),t.opacity=s(e),t+""}}return n=+n,i.gamma=t,i}(1)}Te((function(e,t){var n=t-e;return n?g(e,n>180||n<-180?n-360*Math.round(n/360):n):m(isNaN(e)?t:e)}));var Ce=Te(y);const _e=Ce((0,Se.Z)(300,.5,0),(0,Se.Z)(-240,.5,1));var Oe=Ce((0,Se.Z)(-100,.75,.35),(0,Se.Z)(80,1.5,.8)),Me=Ce((0,Se.Z)(260,.75,.35),(0,Se.Z)(80,1.5,.8)),Ee=(0,Se.Z)();function Ae(e){(e<0||e>1)&&(e-=Math.floor(e));var t=Math.abs(e-.5);return Ee.h=360*e-100,Ee.s=1.5-1.5*t,Ee.l=.8-.9*t,Ee+""}var Le=(0,p.B8)(),De=Math.PI/3,Pe=2*Math.PI/3;function Re(e){var t;return e=(.5-e)*Math.PI,Le.r=255*(t=Math.sin(e))*t,Le.g=255*(t=Math.sin(e+De))*t,Le.b=255*(t=Math.sin(e+Pe))*t,Le+""}function je(e){return e=Math.max(0,Math.min(1,e)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+e*(1172.33-e*(10793.56-e*(33300.12-e*(38394.49-14825.05*e)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+e*(557.33+e*(1225.33-e*(3574.96-e*(1073.77+707.56*e)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+e*(3211.1-e*(15327.97-e*(27814-e*(22569.18-6838.66*e)))))))+")"}function ke(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}const Ie=ke(i("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"));var Be=ke(i("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Fe=ke(i("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),ze=ke(i("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"))},831:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=n(4454);class a extends o.Events{constructor(e,t,n){super(),this._triangleIndices=null,this.tetrahedronIndices=null,this.meshes=[],this._environmentMeshes=[],this._position=new r.Vector3(0,0,0),this._scale=new r.Vector3(1,1,1),this.lastCameraPosition=new r.Vector3(0,0,2),this.parent=null,this.beforeRenderHook=null,this._vertices=e,this._data=t,n&&(this._environmentMeshes=void 0!==n.environmentMeshes?n.environmentMeshes:this._environmentMeshes,this._position=void 0!==n.position?n.position:this._position,this._scale=void 0!==n.scale?n.scale:this._scale);for(const e of this._environmentMeshes)e.matrixAutoUpdate=!1}set vertices(e){this._vertices=e,this.handleVerticesChange(),this.trigger("change:geometry")}get vertices(){return this._vertices}set triangleIndices(e){this._triangleIndices=e,this.handleTriangleIndicesChange(),this.trigger("change:geometry")}get triangleIndices(){return this._triangleIndices}set data(e){this._data=e}get data(){return this._data}addToScene(e){for(const t of this.meshes)e.add(t.mesh);for(const t of this._environmentMeshes)e.add(t)}buildMaterial(){for(const e of this.meshes)e.buildMaterial();this.trigger("change:material")}set position(e){this._position.copy(e),this.updateMatrix()}set scale(e){this._scale.copy(e),this.updateMatrix()}updateMatrix(){const e=(new r.Matrix4).makeScale(this._scale.x,this._scale.y,this._scale.z),t=(new r.Matrix4).makeTranslation(this._position.x,this._position.y,this._position.z),n=(new r.Matrix4).multiplyMatrices(e,t);for(const e of this.meshes)e.matrix=n;n.identity();for(const t of this._environmentMeshes){const i=(new r.Matrix4).makeTranslation(t.position.x+this._position.x,t.position.y+this._position.y,t.position.z+this._position.z);n.multiplyMatrices(e,i),t.matrix.copy(n),n.identity()}}get options(){return{environmentMeshes:this._environmentMeshes,position:this._position,scale:this._scale}}get boundingSphere(){let e=this;for(;null!=e.parent;)e=e.parent;return e.boundingSphere}set defaultColor(e){for(const t of this.meshes)t.defaultColor=e}handleVerticesChange(){}handleTriangleIndicesChange(){}handleCameraMoveEnd(e){this.lastCameraPosition=e}dispose(){for(const e of this.meshes)e.dispose()}}t.Block=a},5730:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=i(n(9511)),a=n(7578),s=n(4454);t.datalistToDict=function(e,t=!0){const n={};for(const i of e){n[i.name]={};for(const e of i.components){const r=t?Array.from(e.array):[];n[i.name][e.name]={array:r,shaderName:e.shaderName}}}return n},t.dictToDatalist=function(e){const t=[];for(const n in e){const i=[];for(const t in e[n]){const r=e[n][t];i.push(new c(t,new Float32Array(r.array),r.shaderName))}t.push(new u(n,i))}return t},t.updateDatalistFromDict=function(e,t){for(const n of e)for(const e of n.components)e.array=new Float32Array(t[n.name][e.name].array)};class c extends s.Events{constructor(e,t,n=a.uuid()){super(),this.name=e,this._array=t,this.shaderName=n,this.bufferAttribute=new r.BufferAttribute(this._array,1),this.node=new o.AttributeNode(this.shaderName,"float")}set array(e){this._array.length==e.length?(this.bufferAttribute.set(e),this.bufferAttribute.needsUpdate=!0):this.bufferAttribute=new r.BufferAttribute(e,1),this._array=e,this.trigger("change:array")}get array(){return this._array}copy(e=!0){const t=e?this.array:new Float32Array(0);return new c(this.name,t,this.shaderName)}}t.Component=c;class u{constructor(e,t){this.name=e,this.components=t}get dimension(){return this.components.length}getComponent(e){for(const t of this.components)if(t.name==e)return t;throw`${e} is not a valid component name for ${this.name}`}copy(e=!0){const t=this.components.map((t=>t.copy(e)));return new u(this.name,t)}}t.Data=u},6130:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(9511)),o=n(7578),a=n(831),s=n(5730);class c extends a.Block{constructor(e,t,n){super(e.vertices,e.data,e.options),this.inputs=null,this.inputNode=null,this.id=o.uuid(),this.parent=e,this.triangleIndices=e.triangleIndices,this.tetrahedronIndices=e.tetrahedronIndices,this.meshes=e.meshes.map((e=>e.copy())),this.setInput(t),this.parent.on("change:material",this.buildMaterial.bind(this))}setInput(e){if(0==this.inputDimension)return;let t;if(void 0===e){if(0==this.data.length)throw"No data provided, put this effect needs at least ${this.inputDimension} component(s) as input";e=this.data[0].name}if("string"==typeof e){const n=this.getData(e);t=this.inputDimension>n.dimension?n.components.concat(new Array(this.inputDimension-n.dimension).fill(0)):n.components.slice(0,this.inputDimension)}else{if("number"==typeof e&&1==this.inputDimension&&(e=[e]),e.length!=this.inputDimension)throw"This effect needs ${this.inputDimension} component(s) as input, but ${input} was given";t=e.map(this.getInput.bind(this))}this.inputs=t,1==t.length?this.inputNode=this.getInputNode(t[0]):this.inputNode=new r.JoinNode(...t.map(this.getInputNode.bind(this)))}addTransformNode(e,t){for(const n of this.meshes)n.addTransformNode(e,t);this.buildMaterial()}addColorNode(e,t){for(const n of this.meshes)n.addColorNode(e,t);this.buildMaterial()}addAlphaNode(e,t){for(const n of this.meshes)n.addAlphaNode(e,t);this.buildMaterial()}addMaskNode(e){for(const t of this.meshes)t.addMaskNode(e);this.buildMaterial()}addExpressionNode(e){for(const t of this.meshes)t.addExpressionNode(e);this.buildMaterial()}get inputDimension(){return 0}getData(e){for(const t of this.data)if(t.name==e)return t;throw`${e} if not a valid Data name`}getInput(e){return"number"==typeof e?e:this.getData(e[0]).getComponent(e[1])}getInputNode(e){return e instanceof s.Component?e.node:new r.FloatNode(e)}}t.Effect=c},2507:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6130),r=n(5614),o=n(4785);class a extends i.Effect{constructor(e,t){super(e,t),this.initialized=!1,this.alphaNode=new o.IdentityNode(this.inputNode),this.addAlphaNode(r.NodeOperation.MUL,this.alphaNode),this.buildMaterial(),this.sortTriangleIndices(),this.parent.on("change:geometry",(()=>{this.sortTriangleIndices.bind(this),this.trigger("change:geometry")})),this.initialized=!0,this.updateMatrix()}setInput(e){super.setInput(e),this.initialized&&(this.alphaNode.value=this.inputNode,this.buildMaterial())}handleCameraMoveEnd(e){super.handleCameraMoveEnd(e),this.sortTriangleIndices()}sortTriangleIndices(){for(const e of this.meshes)e.sortTriangleIndices(this.lastCameraPosition)}get inputDimension(){return 1}}t.Alpha=a},6708:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(9511)),o=n(6722),a=n(6130),s=n(5614),c=n(2732);class u extends a.Effect{constructor(e,t,n,i,a="Viridis",u=c.ScaleType.linear){super(e,t),this.initialized=!1,this.format=o.format(".2e"),this._type=u,this.colorInterpolator=c.getColorInterpolator(a),this.colorBar=c.getColorBar(this.colorInterpolator,[n,i],u,this.format),this.texture=c.getColorMapTexture(this.colorInterpolator),this.textureNode=new r.TextureNode(this.texture);const l=this.getFunctionNode();this.minNode=new r.FloatNode(n),this.maxNode=new r.FloatNode(i),this.functionCallNode=new r.FunctionCallNode(l,[this.textureNode,this.minNode,this.maxNode,this.inputNode]),this.addColorNode(s.NodeOperation.ASSIGN,this.functionCallNode),this.buildMaterial(),this.initialized=!0,this.parent.on("change:geometry",(()=>{this.trigger("change:geometry")})),this.updateMatrix()}setInput(e){super.setInput(e),this.initialized&&(this.functionCallNode.inputs=[this.textureNode,this.minNode,this.maxNode,this.inputNode],this.buildMaterial())}set min(e){c.updateColorBar(this.colorBar,this.colorInterpolator,[e,this.maxNode.value],this._type,this.format),this.minNode.value=e,this.trigger("change:colorbar")}get min(){return this.minNode.value}set max(e){c.updateColorBar(this.colorBar,this.colorInterpolator,[this.minNode.value,e],this._type,this.format),this.maxNode.value=e,this.trigger("change:colorbar")}get max(){return this.maxNode.value}get inputDimension(){return 1}set colorMap(e){this.colorInterpolator=c.getColorInterpolator(e),c.updateColorBar(this.colorBar,this.colorInterpolator,[this.minNode.value,this.maxNode.value],this._type,this.format),this.texture=c.getColorMapTexture(this.colorInterpolator),this.textureNode.value=this.texture,this.trigger("change:colorbar")}set type(e){this._type=e,c.updateColorBar(this.colorBar,this.colorInterpolator,[this.minNode.value,this.maxNode.value],this._type,this.format);const t=this.getFunctionNode();this.functionCallNode.setFunction(t,[this.textureNode,this.minNode,this.maxNode,this.inputNode]),this.buildMaterial(),this.trigger("change:colorbar")}getFunctionNode(){return this._type==c.ScaleType.linear?new r.FunctionNode(`vec3 isoColorFunc${this.id}(sampler2D textureMap, float min, float max, float data){\n          vec2 colorPosition = vec2((data - min) / (max - min), 0.0);\n\n          return vec3(texture2D(textureMap, colorPosition));\n        }`):new r.FunctionNode(`vec3 isoColorFunc${this.id}(sampler2D textureMap, float min, float max, float data){\n          vec2 colorPosition = vec2((log(data) - log(min)) / (log(max) - log(min)), 0.0);\n\n          return vec3(texture2D(textureMap, colorPosition));\n        }`)}}t.IsoColor=u},3298:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6130),r=n(4971);class o extends i.Effect{constructor(e,t,n){if(super(e,t,n),this.tetrahedronIndices=null,this._value=0,this.dynamic=!1,this.initialized=!1,null==this.parent.tetrahedronIndices)throw"Cannot compute IsoSurface on a Mesh that is not tetrahedron-based";n&&(this._value=void 0!==n.value?n.value:this._value,this.dynamic=void 0!==n.dynamic?n.dynamic:this.dynamic),this.meshes=[],this.inputComponent=this.inputs[0],this.isoSurfaceUtils=new r.IsoSurfaceUtils(this.parent.vertices,this.parent.tetrahedronIndices,this.data,this.dynamic),this.isoSurfaceUtils.updateInput(this.inputComponent.array),this.isoSurfaceUtils.computeIsoSurface(this.value),this.mesh=this.isoSurfaceUtils.mesh,this.vertices=this.isoSurfaceUtils.vertices,this.data=this.mesh.data,this.mesh.copyMaterial(this.parent.meshes[0]),this.meshes.push(this.mesh),this.buildMaterial(),this.inputComponent.on("change:array",this.onInputArrayChange.bind(this)),this.initialized=!0,this.updateMatrix()}updateGeometry(){this.isoSurfaceUtils.computeIsoSurface(this.value),this.vertices=this.isoSurfaceUtils.vertices,this.trigger("change:geometry")}setInput(e){super.setInput(e),this.initialized&&(this.inputComponent.off("change:array",this.onInputArrayChange.bind(this)),this.inputComponent=this.inputs[0],this.inputComponent.on("change:array",this.onInputArrayChange.bind(this)),this.onInputArrayChange())}onInputArrayChange(){this.isoSurfaceUtils.updateInput(this.inputComponent.array),this.updateGeometry()}set value(e){this._value=e,this.updateGeometry()}get value(){return this._value}get inputDimension(){return 1}}t.IsoSurface=o},6003:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(6130),r=n(5614),o=n(4785);class a extends i.Effect{constructor(e,t){super(e,t),this.initialized=!1,this.colorNode=new o.IdentityNode(this.inputNode),this.addColorNode(r.NodeOperation.ASSIGN,this.colorNode),this.buildMaterial(),this.initialized=!0,this.parent.on("change:geometry",(()=>{this.trigger("change:geometry")})),this.updateMatrix()}setInput(e){super.setInput(e),this.initialized&&(this.colorNode.value=this.inputNode,this.buildMaterial())}get inputDimension(){return 3}}t.RGB=a},1657:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(9511)),o=n(6130),a=n(4971);class s extends o.Effect{constructor(e,t,n){super(e,t,n),this.initialized=!1,this._min=0,this._max=1,this.dynamic=!1,this._inclusive=!0,n&&(this._min=void 0!==n.min?n.min:this._min,this._max=void 0!==n.max?n.max:this._max,this.dynamic=void 0!==n.dynamic?n.dynamic:this.dynamic,this._inclusive=void 0!==n.inclusive?n.inclusive:this._inclusive),this.minNode=new r.FloatNode(this._min),this.maxNode=new r.FloatNode(this._max),this.condNode1=new r.CondNode(this.minNode,this.inputNode,this._inclusive?r.CondNode.LESS_EQUAL:r.CondNode.LESS,new r.BoolNode(!0),new r.BoolNode(!1)),this.addMaskNode(this.condNode1),this.condNode2=new r.CondNode(this.inputNode,this.maxNode,this._inclusive?r.CondNode.LESS_EQUAL:r.CondNode.LESS,new r.BoolNode(!0),new r.BoolNode(!1)),this.addMaskNode(this.condNode2),null!=this.parent.tetrahedronIndices?(this.inputComponent=this.inputs[0],this.isoSurfaceUtils1=new a.IsoSurfaceUtils(this.parent.vertices,this.parent.tetrahedronIndices,this.data,this.dynamic),this.isoSurfaceUtils1.updateInput(this.inputComponent.array),this.isoSurfaceUtils2=new a.IsoSurfaceUtils(this.parent.vertices,this.parent.tetrahedronIndices,this.data,this.dynamic),this.isoSurfaceUtils2.updateInput(this.inputComponent.array),this.isoSurfaceUtils1.computeIsoSurface(this._min),this.mesh1=this.isoSurfaceUtils1.mesh,this.isoSurfaceUtils2.computeIsoSurface(this._max),this.mesh2=this.isoSurfaceUtils2.mesh,this.mesh1.copyMaterial(this.parent.meshes[0]),this.mesh2.copyMaterial(this.parent.meshes[0]),this.meshes.push(this.mesh1),this.meshes.push(this.mesh2),this.inputComponent.on("change:array",this.onInputArrayChange.bind(this))):this.parent.on("change:geometry",(()=>{this.trigger("change:geometry")})),this.buildMaterial(),this.initialized=!0}setInput(e){super.setInput(e),this.initialized&&(this.isUnderMax.a=this.inputNode,this.isOverMin.b=this.inputNode,null!=this.parent.tetrahedronIndices&&(this.inputComponent.off("change:array",this.onInputArrayChange.bind(this)),this.inputComponent=this.inputs[0],this.inputComponent.on("change:array",this.onInputArrayChange.bind(this)),this.isoSurfaceUtils1.updateInput(this.inputComponent.array),this.isoSurfaceUtils2.updateInput(this.inputComponent.array),this.updateGeometry1(),this.updateGeometry2()),this.buildMaterial())}onInputArrayChange(){this.isoSurfaceUtils1.updateInput(this.inputComponent.array),this.isoSurfaceUtils2.updateInput(this.inputComponent.array),this.updateGeometry1(),this.updateGeometry2()}updateGeometry1(){this.isoSurfaceUtils1.computeIsoSurface(this.min),this.trigger("change:geometry")}updateGeometry2(){this.isoSurfaceUtils2.computeIsoSurface(this.max),this.trigger("change:geometry")}set min(e){this._min=e,this.minNode.value=e,null!=this.parent.tetrahedronIndices&&this.updateGeometry1()}get min(){return this._min}set max(e){this._max=e,this.maxNode.value=e,null!=this.parent.tetrahedronIndices&&this.updateGeometry2()}get max(){return this._max}set inclusive(e){const t=this._inclusive?r.CondNode.LESS_EQUAL:r.CondNode.LESS;this.condNode1.op=t,this.condNode2.op=t}get inputDimension(){return 1}}t.Threshold=s},3398:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(9511)),o=n(6130),a=n(5614);class s extends o.Effect{constructor(e,t,n,i){super(e,t),this.initialized=!1,this.offsetNode=new r.Vector3Node(i.x,i.y,i.z),this.factorNode=new r.Vector3Node(n.x,n.y,n.z),this.intermediateTransformNode=new r.OperatorNode(this.offsetNode,this.inputNode,r.OperatorNode.ADD),this.transformNode=new r.OperatorNode(this.intermediateTransformNode,this.factorNode,r.OperatorNode.MUL),this.addTransformNode(a.NodeOperation.ADD,this.transformNode),this.buildMaterial(),this.initialized=!0,this.parent.on("change:geometry",(()=>{this.trigger("change:geometry")})),this.updateMatrix()}setInput(e){super.setInput(e),this.initialized&&(this.intermediateTransformNode.b=this.inputNode,this.buildMaterial())}set offset(e){this.offsetNode.value=e}get offset(){return this.offsetNode.value}set factor(e){this.factorNode.value=e}get factor(){return this.factorNode.value}get inputDimension(){return 3}}t.Warp=s},5417:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(9511)),o=n(6130),a=n(5614);class s extends o.Effect{constructor(e,t,n){super(e,t),this.initialized=!1,this.factorNode=new r.FloatNode(n),this.intermediateTransformNode=new r.OperatorNode(this.factorNode,this.inputNode,r.OperatorNode.MUL),this.transformNode=new r.OperatorNode(this.intermediateTransformNode,new r.NormalNode(r.NormalNode.WORLD),r.OperatorNode.MUL),this.addTransformNode(a.NodeOperation.ADD,this.transformNode),this.buildMaterial(),this.initialized=!0,this.parent.on("change:geometry",(()=>{this.trigger("change:geometry")})),this.updateMatrix()}setInput(e){super.setInput(e),this.initialized&&(this.intermediateTransformNode.b=this.inputNode,this.buildMaterial())}set factor(e){this.factorNode.value=e}get factor(){return this.factorNode.value}get inputDimension(){return 1}}t.WarpByScalar=s},709:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=i(n(9511)),a=n(6130),s=n(5614),c=n(4308),u=n(4785);class l extends a.Effect{constructor(e,t,n){super(e,t,n),this._defaultColor=new r.Color(.951,1,.825),this._texture=null,this._textureScale=2,this._texturePosition=new r.Vector3(1,1,0),this.initialized=!1,n&&(this._defaultColor=void 0!==n.defaultColor?n.defaultColor:this._defaultColor,this._texture=void 0!==n.texture?n.texture:this._texture,this._textureScale=void 0!==n.textureScale?n.textureScale:this._textureScale,this._texturePosition=void 0!==n.texturePosition?n.texturePosition:this._texturePosition),this.envMappingMeshes=this.meshes.map((e=>e.copy(c.BasicNodeMaterial))),this.meshes=this.meshes.map((e=>e.copy(c.BasicNodeMaterial)));const i=new o.VarNode("vec3"),a=new o.VarNode("float"),l=new o.FunctionNode(`void envMappingFunc${this.id}(vec3 position){\n        // Compute world position\n        vec4 wPosition = modelMatrix * vec4(position, 1.);\n\n        // Project vertex in the screen coordinates\n        vec4 projectedPosition = projectionMatrix * viewMatrix * wPosition;\n\n        // Store worldPosition and vertex depth\n        worldPosition = wPosition.xyz;\n        depth = projectedPosition.z;\n      }`);l.keywords={worldPosition:i,depth:a};const d=new o.FunctionCallNode(l,[new o.PositionNode]);for(const e of this.envMappingMeshes)e.addExpressionNode(d),e.addColorNode(s.NodeOperation.ASSIGN,i),e.addAlphaNode(s.NodeOperation.ASSIGN,a),e.buildMaterial();const h=new o.VarNode("vec3"),f=new o.FunctionNode(`void setLightPosition${this.id}(mat4 lightProjectionMatrix, mat4 lightViewMatrix, vec3 position){\n        vec4 lightRelativePosition = lightProjectionMatrix * lightViewMatrix * modelMatrix * vec4(position, 1.);\n        lightPosition = 0.5 + lightRelativePosition.xyz / lightRelativePosition.w * 0.5;\n      }`);f.keywords={lightPosition:h},this.lightProjectionMatrixNode=new o.Matrix4Node,this.lightViewMatrixNode=new o.Matrix4Node;const p=new o.FunctionCallNode(f,[this.lightProjectionMatrixNode,this.lightViewMatrixNode,new o.PositionNode]);this.addExpressionNode(p);const v=new o.VarNode("vec3"),m=new o.FunctionNode(`void setTextureBlending${this.id}(vec3 normal){\n        textureBlending = normalize(max(abs(normal), 0.00001)); // Force weights to sum to 1.0\n        float b = textureBlending.x + textureBlending.y + textureBlending.z;\n        textureBlending /= vec3(b, b, b);\n      }`);m.keywords={textureBlending:v};const g=new o.FunctionCallNode(m,[new o.NormalNode(o.NormalNode.WORLD)]);this.addExpressionNode(g),this.useTexturingNode=new o.FloatNode(0),this.envTextureNode=new o.TextureNode(new r.Texture),this.texturePositionNode=new o.Vector3Node(this._texturePosition.x,this._texturePosition.y,this._texturePosition.z),this.textureScaleNode=new o.FloatNode(this._textureScale),this.defaultColorNode=new o.ColorNode(this._defaultColor);const y=new o.FunctionNode("vec2 rand2(vec2 st){\n        st = vec2(\n          dot(st, vec2(127.1, 311.7)),\n          dot(st, vec2(269.5, 183.3))\n        );\n\n        return -1.0 + 2.0 * fract(sin(st) * 43758.5453123);\n      }"),b=new o.FunctionNode("float noise(vec2 st) {\n        vec2 i = floor(st);\n        vec2 f = fract(st);\n\n        vec2 u = f * f * (3.0 - 2.0 * f);\n\n        return mix(\n            mix(\n                dot(rand2(i + vec2(0.0, 0.0)), f - vec2(0.0, 0.0)),\n                dot(rand2(i + vec2(1.0, 0.0)), f - vec2(1.0, 0.0)),\n                u.x\n            ),\n            mix(\n                dot(rand2(i + vec2(0.0, 1.0)), f - vec2(0.0, 1.0)),\n                dot(rand2(i + vec2(1.0, 1.0) ), f - vec2(1.0, 1.0)),\n                u.x\n            ),\n            u.y\n        );\n      }");b.keywords={rand2:y};const x=new o.FunctionNode("float blur(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n        float intensity = 0.;\n        vec2 off1 = vec2(1.3846153846) * direction;\n        vec2 off2 = vec2(3.2307692308) * direction;\n        intensity += texture2D(image, uv).x * 0.2270270270;\n        intensity += texture2D(image, uv + (off1 / resolution)).x * 0.3162162162;\n        intensity += texture2D(image, uv - (off1 / resolution)).x * 0.3162162162;\n        intensity += texture2D(image, uv + (off2 / resolution)).x * 0.0702702703;\n        intensity += texture2D(image, uv - (off2 / resolution)).x * 0.0702702703;\n        return intensity;\n      }"),w=new o.FunctionNode(`vec3 getTextureColor${this.id}(sampler2D envTexture, vec3 worldPosition, vec3 texturePosition, float scale, vec3 textureBlending){\n        float texScale = 1. / scale;\n\n        vec3 xaxis = texture2D(envTexture, (texturePosition.yz + worldPosition.yz) * texScale).xyz;\n        vec3 yaxis = texture2D(envTexture, (texturePosition.xz + worldPosition.xz) * texScale).xyz;\n        vec3 zaxis = texture2D(envTexture, (texturePosition.xy + worldPosition.xy) * texScale).xyz;\n\n        return xaxis * textureBlending.x + yaxis * textureBlending.y + zaxis * textureBlending.z;\n      }`),N=new o.FunctionCallNode(w,[this.envTextureNode,new o.PositionNode(o.PositionNode.WORLD),this.texturePositionNode,this.textureScaleNode,v]),S=new o.FunctionNode(`vec3 getNoiseColor${this.id}(vec3 worldPosition, float scale, vec3 defaultColor, vec3 textureBlending){\n        vec3 xaxis = vec3(noise(worldPosition.yz * 100. * scale) * 0.2 + 0.9) * defaultColor;\n        vec3 yaxis = vec3(noise(worldPosition.xz * 100. * scale) * 0.2 + 0.9) * defaultColor;\n        vec3 zaxis = vec3(noise(worldPosition.xy * 100. * scale) * 0.2 + 0.9) * defaultColor;\n\n        return xaxis * textureBlending.x + yaxis * textureBlending.y + zaxis * textureBlending.z;\n      }`);S.keywords={noise:b};const T=new o.FunctionCallNode(S,[new o.PositionNode(o.PositionNode.WORLD),this.textureScaleNode,this.defaultColorNode,v]);this.causticsTextureNode=new o.TextureNode(new r.Texture);const C=new o.FunctionNode(`vec3 getColor${this.id}(float isUnderwater, sampler2D caustics, vec3 lightPosition, vec2 resolution, vec3 underwaterColor, vec3 overwaterColor, vec3 texColor){\n        float lightIntensity = 1.;\n\n        if (isUnderwater > 0.) {\n          // Retrieve caustics information\n          vec2 causticsInfo = texture2D(caustics, lightPosition.xy).zw;\n          float causticsDepth = causticsInfo.y;\n\n          if (causticsDepth > lightPosition.z - 0.001) {\n            float causticsIntensity = 0.5 * (\n              blur(caustics, lightPosition.xy, resolution, vec2(0., 0.5)) +\n              blur(caustics, lightPosition.xy, resolution, vec2(0.5, 0.))\n            );\n\n            lightIntensity = 0.6 + min(causticsIntensity, 0.2);\n          }\n\n          return texColor * underwaterColor * lightIntensity;\n        } else {\n          return texColor * overwaterColor * lightIntensity;\n        }\n      }`);C.keywords={blur:x},this.isUnderwaterNode=new u.IdentityNode(this.inputNode);const _=new o.FunctionCallNode(C,[this.isUnderwaterNode,this.causticsTextureNode,h,new o.Vector2Node(new r.Vector2(1024,1024)),new o.ColorNode(new r.Color(.4,.9,1)),new o.ColorNode(new r.Color(1,1,1)),new o.CondNode(this.useTexturingNode,new o.FloatNode(1),o.CondNode.EQUAL,N,T)]);this.addColorNode(s.NodeOperation.ASSIGN,_),this.initialized=!0}setLight(e,t,n){this.lightProjectionMatrixNode.value=t,this.lightViewMatrixNode.value=n}setCausticsTexture(e){this.causticsTextureNode.value=e}set defaultColor(e){this._defaultColor=e,this.defaultColorNode.value=e}set texture(e){this._texture=e,null===this._texture?this.useTexturingNode.value=0:(this.useTexturingNode.value=1,this._texture.wrapS=r.RepeatWrapping,this._texture.wrapT=r.RepeatWrapping,this.envTextureNode.value=this._texture)}set textureScale(e){this._textureScale=e,this.textureScaleNode.value=this._textureScale}set texturePosition(e){this._texturePosition=e,this.texturePositionNode.value=this._texturePosition}renderEnvMap(e,t){for(const n of this.envMappingMeshes)e.render(n.mesh,t)}setMatrix(e){for(const t of this.envMappingMeshes)t.matrix=e;for(const t of this.meshes)t.matrix=e}setInput(e){super.setInput(e),this.initialized&&(this.isUnderwaterNode.value=this.inputNode)}get inputDimension(){return 1}}l.envMapSize=1024,l.envMappingTarget=new r.WebGLRenderTarget(l.envMapSize,l.envMapSize,{type:r.FloatType}),t.UnderWater=l},950:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=i(n(9511)),a=n(6130),s=n(5614),c=n(4308),u=n(709),l=new r.Color("black");class d extends a.Effect{constructor(e,t){super(e,void 0,t),this.causticsNeedsUpdate=!0,this.causticsEnabled=!1,this.causticsSize=1024,this._causticsFactor=new o.FloatNode(.2),this.envMap=new o.TextureNode(u.UnderWater.envMappingTarget.texture),this.underWaterBlocks=[],t&&(this.causticsEnabled=void 0!==t.causticsEnabled?t.causticsEnabled:this.causticsEnabled,this.underWaterBlocks=void 0!==t.underWaterBlocks?t.underWaterBlocks:this.underWaterBlocks,this._causticsFactor=void 0!==t.causticsFactor?new o.FloatNode(t.causticsFactor):this._causticsFactor,this.skybox=void 0!==t.skybox?new o.CubeTextureNode(t.skybox):new o.CubeTextureNode(new r.CubeTexture),this.useSkyboxNode=new o.FloatNode(void 0!==t.skybox?1:0)),this.causticsMeshes=this.meshes.map((e=>e.copy(c.BasicNodeMaterial))),this.meshes=this.meshes.map((e=>e.copy(c.BasicNodeMaterial))),this.light=new r.Vector3(0,0,-1);const n=new o.Vector3Node(this.light);this.lightCamera=new r.OrthographicCamera(-1,1,1,-1),this.causticsTarget=new r.WebGLRenderTarget(this.causticsSize,this.causticsSize,{type:r.FloatType});const i=new o.VarNode("vec3"),a=new o.VarNode("vec3"),l=new o.VarNode("float"),d=new o.VarNode("float"),h=new o.FunctionNode(`vec3 causticsFunc${this.id}(sampler2D envMap, float deltaEnvMapTexture, vec3 position, vec3 light){\n        // Air refractive index / Water refractive index\n        const float eta = 0.7504;\n\n        // TODO Make this a uniform\n        // This is the maximum iterations when looking for the ray intersection with the environment,\n        // if after this number of attempts we did not find the intersection, the result will be wrong.\n        const int MAX_ITERATIONS = 50;\n\n        vec4 modelPosition = modelMatrix * vec4(position, 1.);\n\n        // This is the initial position: the ray starting point\n        oldPosition = modelPosition.xyz;\n\n        // Compute water coordinates in the screen space\n        vec4 projectedWaterPosition = projectionMatrix * viewMatrix * modelPosition;\n\n        vec2 currentPosition = projectedWaterPosition.xy;\n        vec2 coords = 0.5 + 0.5 * currentPosition;\n\n        // Workaround wrong normal\n        vec3 norm = normal;\n        if (dot(light, normal) > 0.) {\n          norm = - normal;\n        }\n\n        vec3 refracted = refract(light, norm, eta);\n        vec4 projectedRefractionVector = projectionMatrix * viewMatrix * vec4(refracted, 1.);\n\n        vec3 refractedDirection = projectedRefractionVector.xyz;\n\n        waterDepth = 0.5 + 0.5 * projectedWaterPosition.z / projectedWaterPosition.w;\n        float currentDepth = projectedWaterPosition.z;\n        vec4 environment = texture2D(envMap, coords);\n\n        // This factor will scale the delta parameters so that we move from one pixel to the other in the env map\n        float factor = deltaEnvMapTexture / length(refractedDirection.xy);\n\n        vec2 deltaDirection = refractedDirection.xy * factor;\n        float deltaDepth = refractedDirection.z * factor;\n\n        for (int i = 0; i < MAX_ITERATIONS; i++) {\n          // Move the coords in the direction of the refraction\n          currentPosition += deltaDirection;\n          currentDepth += deltaDepth;\n\n          // End of loop condition: The ray has hit the environment\n          if (environment.w <= currentDepth) {\n            break;\n          }\n\n          environment = texture2D(envMap, 0.5 + 0.5 * currentPosition);\n        }\n\n        newPosition = environment.xyz;\n\n        vec4 projectedEnvPosition = projectionMatrix * viewMatrix * vec4(newPosition, 1.0);\n        depth = 0.5 + 0.5 * projectedEnvPosition.z / projectedEnvPosition.w;\n\n        // This is needed for discarding the modelMatrix multiplication\n        return (inverse(modelMatrix) * vec4(newPosition, 1.0)).xyz;\n      }`);h.keywords={oldPosition:i,newPosition:a,waterDepth:l,depth:d};const f=new o.FunctionCallNode(h,[this.envMap,new o.FloatNode(1/u.UnderWater.envMapSize),new o.PositionNode,n]),p=new o.FunctionNode(`vec3 causticsIntensityFunc${this.id}(vec3 oldPosition, vec3 newPosition, float waterDepth, float depth, float causticsFactor){\n        float causticsIntensity = 0.;\n\n        if (depth >= waterDepth) {\n          float oldArea = length(dFdx(oldPosition)) * length(dFdy(oldPosition));\n          float newArea = length(dFdx(newPosition)) * length(dFdy(newPosition));\n\n          causticsIntensity = causticsFactor * ((oldArea / newArea) - 1.);\n        }\n\n        return vec3(causticsIntensity);\n      }`),v=new o.FunctionCallNode(p,[i,a,l,d,this._causticsFactor]);for(const e of this.causticsMeshes)e.addTransformNode(s.NodeOperation.ASSIGN,f),e.addColorNode(s.NodeOperation.ASSIGN,v),e.addAlphaNode(s.NodeOperation.ASSIGN,d),e.material.blending=r.CustomBlending,e.material.blendEquation=r.AddEquation,e.material.blendSrc=r.OneFactor,e.material.blendDst=r.OneFactor,e.material.blendEquationAlpha=r.AddEquation,e.material.blendSrcAlpha=r.OneFactor,e.material.blendDstAlpha=r.ZeroFactor,e.buildMaterial();this.initEnvMapMaterial=new r.ShaderMaterial({vertexShader:"\nvarying vec4 worldPosition;\n\n\nvoid main() {\n  // Compute world position\n  worldPosition = modelMatrix * vec4(position, 1.);\n\n  gl_Position = projectionMatrix * viewMatrix * worldPosition;\n}\n",fragmentShader:"\nvarying vec4 worldPosition;\n\n\nvoid main() {\n  gl_FragColor = vec4(worldPosition.xyz, 1.);\n}\n"}),this.initEnvMapMesh=new r.Mesh(new r.PlaneBufferGeometry(2,2),this.initEnvMapMaterial),this.screenSpaceTarget=new r.WebGLRenderTarget(512,512);const m=new o.VarNode("vec3"),g=new o.VarNode("float"),y=new o.VarNode("vec2"),b=new o.FunctionNode(`void computeReflectionRefractionFunc${this.id}(vec3 position, vec3 normal){\n        const float refractionFactor = 1.;\n\n        const float fresnelBias = 0.1;\n        const float fresnelPower = 2.;\n        const float fresnelScale = 1.;\n\n        // Air refractive index / Water refractive index\n        const float eta = 0.7504;\n\n        vec3 wPosition = (modelMatrix * vec4(position, 1.)).xyz;\n\n        vec3 eye = normalize(wPosition - cameraPosition);\n\n        // Workaround wrong normal\n        vec3 norm = normal;\n        if (dot(eye, normal) > 0.) {\n          norm = - normal;\n        }\n\n        vec3 refracted = normalize(refract(eye, norm, eta));\n        reflected = normalize(reflect(eye, norm));\n\n        reflectionFactor = fresnelBias + fresnelScale * pow(1. + dot(eye, norm), fresnelPower);\n\n        vec4 projectedRefractedPosition = projectionMatrix * modelViewMatrix * vec4(position + refractionFactor * refracted, 1.0);\n        refractedPosition = projectedRefractedPosition.xy / projectedRefractedPosition.w;\n      }`);b.keywords={reflected:m,reflectionFactor:g,refractedPosition:y};const x=new o.FunctionCallNode(b,[new o.PositionNode,new o.NormalNode(o.NormalNode.WORLD)]);this.addExpressionNode(x);const w=new o.FunctionNode(`vec3 getWaterSurfaceColorFunc1${this.id}(sampler2D envMap, samplerCube skybox){\n        vec3 refractedColor = texture2D(envMap, refractedPosition * 0.5 + 0.5).xyz;\n        vec3 reflectedColor = textureCube(skybox, reflected).xyz;\n\n        return mix(refractedColor, reflectedColor, clamp(reflectionFactor, 0., 1.));\n      }`);w.keywords={reflected:m,reflectionFactor:g,refractedPosition:y},this.screenSpaceTargetTextureNode=new o.TextureNode(this.screenSpaceTarget.texture);const N=new o.FunctionCallNode(w,[this.screenSpaceTargetTextureNode,this.skybox]),S=new o.FunctionNode(`vec3 getWaterSurfaceColorFunc2${this.id}(sampler2D envMap){\n        vec3 refractedColor = texture2D(envMap, refractedPosition * 0.5 + 0.5).xyz;\n        vec3 reflectedColor = vec3(0.22, 0.47, 0.77);\n\n        return mix(refractedColor, reflectedColor, clamp(reflectionFactor, 0., 1.));\n      }`);S.keywords={reflectionFactor:g,refractedPosition:y};const T=new o.FunctionCallNode(S,[new o.TextureNode(this.screenSpaceTarget.texture)]);this.addColorNode(s.NodeOperation.ASSIGN,new o.CondNode(this.useSkyboxNode,new o.FloatNode(1),o.CondNode.EQUAL,N,T)),this.updateLightCamera(),this.parent.on("change:geometry",this.updateWater.bind(this)),this.beforeRenderHook=this._beforeRenderHook,this.updateMatrix()}addToScene(e){super.addToScene(e);for(const t of this.underWaterBlocks)t.addToScene(e)}updateWater(){this.causticsNeedsUpdate=!0}set causticsFactor(e){this._causticsFactor.value=e}updateLightCamera(){const e=(new r.Sphere).copy(this.boundingSphere),t=(new r.Matrix4).makeScale(this._scale.x,this._scale.y,this._scale.z),n=(new r.Matrix4).makeTranslation(this._position.x,this._position.y,this._position.z),i=(new r.Matrix4).multiplyMatrices(t,n);e.applyMatrix4(i),this.initEnvMapMesh.scale.set(e.radius,e.radius,e.radius),this.initEnvMapMesh.position.set(e.center.x,e.center.y,-e.radius),this.initEnvMapMesh.updateMatrixWorld(!0),this.lightCamera.left=-e.radius,this.lightCamera.right=e.radius,this.lightCamera.top=e.radius,this.lightCamera.bottom=-e.radius,this.lightCamera.near=0,this.lightCamera.far=2*e.radius,this.lightCamera.position.set(0,0,e.radius),this.lightCamera.lookAt(e.center),this.lightCamera.updateProjectionMatrix(),this.lightCamera.updateMatrixWorld(!0);for(const e of this.underWaterBlocks)e.setLight(this.light,this.lightCamera.projectionMatrix,this.lightCamera.matrixWorldInverse)}_beforeRenderHook(e,t){if(this.causticsNeedsUpdate&&this.causticsEnabled){e.setRenderTarget(u.UnderWater.envMappingTarget),e.setClearColor(l,0),e.clear(),e.render(this.initEnvMapMesh,this.lightCamera);for(const t of this.underWaterBlocks)t.renderEnvMap(e,this.lightCamera);this.envMap.value=u.UnderWater.envMappingTarget.texture,e.setRenderTarget(this.causticsTarget),e.setClearColor(l,0),e.clear();for(const t of this.causticsMeshes)e.render(t.mesh,this.lightCamera);for(const e of this.underWaterBlocks)e.setCausticsTexture(this.causticsTarget.texture);this.causticsNeedsUpdate=!1}this.screenSpaceTarget.width==e.domElement.width&&this.screenSpaceTarget.height==e.domElement.height||this.screenSpaceTarget.setSize(e.domElement.width,e.domElement.height),e.setRenderTarget(this.screenSpaceTarget),e.setClearColor(t.clearColor,t.clearOpacity),e.clear(),this.meshes.forEach((e=>e.mesh.visible=!1)),e.render(t.scene,t.camera),this.screenSpaceTargetTextureNode.value=this.screenSpaceTarget.texture,this.meshes.forEach((e=>e.mesh.visible=!0))}updateMatrix(){const e=(new r.Matrix4).makeScale(this._scale.x,this._scale.y,this._scale.z),t=(new r.Matrix4).makeTranslation(this._position.x,this._position.y,this._position.z),n=(new r.Matrix4).multiplyMatrices(e,t);for(const e of this.meshes)e.matrix=n;for(const e of this.causticsMeshes)e.matrix=n;for(const e of this.underWaterBlocks)e.setMatrix(n);this.updateLightCamera(),this.causticsNeedsUpdate=!0}}t.Water=d},1403:(e,t,n)=>{"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(2507)),i(n(6003)),i(n(6708)),i(n(3298)),i(n(1657)),i(n(3398)),i(n(5417)),i(n(950)),i(n(709))},4454:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const i=n(8558);t.Events=class{constructor(){this.eventDispatcher=Object.assign({},i.Events)}on(e,t,n){null==n?this.eventDispatcher.on(e,t):this.eventDispatcher.on(e,t,n)}off(e,t,n){null==n?this.eventDispatcher.off(e,t):this.eventDispatcher.off(e,t,n)}trigger(e){this.eventDispatcher.trigger(e)}}},2311:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=i(n(9511)),a=n(5614),s=n(831);class c extends s.Block{constructor(e,t,n,i){super(e,n,i),this._triangleIndices=t,this.geometry=new r.BufferGeometry;const s=new r.BufferAttribute(e,3),c=new r.BufferAttribute(t,1);this.geometry.setAttribute("position",s),this.geometry.setIndex(c),this.mesh=new a.NodeMesh(r.Mesh,o.StandardNodeMaterial,this.geometry,this.data),this.meshes.push(this.mesh),this.buildMaterial()}handleVerticesChange(){super.handleVerticesChange(),this.mesh.vertices=this.vertices}handleTriangleIndicesChange(){if(super.handleTriangleIndicesChange(),null==this.triangleIndices)this.geometry.copy(this.geometry.toNonIndexed());else{const e=new r.BufferAttribute(this.triangleIndices,1);this.geometry.setIndex(e)}}get boundingSphere(){return this.geometry.computeBoundingSphere(),this.geometry.boundingSphere}}t.PolyMesh=c,t.TetraMesh=class extends c{constructor(e,t,n,i,r){super(e,t,i,r),this.tetrahedronIndices=n}};class u extends s.Block{constructor(e,t,n){super(e,t,n),this.geometry=new r.BufferGeometry;const i=new r.BufferAttribute(e,3);this.geometry.setAttribute("position",i),this.mesh=new a.NodeMesh(r.Points,o.StandardNodeMaterial,this.geometry,this.data),this.meshes.push(this.mesh),this.buildMaterial()}handleVerticesChange(){super.handleVerticesChange(),this.mesh.vertices=this.vertices}get boundingSphere(){return this.geometry.computeBoundingSphere(),this.geometry.boundingSphere}}t.PointCloud=u},5614:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=i(n(9511));var a;!function(e){e[e.ASSIGN=0]="ASSIGN",e[e.SUB=1]="SUB",e[e.ADD=2]="ADD",e[e.DIV=3]="DIV",e[e.MUL=4]="MUL"}(a=t.NodeOperation||(t.NodeOperation={}));class s{constructor(e,t){this.operation=e,this.rhs=t}operate(e){switch(this.operation){case a.ASSIGN:return this.rhs;case a.SUB:return new o.OperatorNode(e,this.rhs,o.OperatorNode.SUB);case a.ADD:return new o.OperatorNode(e,this.rhs,o.OperatorNode.ADD);case a.DIV:return new o.OperatorNode(e,this.rhs,o.OperatorNode.DIV);case a.MUL:return new o.OperatorNode(e,this.rhs,o.OperatorNode.MUL)}}}t.NodeOperator=s;class c{constructor(e,t,n,i){this.transformOperators=[],this.alphaOperators=[],this.colorOperators=[],this.maskNodes=[],this.expressionNodes=[],this.meshCtor=e,this.materialCtor=t,this.geometry=n,this.geometry.computeVertexNormals(),this.material=new t,this.material.extensions.derivatives=!0,this.data=i;for(const e of this.data)for(const t of e.components)this.geometry.setAttribute(t.shaderName,t.bufferAttribute);this.hasIndex=null!=this.geometry.index,this.mesh=new e(n,this.material),this.mesh.matrixAutoUpdate=!1,this._defaultColor=new r.Color("#6395b0"),this.defaultColorNode=new o.ColorNode(this._defaultColor)}set vertices(e){const t=this.geometry.getAttribute("position");if(t.array.length==e.length)t.set(e),t.needsUpdate=!0;else{this.geometry.deleteAttribute("position");const t=new r.BufferAttribute(e,3);this.geometry.setAttribute("position",t)}this.geometry.computeVertexNormals()}updateData(e){for(const t of this.data)for(const n of t.components){const i=n.bufferAttribute;n.array=new Float32Array(e[t.name][n.name].array),n.bufferAttribute!==i&&(this.geometry.deleteAttribute(n.shaderName),this.geometry.setAttribute(n.shaderName,n.bufferAttribute))}}buildMaterial(){let e=new o.PositionNode,t=new o.FloatNode(1),n=this.defaultColorNode,i=new o.BoolNode(!0);for(const t of this.transformOperators)e=t.operate(e);for(const e of this.colorOperators)n=e.operate(n);for(const e of this.alphaOperators)t=e.operate(t);for(const e of this.maskNodes)i=new o.ExpressionNode("a && b","bool",{a:i,b:e});for(const t of this.expressionNodes)e=new o.BypassNode(t,e);this.material.flatShading=!0,this.material.side=r.DoubleSide,this.material.position=e,this.material.alpha=t,this.material.color=n,this.material.mask=i,"Points"==this.mesh.type&&this.material instanceof o.StandardNodeMaterial&&(this.material.normal=new o.Vector3Node(1,1,1)),this.material.alphaTest=.1,this.material.build()}copy(e){const t=e||this.materialCtor,n=new c(this.meshCtor,t,this.geometry,this.data);return n.hasIndex=this.hasIndex,n.transformOperators=this.transformOperators.slice(),n.alphaOperators=this.alphaOperators.slice(),n.colorOperators=this.colorOperators.slice(),n.maskNodes=this.maskNodes.slice(),n.expressionNodes=this.expressionNodes.slice(),n.defaultColor=this.defaultColor,n}copyMaterial(e){this.transformOperators=e.transformOperators.slice(),this.alphaOperators=e.alphaOperators.slice(),this.colorOperators=e.colorOperators.slice(),this.maskNodes=e.maskNodes.slice(),this.expressionNodes=e.expressionNodes.slice(),this.defaultColor=e.defaultColor}set matrix(e){this.mesh.matrix.copy(e),this.mesh.updateMatrixWorld(!0)}get boundingSphere(){return this.geometry.computeBoundingSphere(),this.geometry.boundingSphere}set defaultColor(e){this._defaultColor=e,this.defaultColorNode.value=this._defaultColor}get defaultColor(){return this._defaultColor}addTransformNode(e,t){this.transformOperators.push(new s(e,t))}addColorNode(e,t){this.colorOperators.push(new s(e,t))}addAlphaNode(e,t){this.alphaOperators.push(new s(e,t))}addMaskNode(e){this.maskNodes.push(e)}addExpressionNode(e){this.expressionNodes.push(e)}sortTriangleIndices(e){const t=(new r.Matrix4).getInverse(this.mesh.matrix),n=(new r.Vector3).copy(e).applyMatrix4(t);if("Mesh"==this.mesh.type){const e=this.geometry.getAttribute("position").array;let t;t=this.hasIndex&&null!==this.geometry.index?this.geometry.index.array:Array.from(Array(e.length/3).keys());const i=Array.from(Array(t.length/3).keys()),o=i.map((i=>{const o=3*i,a=[t[o],t[o+1],t[o+2]],s=3*a[0],c=3*a[1],u=3*a[2],l=[e[s],e[s+1],e[s+2]],d=[e[c],e[c+1],e[c+2]],h=[e[u],e[u+1],e[u+2]],f=(l[0]+d[0]+h[0])/3,p=(l[1]+d[1]+h[1])/3,v=(l[2]+d[2]+h[2])/3,m=new r.Vector3(f,p,v);return n.distanceToSquared(m)}));i.sort(((e,t)=>o[t]-o[e]));const a=new Uint32Array(t.length);for(let e=0;e<i.length;e++){const n=i[e];a[3*e]=t[3*n],a[3*e+1]=t[3*n+1],a[3*e+2]=t[3*n+2]}if(this.hasIndex&&null!==this.geometry.index)this.geometry.index.set(a),this.geometry.index.needsUpdate=!0;else{const e=new r.BufferAttribute(a,1);this.geometry.setIndex(e)}}}dispose(){this.geometry.dispose(),this.material.dispose()}}t.NodeMesh=c},6201:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=n(1410);t.Scene=class{constructor(){this.blocks=[],this.scene=new r.Scene;const e=new r.AmbientLight(16777215,.5);this.scene.add(e),this.directionalLight=new r.DirectionalLight(16777215,.5),this.scene.add(this.directionalLight)}addBlock(e){this.blocks.push(e),e.addToScene(this.scene)}handleCameraMove(e,t){this.directionalLight.position.set(e.x,e.y,e.z),this.directionalLight.target.position.set(t.x,t.y,t.z)}handleCameraMoveEnd(e){for(const t of this.blocks)t.handleCameraMoveEnd(e)}dispose(){this.scene.dispose();for(const e of this.blocks)e.dispose()}},t.Renderer=class{constructor(e,t){this.materialVersions={},this.el=e,this.scene=t}initialize(){const{width:e,height:t}=this.el.getBoundingClientRect();this.camera=new r.PerspectiveCamera(50,e/t,.001,99999),this.camera.position.z=2,this.renderer=new r.WebGLRenderer({antialias:!0,alpha:!0,logarithmicDepthBuffer:!0}),this.renderer.autoClear=!1,this.color="white",this.opacity=1,this.clearColor=new r.Color(this.color),this.renderer.setClearColor(this.clearColor,this.opacity),this.renderer.setSize(e,t),this.renderer.localClippingEnabled=!0,this.el.appendChild(this.renderer.domElement),this.controls=new o.TrackballControls(this.camera,this.el),this.controls.screen.width=e,this.controls.screen.height=t,this.controls.rotateSpeed=2.5,this.controls.zoomSpeed=1.2,this.controls.panSpeed=.9,this.controls.dynamicDampingFactor=.9,this.controls.addEventListener("change",this.handleCameraMove.bind(this)),this.controls.addEventListener("end",this.handleCameraMoveEnd.bind(this)),this.handleCameraMove(),this.animate()}resize(){const{width:e,height:t}=this.el.getBoundingClientRect();this.renderer.setSize(e,t),this.camera.aspect=e/t,this.camera.updateProjectionMatrix(),this.controls.handleResize(),this.controls.screen.width=e,this.controls.screen.height=t}set backgroundColor(e){this.color=e,this.clearColor=new r.Color(this.color),this.renderer.setClearColor(this.clearColor,this.opacity)}set backgroundOpacity(e){this.opacity=e,this.renderer.setClearColor(this.clearColor,this.opacity)}set cameraPosition(e){this.camera.position.set(e.x,e.y,e.z)}get cameraPosition(){return this.camera.position}set cameraRotation(e){this.camera.quaternion.set(e.x,e.y,e.z,e.w)}get cameraRotation(){return this.camera.quaternion}set cameraTarget(e){this.controls.target.set(e.x,e.y,e.z)}get cameraTarget(){return this.controls.target}set cameraUp(e){this.camera.up.set(e.x,e.y,e.z)}get cameraUp(){return this.camera.up}animate(){this.animationID=window.requestAnimationFrame(this.animate.bind(this));for(const e of this.scene.blocks)null!==e.beforeRenderHook&&e.beforeRenderHook(this.renderer,{scene:this.scene.scene,camera:this.camera,clearColor:this.clearColor,clearOpacity:this.opacity});this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.opacity),this.renderer.clear(),this.renderer.render(this.scene.scene,this.camera),this.controls.update()}handleCameraMove(){this.scene.handleCameraMove(this.camera.position,this.controls.target)}handleCameraMoveEnd(){this.scene.handleCameraMoveEnd(this.camera.position)}dispose(){window.cancelAnimationFrame(this.animationID),this.controls.dispose(),this.renderer.dispose()}}},3272:(e,t,n)=>{"use strict";function i(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),i(n(6201)),i(n(5614)),i(n(5730)),i(n(4454)),i(n(831)),i(n(2311)),i(n(6130)),i(n(1403))},3503:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(9511));class o extends r.Node{constructor(){super(),this.color=new r.ColorNode(16777215)}build(e){let t;if(e.extensions={derivatives:!0},e.isShader("vertex")){const n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif"].join("\n"));const i=["#include <beginnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED"," vNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&i.push(n.code,n.result?"transformed = "+n.result+";":""),i.push("#include <project_vertex>"," vViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),t=i.join("\n")}else{this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e);const n=this.mask?this.mask.flow(e,"b"):void 0,i=this.color.flow(e,"c",{slot:"color"}),r=this.alpha?this.alpha.flow(e,"f"):void 0;e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif"].join("\n"));const o=[" #include <normal_fragment_begin>"];n&&o.push(n.code,"if ( ! "+n.result+" ) discard;"),o.push(i.code),r&&o.push(r.code),r?o.push("gl_FragColor = vec4("+i.result+", "+r.result+" );"):o.push("gl_FragColor = vec4("+i.result+", 1.0 );"),t=o.join("\n")}return t}}o.nodeType="Basic",t.BasicNode=o},4308:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=n(3503),o=i(n(9511));class a extends o.NodeMaterial{constructor(){const e=new r.BasicNode;super(e,e),this.type="BasicNodeMaterial"}}t.BasicNodeMaterial=a,o.NodeUtils.addShortcuts(a.prototype,"fragment",["color","alpha","position","mask"])},4971:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=n(4738),o=i(n(2893)),a=i(n(9511)),s=n(5730),c=n(5614);function u(e,t,n,i,r){return(e-n)*(i-t)/(r-n)+t}t.interpolate=u,t.IsoSurfaceUtils=class{constructor(e,t,n,i=!1){this.previousValue=null,this.initialVertices=e,this.initialTetrahedronIndices=t,this.initialData=n,this.dynamic=i,this.geometry=new o.BufferGeometry,this._vertices=new Float32Array(0);const r=new o.BufferAttribute(this._vertices,3);this.geometry.setAttribute("position",r);const s=this.initialData.map((e=>e.copy(!1)));this._isoSurfaceMesh=new c.NodeMesh(o.Mesh,a.StandardNodeMaterial,this.geometry,s)}updateInput(e){this.dynamic||(this.treeMin=this.createTree(e,"min"),this.treeMax=this.createTree(e,"max")),this.previousValue=null,this.inputDataArray=e}computeIsoSurface(e){let t;if(this.dynamic)t=Array.from(Array(this.initialTetrahedronIndices.length/4).keys());else{null!=this.previousValue?e>this.previousValue?(this.Emin=this.Emin.concat(this.treeMin.betweenBounds({$gte:this.previousValue,$lt:e})),this.Emax=this.treeMax.betweenBounds({$gt:e})):(this.Emin=this.treeMin.betweenBounds({$lt:e}),this.Emax=this.Emax.concat(this.treeMax.betweenBounds({$gt:e,$lte:this.previousValue}))):(this.Emin=this.treeMin.betweenBounds({$lt:e}),this.Emax=this.treeMax.betweenBounds({$gt:e}));const n=this.Emin,i=new Set(this.Emax);if(null==n)throw"Unreachable";t=n.filter((e=>i.has(e)))}const n=[],i=s.datalistToDict(this.initialData,!1),r=[!1,!1,!1,!1],o=[!1,!1,!1,!1];let a,c,l,d,h,f,p,v,m,g;for(let y=0,b=t.length;y<b;y++)if(l=4*t[y],r[0]=this.inputDataArray[this.initialTetrahedronIndices[l]]>=e,r[1]=this.inputDataArray[this.initialTetrahedronIndices[l+1]]>=e,r[2]=this.inputDataArray[this.initialTetrahedronIndices[l+2]]>=e,r[3]=this.inputDataArray[this.initialTetrahedronIndices[l+3]]>=e,o[0]=this.inputDataArray[this.initialTetrahedronIndices[l]]<=e,o[1]=this.inputDataArray[this.initialTetrahedronIndices[l+1]]<=e,o[2]=this.inputDataArray[this.initialTetrahedronIndices[l+2]]<=e,o[3]=this.inputDataArray[this.initialTetrahedronIndices[l+3]]<=e,(r[0]||r[1]||r[2]||r[3])&&(o[0]||o[1]||o[2]||o[3])){a=[],c=s.datalistToDict(this.initialData,!1);for(let t=0;t<3;t++)for(let n=t+1;n<4;n++)if(r[t]&&o[n]||o[t]&&r[n]){d=this.initialTetrahedronIndices[l+t],h=this.initialTetrahedronIndices[l+n],f=[this.initialVertices[3*d],this.initialVertices[3*d+1],this.initialVertices[3*d+2]],m=this.inputDataArray[d],p=[this.initialVertices[3*h],this.initialVertices[3*h+1],this.initialVertices[3*h+2]],g=this.inputDataArray[h],a.push(u(e,f[0],m,p[0],g),u(e,f[1],m,p[1],g),u(e,f[2],m,p[2],g));for(const t of this.initialData)for(const n of t.components)c[t.name][n.name].array.push(u(e,n.array[d],m,n.array[h],g))}f=a.slice(0,3),p=a.slice(3,6),v=a.slice(6,9),n.push(...f,...v,...p);for(const e in c)for(const t in c[e]){const n=i[e][t].array,r=c[e][t].array;n.push(r[0],r[2],r[1])}if(12===a.length){n.push(...p,...v,...a.slice(9,12));for(const e in c)for(const t in c[e]){const n=i[e][t].array,r=c[e][t].array;n.push(r[1],r[2],r[3])}}}this._vertices=new Float32Array(n),this._isoSurfaceMesh.vertices=this._vertices,this._isoSurfaceMesh.updateData(i),this.previousValue=e}get mesh(){return this._isoSurfaceMesh}get vertices(){return this._vertices}createTree(e,t="min"){const n=new r.BinarySearchTree,i="min"==t?Math.min:Math.max;for(let t=0;t<this.initialTetrahedronIndices.length;t+=4)n.insert(i(e[this.initialTetrahedronIndices[t]],e[this.initialTetrahedronIndices[t+1]],e[this.initialTetrahedronIndices[t+2]],e[this.initialTetrahedronIndices[t+3]]),t/4);return n}}},4785:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(9511));class o extends r.Node{constructor(e){super(),this.value=e}getType(e){return this.value.getType(e)}generate(e,t){return this.value.generate(e,t)}copy(e){return super.copy(e),this.value=e.value,this}toJSON(e){return this.value.toJSON()}}o.nodeType="IdentityNode",t.IdentityNode=o},2732:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893)),o=n(1324),a=n(5855),s={BrBG:a.interpolateBrBG,PRGn:a.interpolatePRGn,PiYG:a.interpolatePiYG,PuOr:a.interpolatePuOr,RdBu:a.interpolateRdBu,RdGy:a.interpolateRdGy,RdYlBu:a.interpolateRdYlBu,RdYlGn:a.interpolateRdYlGn,Spectral:a.interpolateSpectral,BuGn:a.interpolateBuGn,BuPu:a.interpolateBuPu,GnBu:a.interpolateGnBu,OrRd:a.interpolateOrRd,PuBuGn:a.interpolatePuBuGn,PuBu:a.interpolatePuBu,PuRd:a.interpolatePuRd,RdPu:a.interpolateRdPu,YlGnBu:a.interpolateYlGnBu,YlGn:a.interpolateYlGn,YlOrBr:a.interpolateYlOrBr,YlOrRd:a.interpolateYlOrRd,Blues:a.interpolateBlues,Greens:a.interpolateGreens,Greys:a.interpolateGreys,Purples:a.interpolatePurples,Reds:a.interpolateReds,Oranges:a.interpolateOranges,Cividis:a.interpolateCividis,CubehelixDefault:a.interpolateCubehelixDefault,Rainbow:a.interpolateRainbow,Warm:a.interpolateWarm,Cool:a.interpolateCool,Sinebow:a.interpolateSinebow,Turbo:a.interpolateTurbo,Viridis:a.interpolateViridis,Magma:a.interpolateMagma,Inferno:a.interpolateInferno,Plasma:a.interpolatePlasma};var c;function u(e,t,n,i,r){const o=e.getContext("2d"),a=1024;if(e.width=a,e.height=100,null===o)throw"Failed to create canvas context for the colorbar";o.save(),o.clearRect(0,0,e.width,e.height),o.fillStyle="black",o.font="35px Open Sans",o.textAlign="start",o.fillText(r(n[0]),0,100),o.textAlign="center",i==c.linear?(o.fillText(r(n[1]+.75*(n[0]-n[1])),256,100),o.fillText(r(n[1]+.5*(n[0]-n[1])),512,100),o.fillText(r(n[1]+.25*(n[0]-n[1])),768,100)):(o.fillText(r(Math.pow(Math.E,Math.log(n[0])+.25*(Math.log(n[1])-Math.log(n[0])))),256,100),o.fillText(r(Math.pow(Math.E,Math.log(n[0])+.5*(Math.log(n[1])-Math.log(n[0])))),512,100),o.fillText(r(Math.pow(Math.E,Math.log(n[0])+.75*(Math.log(n[1])-Math.log(n[0])))),768,100)),o.textAlign="end",o.fillText(r(n[1]),a,100);for(let e=0;e<a;++e)o.fillStyle=t(e/1023),o.fillRect(e,0,1,60);o.lineWidth=4,o.fillStyle="black",o.strokeRect(0,0,a,60),o.beginPath(),o.moveTo(0,52),o.lineTo(0,68),o.closePath(),o.stroke(),o.beginPath(),o.moveTo(256,52),o.lineTo(256,68),o.closePath(),o.stroke(),o.beginPath(),o.moveTo(512,52),o.lineTo(512,68),o.closePath(),o.stroke(),o.beginPath(),o.moveTo(768,52),o.lineTo(768,68),o.closePath(),o.stroke(),o.beginPath(),o.moveTo(a,52),o.lineTo(a,68),o.closePath(),o.stroke(),o.restore()}!function(e){e.linear="linear",e.log="log"}(c=t.ScaleType||(t.ScaleType={})),t.getColorInterpolator=function(e){return s[e]},t.getColorMapTexture=function(e){const t=new Uint8Array(3072);for(let n=0;n<1024;n++){const i=o.color(e(n/1023)),r=3*n;t[r]=i.r,t[r+1]=i.g,t[r+2]=i.b}return new r.DataTexture(t,1024,1,r.RGBFormat)},t.getColorBar=function(e,t,n,i){const r=document.createElement("canvas");return u(r,e,t,n,i),r},t.updateColorBar=u},7578:function(e,t,n){"use strict";var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const r=i(n(2893));t.uuid=function(){return"v"+r.MathUtils.generateUUID().replace(/-/gi,"")}},8558:(e,t,n)=>{var i,r,o;o="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g,i=[n(7963),n(9755),t],void 0===(r=function(e,t,n){o.Backbone=function(e,t,n,i){var r=e.Backbone,o=Array.prototype.slice;t.VERSION="1.4.0",t.$=i,t.noConflict=function(){return e.Backbone=r,this},t.emulateHTTP=!1,t.emulateJSON=!1;var a,s=t.Events={},c=/\s+/,u=function(e,t,i,r,o){var a,s=0;if(i&&"object"==typeof i){void 0!==r&&"context"in o&&void 0===o.context&&(o.context=r);for(a=n.keys(i);s<a.length;s++)t=u(e,t,a[s],i[a[s]],o)}else if(i&&c.test(i))for(a=i.split(c);s<a.length;s++)t=e(t,a[s],r,o);else t=e(t,i,r,o);return t};s.on=function(e,t,n){return this._events=u(l,this._events||{},e,t,{context:n,ctx:this,listening:a}),a&&((this._listeners||(this._listeners={}))[a.id]=a,a.interop=!1),this},s.listenTo=function(e,t,i){if(!e)return this;var r=e._listenId||(e._listenId=n.uniqueId("l")),o=this._listeningTo||(this._listeningTo={}),s=a=o[r];s||(this._listenId||(this._listenId=n.uniqueId("l")),s=a=o[r]=new m(this,e));var c=d(e,t,i,this);if(a=void 0,c)throw c;return s.interop&&s.on(t,i),this};var l=function(e,t,n,i){if(n){var r=e[t]||(e[t]=[]),o=i.context,a=i.ctx,s=i.listening;s&&s.count++,r.push({callback:n,context:o,ctx:o||a,listening:s})}return e},d=function(e,t,n,i){try{e.on(t,n,i)}catch(e){return e}};s.off=function(e,t,n){return this._events?(this._events=u(h,this._events,e,t,{context:n,listeners:this._listeners}),this):this},s.stopListening=function(e,t,i){var r=this._listeningTo;if(!r)return this;for(var o=e?[e._listenId]:n.keys(r),a=0;a<o.length;a++){var s=r[o[a]];if(!s)break;s.obj.off(t,i,this),s.interop&&s.off(t,i)}return n.isEmpty(r)&&(this._listeningTo=void 0),this};var h=function(e,t,i,r){if(e){var o,a=r.context,s=r.listeners,c=0;if(t||a||i){for(o=t?[t]:n.keys(e);c<o.length;c++){var u=e[t=o[c]];if(!u)break;for(var l=[],d=0;d<u.length;d++){var h=u[d];if(i&&i!==h.callback&&i!==h.callback._callback||a&&a!==h.context)l.push(h);else{var f=h.listening;f&&f.off(t,i)}}l.length?e[t]=l:delete e[t]}return e}for(o=n.keys(s);c<o.length;c++)s[o[c]].cleanup()}};s.once=function(e,t,n){var i=u(f,{},e,t,this.off.bind(this));return"string"==typeof e&&null==n&&(t=void 0),this.on(i,t,n)},s.listenToOnce=function(e,t,n){var i=u(f,{},t,n,this.stopListening.bind(this,e));return this.listenTo(e,i)};var f=function(e,t,i,r){if(i){var o=e[t]=n.once((function(){r(t,o),i.apply(this,arguments)}));o._callback=i}return e};s.trigger=function(e){if(!this._events)return this;for(var t=Math.max(0,arguments.length-1),n=Array(t),i=0;i<t;i++)n[i]=arguments[i+1];return u(p,this._events,e,void 0,n),this};var p=function(e,t,n,i){if(e){var r=e[t],o=e.all;r&&o&&(o=o.slice()),r&&v(r,i),o&&v(o,[t].concat(i))}return e},v=function(e,t){var n,i=-1,r=e.length,o=t[0],a=t[1],s=t[2];switch(t.length){case 0:for(;++i<r;)(n=e[i]).callback.call(n.ctx);return;case 1:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o);return;case 2:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a);return;case 3:for(;++i<r;)(n=e[i]).callback.call(n.ctx,o,a,s);return;default:for(;++i<r;)(n=e[i]).callback.apply(n.ctx,t);return}},m=function(e,t){this.id=e._listenId,this.listener=e,this.obj=t,this.interop=!0,this.count=0,this._events=void 0};m.prototype.on=s.on,m.prototype.off=function(e,t){var n;this.interop?(this._events=u(h,this._events,e,t,{context:void 0,listeners:void 0}),n=!this._events):(this.count--,n=0===this.count),n&&this.cleanup()},m.prototype.cleanup=function(){delete this.listener._listeningTo[this.obj._listenId],this.interop||delete this.obj._listeners[this.id]},s.bind=s.on,s.unbind=s.off,n.extend(t,s);var g=t.Model=function(e,t){var i=e||{};t||(t={}),this.preinitialize.apply(this,arguments),this.cid=n.uniqueId(this.cidPrefix),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(i=this.parse(i,t)||{});var r=n.result(this,"defaults");i=n.defaults(n.extend({},r,i),r),this.set(i,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(g.prototype,s,{changed:null,validationError:null,idAttribute:"id",cidPrefix:"c",preinitialize:function(){},initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return null!=this.get(e)},matches:function(e){return!!n.iteratee(e,this)(this.attributes)},set:function(e,t,i){if(null==e)return this;var r;if("object"==typeof e?(r=e,i=t):(r={})[e]=t,i||(i={}),!this._validate(r,i))return!1;var o=i.unset,a=i.silent,s=[],c=this._changing;this._changing=!0,c||(this._previousAttributes=n.clone(this.attributes),this.changed={});var u=this.attributes,l=this.changed,d=this._previousAttributes;for(var h in r)t=r[h],n.isEqual(u[h],t)||s.push(h),n.isEqual(d[h],t)?delete l[h]:l[h]=t,o?delete u[h]:u[h]=t;if(this.idAttribute in r&&(this.id=this.get(this.idAttribute)),!a){s.length&&(this._pending=i);for(var f=0;f<s.length;f++)this.trigger("change:"+s[f],this,u[s[f]],i)}if(c)return this;if(!a)for(;this._pending;)i=this._pending,this._pending=!1,this.trigger("change",this,i);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var i in this.attributes)t[i]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return null==e?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return!!this.hasChanged()&&n.clone(this.changed);var t,i=this._changing?this._previousAttributes:this.attributes,r={};for(var o in e){var a=e[o];n.isEqual(i[o],a)||(r[o]=a,t=!0)}return!!t&&r},previous:function(e){return null!=e&&this._previousAttributes?this._previousAttributes[e]:null},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=n.extend({parse:!0},e);var t=this,i=e.success;return e.success=function(n){var r=e.parse?t.parse(n,e):n;if(!t.set(r,e))return!1;i&&i.call(e.context,t,n,e),t.trigger("sync",t,n,e)},q(this,e),this.sync("read",this,e)},save:function(e,t,i){var r;null==e||"object"==typeof e?(r=e,i=t):(r={})[e]=t;var o=(i=n.extend({validate:!0,parse:!0},i)).wait;if(r&&!o){if(!this.set(r,i))return!1}else if(!this._validate(r,i))return!1;var a=this,s=i.success,c=this.attributes;i.success=function(e){a.attributes=c;var t=i.parse?a.parse(e,i):e;if(o&&(t=n.extend({},r,t)),t&&!a.set(t,i))return!1;s&&s.call(i.context,a,e,i),a.trigger("sync",a,e,i)},q(this,i),r&&o&&(this.attributes=n.extend({},c,r));var u=this.isNew()?"create":i.patch?"patch":"update";"patch"!==u||i.attrs||(i.attrs=r);var l=this.sync(u,this,i);return this.attributes=c,l},destroy:function(e){e=e?n.clone(e):{};var t=this,i=e.success,r=e.wait,o=function(){t.stopListening(),t.trigger("destroy",t,t.collection,e)};e.success=function(n){r&&o(),i&&i.call(e.context,t,n,e),t.isNew()||t.trigger("sync",t,n,e)};var a=!1;return this.isNew()?n.defer(e.success):(q(this,e),a=this.sync("delete",this,e)),r||o(),a},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||U();if(this.isNew())return e;var t=this.get(this.idAttribute);return e.replace(/[^\/]$/,"$&/")+encodeURIComponent(t)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend({},e,{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var i=this.validationError=this.validate(e,t)||null;return!i||(this.trigger("invalid",this,i,n.extend(t,{validationError:i})),!1)}});var y=t.Collection=function(e,t){t||(t={}),this.preinitialize.apply(this,arguments),t.model&&(this.model=t.model),void 0!==t.comparator&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},b={add:!0,remove:!0,merge:!0},x={add:!0,remove:!1},w=function(e,t,n){n=Math.min(Math.max(n,0),e.length);var i,r=Array(e.length-n),o=t.length;for(i=0;i<r.length;i++)r[i]=e[i+n];for(i=0;i<o;i++)e[i+n]=t[i];for(i=0;i<r.length;i++)e[i+o+n]=r[i]};n.extend(y.prototype,s,{model:g,preinitialize:function(){},initialize:function(){},toJSON:function(e){return this.map((function(t){return t.toJSON(e)}))},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,x))},remove:function(e,t){t=n.extend({},t);var i=!n.isArray(e);e=i?[e]:e.slice();var r=this._removeModels(e,t);return!t.silent&&r.length&&(t.changes={added:[],merged:[],removed:r},this.trigger("update",this,t)),i?r[0]:r},set:function(e,t){if(null!=e){(t=n.extend({},b,t)).parse&&!this._isModel(e)&&(e=this.parse(e,t)||[]);var i=!n.isArray(e);e=i?[e]:e.slice();var r=t.at;null!=r&&(r=+r),r>this.length&&(r=this.length),r<0&&(r+=this.length+1);var o,a,s=[],c=[],u=[],l=[],d={},h=t.add,f=t.merge,p=t.remove,v=!1,m=this.comparator&&null==r&&!1!==t.sort,g=n.isString(this.comparator)?this.comparator:null;for(a=0;a<e.length;a++){o=e[a];var y=this.get(o);if(y){if(f&&o!==y){var x=this._isModel(o)?o.attributes:o;t.parse&&(x=y.parse(x,t)),y.set(x,t),u.push(y),m&&!v&&(v=y.hasChanged(g))}d[y.cid]||(d[y.cid]=!0,s.push(y)),e[a]=y}else h&&(o=e[a]=this._prepareModel(o,t))&&(c.push(o),this._addReference(o,t),d[o.cid]=!0,s.push(o))}if(p){for(a=0;a<this.length;a++)d[(o=this.models[a]).cid]||l.push(o);l.length&&this._removeModels(l,t)}var N=!1,S=!m&&h&&p;if(s.length&&S?(N=this.length!==s.length||n.some(this.models,(function(e,t){return e!==s[t]})),this.models.length=0,w(this.models,s,0),this.length=this.models.length):c.length&&(m&&(v=!0),w(this.models,c,null==r?this.length:r),this.length=this.models.length),v&&this.sort({silent:!0}),!t.silent){for(a=0;a<c.length;a++)null!=r&&(t.index=r+a),(o=c[a]).trigger("add",o,this,t);(v||N)&&this.trigger("sort",this,t),(c.length||l.length||u.length)&&(t.changes={added:c,removed:l,merged:u},this.trigger("update",this,t))}return i?e[0]:e}},reset:function(e,t){t=t?n.clone(t):{};for(var i=0;i<this.models.length;i++)this._removeReference(this.models[i],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e)},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e)},slice:function(){return o.apply(this.models,arguments)},get:function(e){if(null!=e)return this._byId[e]||this._byId[this.modelId(this._isModel(e)?e.attributes:e)]||e.cid&&this._byId[e.cid]},has:function(e){return null!=this.get(e)},at:function(e){return e<0&&(e+=this.length),this.models[e]},where:function(e,t){return this[t?"find":"filter"](e)},findWhere:function(e){return this.where(e,!0)},sort:function(e){var t=this.comparator;if(!t)throw new Error("Cannot sort a set without a comparator");e||(e={});var i=t.length;return n.isFunction(t)&&(t=t.bind(this)),1===i||n.isString(t)?this.models=this.sortBy(t):this.models.sort(t),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return this.map(e+"")},fetch:function(e){var t=(e=n.extend({parse:!0},e)).success,i=this;return e.success=function(n){var r=e.reset?"reset":"set";i[r](n,e),t&&t.call(e.context,i,n,e),i.trigger("sync",i,n,e)},q(this,e),this.sync("read",this,e)},create:function(e,t){var i=(t=t?n.clone(t):{}).wait;if(!(e=this._prepareModel(e,t)))return!1;i||this.add(e,t);var r=this,o=t.success;return t.success=function(e,t,n){i&&r.add(e,n),o&&o.call(n.context,e,t,n)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(e){return e[this.model.prototype.idAttribute||"id"]},values:function(){return new S(this,T)},keys:function(){return new S(this,C)},entries:function(){return new S(this,_)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(this._isModel(e))return e.collection||(e.collection=this),e;(t=t?n.clone(t):{}).collection=this;var i=new this.model(e,t);return i.validationError?(this.trigger("invalid",this,i.validationError,t),!1):i},_removeModels:function(e,t){for(var n=[],i=0;i<e.length;i++){var r=this.get(e[i]);if(r){var o=this.indexOf(r);this.models.splice(o,1),this.length--,delete this._byId[r.cid];var a=this.modelId(r.attributes);null!=a&&delete this._byId[a],t.silent||(t.index=o,r.trigger("remove",r,this,t)),n.push(r),this._removeReference(r,t)}}return n},_isModel:function(e){return e instanceof g},_addReference:function(e,t){this._byId[e.cid]=e;var n=this.modelId(e.attributes);null!=n&&(this._byId[n]=e),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){delete this._byId[e.cid];var n=this.modelId(e.attributes);null!=n&&delete this._byId[n],this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,i){if(t){if(("add"===e||"remove"===e)&&n!==this)return;if("destroy"===e&&this.remove(t,i),"change"===e){var r=this.modelId(t.previousAttributes()),o=this.modelId(t.attributes);r!==o&&(null!=r&&delete this._byId[r],null!=o&&(this._byId[o]=t))}}this.trigger.apply(this,arguments)}});var N="function"==typeof Symbol&&Symbol.iterator;N&&(y.prototype[N]=y.prototype.values);var S=function(e,t){this._collection=e,this._kind=t,this._index=0},T=1,C=2,_=3;N&&(S.prototype[N]=function(){return this}),S.prototype.next=function(){if(this._collection){if(this._index<this._collection.length){var e,t=this._collection.at(this._index);if(this._index++,this._kind===T)e=t;else{var n=this._collection.modelId(t.attributes);e=this._kind===C?n:[n,t]}return{value:e,done:!1}}this._collection=void 0}return{value:void 0,done:!0}};var O=t.View=function(e){this.cid=n.uniqueId("view"),this.preinitialize.apply(this,arguments),n.extend(this,n.pick(e,E)),this._ensureElement(),this.initialize.apply(this,arguments)},M=/^(\S+)\s*(.*)$/,E=["model","collection","el","id","attributes","className","tagName","events"];n.extend(O.prototype,s,{tagName:"div",$:function(e){return this.$el.find(e)},preinitialize:function(){},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(e){return this.undelegateEvents(),this._setElement(e),this.delegateEvents(),this},_setElement:function(e){this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0]},delegateEvents:function(e){if(e||(e=n.result(this,"events")),!e)return this;for(var t in this.undelegateEvents(),e){var i=e[t];if(n.isFunction(i)||(i=this[i]),i){var r=t.match(M);this.delegate(r[1],r[2],i.bind(this))}}return this},delegate:function(e,t,n){return this.$el.on(e+".delegateEvents"+this.cid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(e,t,n){return this.$el.off(e+".delegateEvents"+this.cid,t,n),this},_createElement:function(e){return document.createElement(e)},_ensureElement:function(){if(this.el)this.setElement(n.result(this,"el"));else{var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e.class=n.result(this,"className")),this.setElement(this._createElement(n.result(this,"tagName"))),this._setAttributes(e)}},_setAttributes:function(e){this.$el.attr(e)}});var A=function(e,t,i,r){n.each(i,(function(n,i){t[i]&&(e.prototype[i]=function(e,t,n,i){switch(t){case 1:return function(){return e[n](this[i])};case 2:return function(t){return e[n](this[i],t)};case 3:return function(t,r){return e[n](this[i],L(t,this),r)};case 4:return function(t,r,o){return e[n](this[i],L(t,this),r,o)};default:return function(){var t=o.call(arguments);return t.unshift(this[i]),e[n].apply(e,t)}}}(t,n,i,r))}))},L=function(e,t){return n.isFunction(e)?e:n.isObject(e)&&!t._isModel(e)?D(e):n.isString(e)?function(t){return t.get(e)}:e},D=function(e){var t=n.matches(e);return function(e){return t(e.attributes)}};n.each([[y,{forEach:3,each:3,map:3,collect:3,reduce:0,foldl:0,inject:0,reduceRight:0,foldr:0,find:3,detect:3,filter:3,select:3,reject:3,every:3,all:3,some:3,any:3,include:3,includes:3,contains:3,invoke:0,max:3,min:3,toArray:1,size:1,first:3,head:3,take:3,initial:3,rest:3,tail:3,drop:3,last:3,without:0,difference:0,indexOf:3,shuffle:1,lastIndexOf:3,isEmpty:1,chain:1,sample:3,partition:3,groupBy:3,countBy:3,sortBy:3,indexBy:3,findIndex:3,findLastIndex:3},"models"],[g,{keys:1,values:1,pairs:1,invert:1,pick:0,omit:0,chain:1,isEmpty:1},"attributes"]],(function(e){var t=e[0],i=e[1],r=e[2];t.mixin=function(e){var i=n.reduce(n.functions(e),(function(e,t){return e[t]=0,e}),{});A(t,e,i,r)},A(t,n,i,r)})),t.sync=function(e,i,r){var o=P[e];n.defaults(r||(r={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var a={type:o,dataType:"json"};if(r.url||(a.url=n.result(i,"url")||U()),null!=r.data||!i||"create"!==e&&"update"!==e&&"patch"!==e||(a.contentType="application/json",a.data=JSON.stringify(r.attrs||i.toJSON(r))),r.emulateJSON&&(a.contentType="application/x-www-form-urlencoded",a.data=a.data?{model:a.data}:{}),r.emulateHTTP&&("PUT"===o||"DELETE"===o||"PATCH"===o)){a.type="POST",r.emulateJSON&&(a.data._method=o);var s=r.beforeSend;r.beforeSend=function(e){if(e.setRequestHeader("X-HTTP-Method-Override",o),s)return s.apply(this,arguments)}}"GET"===a.type||r.emulateJSON||(a.processData=!1);var c=r.error;r.error=function(e,t,n){r.textStatus=t,r.errorThrown=n,c&&c.call(r.context,e,t,n)};var u=r.xhr=t.ajax(n.extend(a,r));return i.trigger("request",i,u,r),u};var P={create:"POST",update:"PUT",patch:"PATCH",delete:"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var R=t.Router=function(e){e||(e={}),this.preinitialize.apply(this,arguments),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},j=/\((.*?)\)/g,k=/(\(\?)?:\w+/g,I=/\*\w+/g,B=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(R.prototype,s,{preinitialize:function(){},initialize:function(){},route:function(e,i,r){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(i)&&(r=i,i=""),r||(r=this[i]);var o=this;return t.history.route(e,(function(n){var a=o._extractParameters(e,n);!1!==o.execute(r,a,i)&&(o.trigger.apply(o,["route:"+i].concat(a)),o.trigger("route",i,a),t.history.trigger("route",o,i,a))})),this},execute:function(e,t,n){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(this.routes){this.routes=n.result(this,"routes");for(var e,t=n.keys(this.routes);null!=(e=t.pop());)this.route(e,this.routes[e])}},_routeToRegExp:function(e){return e=e.replace(B,"\\$&").replace(j,"(?:$1)?").replace(k,(function(e,t){return t?e:"([^/?]+)"})).replace(I,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var i=e.exec(t).slice(1);return n.map(i,(function(e,t){return t===i.length-1?e||null:e?decodeURIComponent(e):null}))}});var F=t.History=function(){this.handlers=[],this.checkUrl=this.checkUrl.bind(this),"undefined"!=typeof window&&(this.location=window.location,this.history=window.history)},z=/^[#\/]|\s+$/g,V=/^\/+|\/+$/g,J=/#.*$/;F.started=!1,n.extend(F.prototype,s,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root&&!this.getSearch()},matchRoot:function(){return this.decodeFragment(this.location.pathname).slice(0,this.root.length-1)+"/"===this.root},decodeFragment:function(e){return decodeURI(e.replace(/%25/g,"%2525"))},getSearch:function(){var e=this.location.href.replace(/#.*/,"").match(/\?.+/);return e?e[0]:""},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getPath:function(){var e=this.decodeFragment(this.location.pathname+this.getSearch()).slice(this.root.length-1);return"/"===e.charAt(0)?e.slice(1):e},getFragment:function(e){return null==e&&(e=this._usePushState||!this._wantsHashChange?this.getPath():this.getHash()),e.replace(z,"")},start:function(e){if(F.started)throw new Error("Backbone.history has already been started");if(F.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=!1!==this.options.hashChange,this._hasHashChange="onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7),this._useHashChange=this._wantsHashChange&&this._hasHashChange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!(!this.history||!this.history.pushState),this._usePushState=this._wantsPushState&&this._hasPushState,this.fragment=this.getFragment(),this.root=("/"+this.root+"/").replace(V,"/"),this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot()){var t=this.root.slice(0,-1)||"/";return this.location.replace(t+"#"+this.getPath()),!0}this._hasPushState&&this.atRoot()&&this.navigate(this.getHash(),{replace:!0})}if(!this._hasHashChange&&this._wantsHashChange&&!this._usePushState){this.iframe=document.createElement("iframe"),this.iframe.src="javascript:0",this.iframe.style.display="none",this.iframe.tabIndex=-1;var i=document.body,r=i.insertBefore(this.iframe,i.firstChild).contentWindow;r.document.open(),r.document.close(),r.location.hash="#"+this.fragment}var o=window.addEventListener||function(e,t){return attachEvent("on"+e,t)};if(this._usePushState?o("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe?o("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),!this.options.silent)return this.loadUrl()},stop:function(){var e=window.removeEventListener||function(e,t){return detachEvent("on"+e,t)};this._usePushState?e("popstate",this.checkUrl,!1):this._useHashChange&&!this.iframe&&e("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),F.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();if(t===this.fragment&&this.iframe&&(t=this.getHash(this.iframe.contentWindow)),t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return!!this.matchRoot()&&(e=this.fragment=this.getFragment(e),n.some(this.handlers,(function(t){if(t.route.test(e))return t.callback(e),!0})))},navigate:function(e,t){if(!F.started)return!1;t&&!0!==t||(t={trigger:!!t}),e=this.getFragment(e||"");var n=this.root;""!==e&&"?"!==e.charAt(0)||(n=n.slice(0,-1)||"/");var i=n+e;e=e.replace(J,"");var r=this.decodeFragment(e);if(this.fragment!==r){if(this.fragment=r,this._usePushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,i);else{if(!this._wantsHashChange)return this.location.assign(i);if(this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getHash(this.iframe.contentWindow)){var o=this.iframe.contentWindow;t.replace||(o.document.open(),o.document.close()),this._updateHash(o.location,e,t.replace)}}return t.trigger?this.loadUrl(e):void 0}},_updateHash:function(e,t,n){if(n){var i=e.href.replace(/(javascript:|#).*$/,"");e.replace(i+"#"+t)}else e.hash="#"+t}}),t.history=new F;g.extend=y.extend=R.extend=O.extend=F.extend=function(e,t){var i,r=this;return i=e&&n.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},n.extend(i,r,t),i.prototype=n.create(r.prototype,e),i.prototype.constructor=i,i.__super__=r.prototype,i};var U=function(){throw new Error('A "url" property or function must be specified')},q=function(e,t){var n=t.error;t.error=function(i){n&&n.call(t.context,e,i,t),e.trigger("error",e,i,t)}};return t}(o,n,e,t)}.apply(t,i))||(e.exports=r)},9755:function(e,t){var n;!function(t,n){"use strict";"object"==typeof e.exports?e.exports=t.document?n(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return n(e)}:n(t)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var o=[],a=Object.getPrototypeOf,s=o.slice,c=o.flat?function(e){return o.flat.call(e)}:function(e){return o.concat.apply([],e)},u=o.push,l=o.indexOf,d={},h=d.toString,f=d.hasOwnProperty,p=f.toString,v=p.call(Object),m={},g=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},y=function(e){return null!=e&&e===e.window},b=i.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function w(e,t,n){var i,r,o=(n=n||b).createElement("script");if(o.text=e,t)for(i in x)(r=t[i]||t.getAttribute&&t.getAttribute(i))&&o.setAttribute(i,r);n.head.appendChild(o).parentNode.removeChild(o)}function N(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[h.call(e)]||"object":typeof e}var S="3.5.1",T=function(e,t){return new T.fn.init(e,t)};function C(e){var t=!!e&&"length"in e&&e.length,n=N(e);return!g(e)&&!y(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}T.fn=T.prototype={jquery:S,constructor:T,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=T.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return T.each(this,e)},map:function(e){return this.pushStack(T.map(this,(function(t,n){return e.call(t,n,t)})))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(T.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(T.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:o.sort,splice:o.splice},T.extend=T.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,c=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||g(a)||(a={}),s===c&&(a=this,s--);s<c;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&a!==i&&(u&&i&&(T.isPlainObject(i)||(r=Array.isArray(i)))?(n=a[t],o=r&&!Array.isArray(n)?[]:r||T.isPlainObject(n)?n:{},r=!1,a[t]=T.extend(u,o,i)):void 0!==i&&(a[t]=i));return a},T.extend({expando:"jQuery"+(S+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==h.call(e)||(t=a(e))&&("function"!=typeof(n=f.call(t,"constructor")&&t.constructor)||p.call(n)!==v))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){w(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,i=0;if(C(e))for(n=e.length;i<n&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(C(Object(e))?T.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:l.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;i<n;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i=[],r=0,o=e.length,a=!n;r<o;r++)!t(e[r],r)!==a&&i.push(e[r]);return i},map:function(e,t,n){var i,r,o=0,a=[];if(C(e))for(i=e.length;o<i;o++)null!=(r=t(e[o],o,n))&&a.push(r);else for(o in e)null!=(r=t(e[o],o,n))&&a.push(r);return c(a)},guid:1,support:m}),"function"==typeof Symbol&&(T.fn[Symbol.iterator]=o[Symbol.iterator]),T.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){d["[object "+t+"]"]=t.toLowerCase()}));var _=function(e){var t,n,i,r,o,a,s,c,u,l,d,h,f,p,v,m,g,y,b,x="sizzle"+1*new Date,w=e.document,N=0,S=0,T=ce(),C=ce(),_=ce(),O=ce(),M=function(e,t){return e===t&&(d=!0),0},E={}.hasOwnProperty,A=[],L=A.pop,D=A.push,P=A.push,R=A.slice,j=function(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return n;return-1},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",I="[\\x20\\t\\r\\n\\f]",B="(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\[[\\x20\\t\\r\\n\\f]*("+B+")(?:"+I+"*([*^$|!~]?=)"+I+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+I+"*\\]",z=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",V=new RegExp(I+"+","g"),J=new RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),U=new RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),q=new RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),H=new RegExp(I+"|>"),G=new RegExp(z),W=new RegExp("^"+B+"$"),$={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+z),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},X=/HTML$/i,Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},ie=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,re=function(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){h()},ae=xe((function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()}),{dir:"parentNode",next:"legend"});try{P.apply(A=R.call(w.childNodes),w.childNodes),A[w.childNodes.length].nodeType}catch(e){P={apply:A.length?function(e,t){D.apply(e,R.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}function se(e,t,i,r){var o,s,u,l,d,p,g,y=t&&t.ownerDocument,w=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==w&&9!==w&&11!==w)return i;if(!r&&(h(t),t=t||f,v)){if(11!==w&&(d=Q.exec(e)))if(o=d[1]){if(9===w){if(!(u=t.getElementById(o)))return i;if(u.id===o)return i.push(u),i}else if(y&&(u=y.getElementById(o))&&b(t,u)&&u.id===o)return i.push(u),i}else{if(d[2])return P.apply(i,t.getElementsByTagName(e)),i;if((o=d[3])&&n.getElementsByClassName&&t.getElementsByClassName)return P.apply(i,t.getElementsByClassName(o)),i}if(n.qsa&&!O[e+" "]&&(!m||!m.test(e))&&(1!==w||"object"!==t.nodeName.toLowerCase())){if(g=e,y=t,1===w&&(H.test(e)||q.test(e))){for((y=ee.test(e)&&ge(t.parentNode)||t)===t&&n.scope||((l=t.getAttribute("id"))?l=l.replace(ie,re):t.setAttribute("id",l=x)),s=(p=a(e)).length;s--;)p[s]=(l?"#"+l:":scope")+" "+be(p[s]);g=p.join(",")}try{return P.apply(i,y.querySelectorAll(g)),i}catch(t){O(e,!0)}finally{l===x&&t.removeAttribute("id")}}}return c(e.replace(J,"$1"),t,i,r)}function ce(){var e=[];return function t(n,r){return e.push(n+" ")>i.cacheLength&&delete t[e.shift()],t[n+" "]=r}}function ue(e){return e[x]=!0,e}function le(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function de(e,t){for(var n=e.split("|"),r=n.length;r--;)i.attrHandle[n[r]]=t}function he(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function fe(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function pe(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function ve(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&ae(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function me(e){return ue((function(t){return t=+t,ue((function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))}))}))}function ge(e){return e&&void 0!==e.getElementsByTagName&&e}for(t in n=se.support={},o=se.isXML=function(e){var t=e.namespaceURI,n=(e.ownerDocument||e).documentElement;return!X.test(t||n&&n.nodeName||"HTML")},h=se.setDocument=function(e){var t,r,a=e?e.ownerDocument||e:w;return a!=f&&9===a.nodeType&&a.documentElement?(p=(f=a).documentElement,v=!o(f),w!=f&&(r=f.defaultView)&&r.top!==r&&(r.addEventListener?r.addEventListener("unload",oe,!1):r.attachEvent&&r.attachEvent("onunload",oe)),n.scope=le((function(e){return p.appendChild(e).appendChild(f.createElement("div")),void 0!==e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length})),n.attributes=le((function(e){return e.className="i",!e.getAttribute("className")})),n.getElementsByTagName=le((function(e){return e.appendChild(f.createComment("")),!e.getElementsByTagName("*").length})),n.getElementsByClassName=K.test(f.getElementsByClassName),n.getById=le((function(e){return p.appendChild(e).id=x,!f.getElementsByName||!f.getElementsByName(x).length})),n.getById?(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n=t.getElementById(e);return n?[n]:[]}}):(i.filter.ID=function(e){var t=e.replace(te,ne);return function(e){var n=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&v){var n,i,r,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];for(r=t.getElementsByName(e),i=0;o=r[i++];)if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),i.find.TAG=n.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):n.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},i.find.CLASS=n.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&v)return t.getElementsByClassName(e)},g=[],m=[],(n.qsa=K.test(f.querySelectorAll))&&(le((function(e){var t;p.appendChild(e).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|"+k+")"),e.querySelectorAll("[id~="+x+"-]").length||m.push("~="),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||m.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+x+"+*").length||m.push(".#.+[+~]"),e.querySelectorAll("\\\f"),m.push("[\\r\\n\\f]")})),le((function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=f.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&m.push(":enabled",":disabled"),p.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")}))),(n.matchesSelector=K.test(y=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&le((function(e){n.disconnectedMatch=y.call(e,"*"),y.call(e,"[s!='']:x"),g.push("!=",z)})),m=m.length&&new RegExp(m.join("|")),g=g.length&&new RegExp(g.join("|")),t=K.test(p.compareDocumentPosition),b=t||K.test(p.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},M=t?function(e,t){if(e===t)return d=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!n.sortDetached&&t.compareDocumentPosition(e)===i?e==f||e.ownerDocument==w&&b(w,e)?-1:t==f||t.ownerDocument==w&&b(w,t)?1:l?j(l,e)-j(l,t):0:4&i?-1:1)}:function(e,t){if(e===t)return d=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!r||!o)return e==f?-1:t==f?1:r?-1:o?1:l?j(l,e)-j(l,t):0;if(r===o)return he(e,t);for(n=e;n=n.parentNode;)a.unshift(n);for(n=t;n=n.parentNode;)s.unshift(n);for(;a[i]===s[i];)i++;return i?he(a[i],s[i]):a[i]==w?-1:s[i]==w?1:0},f):f},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(h(e),n.matchesSelector&&v&&!O[t+" "]&&(!g||!g.test(t))&&(!m||!m.test(t)))try{var i=y.call(e,t);if(i||n.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){O(t,!0)}return se(t,f,null,[e]).length>0},se.contains=function(e,t){return(e.ownerDocument||e)!=f&&h(e),b(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=f&&h(e);var r=i.attrHandle[t.toLowerCase()],o=r&&E.call(i.attrHandle,t.toLowerCase())?r(e,t,!v):void 0;return void 0!==o?o:n.attributes||!v?e.getAttribute(t):(o=e.getAttributeNode(t))&&o.specified?o.value:null},se.escape=function(e){return(e+"").replace(ie,re)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,i=[],r=0,o=0;if(d=!n.detectDuplicates,l=!n.sortStable&&e.slice(0),e.sort(M),d){for(;t=e[o++];)t===e[o]&&(r=i.push(o));for(;r--;)e.splice(i[r],1)}return l=null,e},r=se.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=r(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=r(t);return n},(i=se.selectors={cacheLength:50,createPseudo:ue,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return $.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&G.test(n)&&(t=a(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=T[e+" "];return t||(t=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+e+"("+I+"|$)"))&&T(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,n){return function(i){var r=se.attr(i,e);return null==r?"!="===t:!t||(r+="","="===t?r===n:"!="===t?r!==n:"^="===t?n&&0===r.indexOf(n):"*="===t?n&&r.indexOf(n)>-1:"$="===t?n&&r.slice(-n.length)===n:"~="===t?(" "+r.replace(V," ")+" ").indexOf(n)>-1:"|="===t&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,c){var u,l,d,h,f,p,v=o!==a?"nextSibling":"previousSibling",m=t.parentNode,g=s&&t.nodeName.toLowerCase(),y=!c&&!s,b=!1;if(m){if(o){for(;v;){for(h=t;h=h[v];)if(s?h.nodeName.toLowerCase()===g:1===h.nodeType)return!1;p=v="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?m.firstChild:m.lastChild],a&&y){for(b=(f=(u=(l=(d=(h=m)[x]||(h[x]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===N&&u[1])&&u[2],h=f&&m.childNodes[f];h=++f&&h&&h[v]||(b=f=0)||p.pop();)if(1===h.nodeType&&++b&&h===t){l[e]=[N,f,b];break}}else if(y&&(b=f=(u=(l=(d=(h=t)[x]||(h[x]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]||[])[0]===N&&u[1]),!1===b)for(;(h=++f&&h&&h[v]||(b=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==g:1!==h.nodeType)||!++b||(y&&((l=(d=h[x]||(h[x]={}))[h.uniqueID]||(d[h.uniqueID]={}))[e]=[N,b]),h!==t)););return(b-=r)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ue((function(e,n){for(var i,o=r(e,t),a=o.length;a--;)e[i=j(e,o[a])]=!(n[i]=o[a])})):function(e){return r(e,0,n)}):r}},pseudos:{not:ue((function(e){var t=[],n=[],i=s(e.replace(J,"$1"));return i[x]?ue((function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))})):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}})),has:ue((function(e){return function(t){return se(e,t).length>0}})),contains:ue((function(e){return e=e.replace(te,ne),function(t){return(t.textContent||r(t)).indexOf(e)>-1}})),lang:ue((function(e){return W.test(e||"")||se.error("unsupported lang: "+e),e=e.replace(te,ne).toLowerCase(),function(t){var n;do{if(n=v?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===p},focus:function(e){return e===f.activeElement&&(!f.hasFocus||f.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ve(!1),disabled:ve(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Z.test(e.nodeName)},input:function(e){return Y.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:me((function(){return[0]})),last:me((function(e,t){return[t-1]})),eq:me((function(e,t,n){return[n<0?n+t:n]})),even:me((function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e})),odd:me((function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e})),lt:me((function(e,t,n){for(var i=n<0?n+t:n>t?t:n;--i>=0;)e.push(i);return e})),gt:me((function(e,t,n){for(var i=n<0?n+t:n;++i<t;)e.push(i);return e}))}}).pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=fe(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=pe(t);function ye(){}function be(e){for(var t=0,n=e.length,i="";t<n;t++)i+=e[t].value;return i}function xe(e,t,n){var i=t.dir,r=t.next,o=r||i,a=n&&"parentNode"===o,s=S++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||a)return e(t,n,r);return!1}:function(t,n,c){var u,l,d,h=[N,s];if(c){for(;t=t[i];)if((1===t.nodeType||a)&&e(t,n,c))return!0}else for(;t=t[i];)if(1===t.nodeType||a)if(l=(d=t[x]||(t[x]={}))[t.uniqueID]||(d[t.uniqueID]={}),r&&r===t.nodeName.toLowerCase())t=t[i]||t;else{if((u=l[o])&&u[0]===N&&u[1]===s)return h[2]=u[2];if(l[o]=h,h[2]=e(t,n,c))return!0}return!1}}function we(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function Ne(e,t,n,i,r){for(var o,a=[],s=0,c=e.length,u=null!=t;s<c;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function Se(e,t,n,i,r,o){return i&&!i[x]&&(i=Se(i)),r&&!r[x]&&(r=Se(r,o)),ue((function(o,a,s,c){var u,l,d,h=[],f=[],p=a.length,v=o||function(e,t,n){for(var i=0,r=t.length;i<r;i++)se(e,t[i],n);return n}(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?v:Ne(v,h,e,s,c),g=n?r||(o?e:p||i)?[]:a:m;if(n&&n(m,g,s,c),i)for(u=Ne(g,f),i(u,[],s,c),l=u.length;l--;)(d=u[l])&&(g[f[l]]=!(m[f[l]]=d));if(o){if(r||e){if(r){for(u=[],l=g.length;l--;)(d=g[l])&&u.push(m[l]=d);r(null,g=[],u,c)}for(l=g.length;l--;)(d=g[l])&&(u=r?j(o,d):h[l])>-1&&(o[u]=!(a[u]=d))}}else g=Ne(g===a?g.splice(p,g.length):g),r?r(null,a,g,c):P.apply(a,g)}))}function Te(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],c=a?1:0,l=xe((function(e){return e===t}),s,!0),d=xe((function(e){return j(t,e)>-1}),s,!0),h=[function(e,n,i){var r=!a&&(i||n!==u)||((t=n).nodeType?l(e,n,i):d(e,n,i));return t=null,r}];c<o;c++)if(n=i.relative[e[c].type])h=[xe(we(h),n)];else{if((n=i.filter[e[c].type].apply(null,e[c].matches))[x]){for(r=++c;r<o&&!i.relative[e[r].type];r++);return Se(c>1&&we(h),c>1&&be(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(J,"$1"),n,c<r&&Te(e.slice(c,r)),r<o&&Te(e=e.slice(r)),r<o&&be(e))}h.push(n)}return we(h)}return ye.prototype=i.filters=i.pseudos,i.setFilters=new ye,a=se.tokenize=function(e,t){var n,r,o,a,s,c,u,l=C[e+" "];if(l)return t?0:l.slice(0);for(s=e,c=[],u=i.preFilter;s;){for(a in n&&!(r=U.exec(s))||(r&&(s=s.slice(r[0].length)||s),c.push(o=[])),n=!1,(r=q.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(J," ")}),s=s.slice(n.length)),i.filter)!(r=$[a].exec(s))||u[a]&&!(r=u[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?se.error(e):C(e,c).slice(0)},s=se.compile=function(e,t){var n,r=[],o=[],s=_[e+" "];if(!s){for(t||(t=a(e)),n=t.length;n--;)(s=Te(t[n]))[x]?r.push(s):o.push(s);(s=_(e,function(e,t){var n=t.length>0,r=e.length>0,o=function(o,a,s,c,l){var d,p,m,g=0,y="0",b=o&&[],x=[],w=u,S=o||r&&i.find.TAG("*",l),T=N+=null==w?1:Math.random()||.1,C=S.length;for(l&&(u=a==f||a||l);y!==C&&null!=(d=S[y]);y++){if(r&&d){for(p=0,a||d.ownerDocument==f||(h(d),s=!v);m=e[p++];)if(m(d,a||f,s)){c.push(d);break}l&&(N=T)}n&&((d=!m&&d)&&g--,o&&b.push(d))}if(g+=y,n&&y!==g){for(p=0;m=t[p++];)m(b,x,a,s);if(o){if(g>0)for(;y--;)b[y]||x[y]||(x[y]=L.call(c));x=Ne(x)}P.apply(c,x),l&&!o&&x.length>0&&g+t.length>1&&se.uniqueSort(c)}return l&&(N=T,u=w),b};return n?ue(o):o}(o,r))).selector=e}return s},c=se.select=function(e,t,n,r){var o,c,u,l,d,h="function"==typeof e&&e,f=!r&&a(e=h.selector||e);if(n=n||[],1===f.length){if((c=f[0]=f[0].slice(0)).length>2&&"ID"===(u=c[0]).type&&9===t.nodeType&&v&&i.relative[c[1].type]){if(!(t=(i.find.ID(u.matches[0].replace(te,ne),t)||[])[0]))return n;h&&(t=t.parentNode),e=e.slice(c.shift().value.length)}for(o=$.needsContext.test(e)?0:c.length;o--&&(u=c[o],!i.relative[l=u.type]);)if((d=i.find[l])&&(r=d(u.matches[0].replace(te,ne),ee.test(c[0].type)&&ge(t.parentNode)||t))){if(c.splice(o,1),!(e=r.length&&be(c)))return P.apply(n,r),n;break}}return(h||s(e,f))(r,t,!v,n,!t||ee.test(e)&&ge(t.parentNode)||t),n},n.sortStable=x.split("").sort(M).join("")===x,n.detectDuplicates=!!d,h(),n.sortDetached=le((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),le((function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")}))||de("type|href|height|width",(function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)})),n.attributes&&le((function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")}))||de("value",(function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue})),le((function(e){return null==e.getAttribute("disabled")}))||de(k,(function(e,t,n){var i;if(!n)return!0===e[t]?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null})),se}(i);T.find=_,T.expr=_.selectors,T.expr[":"]=T.expr.pseudos,T.uniqueSort=T.unique=_.uniqueSort,T.text=_.getText,T.isXMLDoc=_.isXML,T.contains=_.contains,T.escapeSelector=_.escape;var O=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&T(e).is(n))break;i.push(e)}return i},M=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},E=T.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(e,t,n){return g(t)?T.grep(e,(function(e,i){return!!t.call(e,i,e)!==n})):t.nodeType?T.grep(e,(function(e){return e===t!==n})):"string"!=typeof t?T.grep(e,(function(e){return l.call(t,e)>-1!==n})):T.filter(t,e,n)}T.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?T.find.matchesSelector(i,e)?[i]:[]:T.find.matches(e,T.grep(t,(function(e){return 1===e.nodeType})))},T.fn.extend({find:function(e){var t,n,i=this.length,r=this;if("string"!=typeof e)return this.pushStack(T(e).filter((function(){for(t=0;t<i;t++)if(T.contains(r[t],this))return!0})));for(n=this.pushStack([]),t=0;t<i;t++)T.find(e,r[t],n);return i>1?T.uniqueSort(n):n},filter:function(e){return this.pushStack(D(this,e||[],!1))},not:function(e){return this.pushStack(D(this,e||[],!0))},is:function(e){return!!D(this,"string"==typeof e&&E.test(e)?T(e):e||[],!1).length}});var P,R=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(T.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||P,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:R.exec(e))||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof T?t[0]:t,T.merge(this,T.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:b,!0)),L.test(i[1])&&T.isPlainObject(t))for(i in t)g(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(r=b.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):g(e)?void 0!==n.ready?n.ready(e):e(T):T.makeArray(e,this)}).prototype=T.fn,P=T(b);var j=/^(?:parents|prev(?:Until|All))/,k={children:!0,contents:!0,next:!0,prev:!0};function I(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}T.fn.extend({has:function(e){var t=T(e,this),n=t.length;return this.filter((function(){for(var e=0;e<n;e++)if(T.contains(this,t[e]))return!0}))},closest:function(e,t){var n,i=0,r=this.length,o=[],a="string"!=typeof e&&T(e);if(!E.test(e))for(;i<r;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&T.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?T.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?l.call(T(e),this[0]):l.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(T.uniqueSort(T.merge(this.get(),T(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),T.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return O(e,"parentNode")},parentsUntil:function(e,t,n){return O(e,"parentNode",n)},next:function(e){return I(e,"nextSibling")},prev:function(e){return I(e,"previousSibling")},nextAll:function(e){return O(e,"nextSibling")},prevAll:function(e){return O(e,"previousSibling")},nextUntil:function(e,t,n){return O(e,"nextSibling",n)},prevUntil:function(e,t,n){return O(e,"previousSibling",n)},siblings:function(e){return M((e.parentNode||{}).firstChild,e)},children:function(e){return M(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),T.merge([],e.childNodes))}},(function(e,t){T.fn[e]=function(n,i){var r=T.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=T.filter(i,r)),this.length>1&&(k[e]||T.uniqueSort(r),j.test(e)&&r.reverse()),this.pushStack(r)}}));var B=/[^\x20\t\r\n\f]+/g;function F(e){return e}function z(e){throw e}function V(e,t,n,i){var r;try{e&&g(r=e.promise)?r.call(e).done(t).fail(n):e&&g(r=e.then)?r.call(e,t,n):t.apply(void 0,[e].slice(i))}catch(e){n.apply(void 0,[e])}}T.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return T.each(e.match(B)||[],(function(e,n){t[n]=!0})),t}(e):T.extend({},e);var t,n,i,r,o=[],a=[],s=-1,c=function(){for(r=r||e.once,i=t=!0;a.length;s=-1)for(n=a.shift();++s<o.length;)!1===o[s].apply(n[0],n[1])&&e.stopOnFalse&&(s=o.length,n=!1);e.memory||(n=!1),t=!1,r&&(o=n?[]:"")},u={add:function(){return o&&(n&&!t&&(s=o.length-1,a.push(n)),function t(n){T.each(n,(function(n,i){g(i)?e.unique&&u.has(i)||o.push(i):i&&i.length&&"string"!==N(i)&&t(i)}))}(arguments),n&&!t&&c()),this},remove:function(){return T.each(arguments,(function(e,t){for(var n;(n=T.inArray(t,o,n))>-1;)o.splice(n,1),n<=s&&s--})),this},has:function(e){return e?T.inArray(e,o)>-1:o.length>0},empty:function(){return o&&(o=[]),this},disable:function(){return r=a=[],o=n="",this},disabled:function(){return!o},lock:function(){return r=a=[],n||t||(o=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=[e,(n=n||[]).slice?n.slice():n],a.push(n),t||c()),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!i}};return u},T.extend({Deferred:function(e){var t=[["notify","progress",T.Callbacks("memory"),T.Callbacks("memory"),2],["resolve","done",T.Callbacks("once memory"),T.Callbacks("once memory"),0,"resolved"],["reject","fail",T.Callbacks("once memory"),T.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return o.done(arguments).fail(arguments),this},catch:function(e){return r.then(null,e)},pipe:function(){var e=arguments;return T.Deferred((function(n){T.each(t,(function(t,i){var r=g(e[i[4]])&&e[i[4]];o[i[1]]((function(){var e=r&&r.apply(this,arguments);e&&g(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[e]:arguments)}))})),e=null})).promise()},then:function(e,n,r){var o=0;function a(e,t,n,r){return function(){var s=this,c=arguments,u=function(){var i,u;if(!(e<o)){if((i=n.apply(s,c))===t.promise())throw new TypeError("Thenable self-resolution");u=i&&("object"==typeof i||"function"==typeof i)&&i.then,g(u)?r?u.call(i,a(o,t,F,r),a(o,t,z,r)):(o++,u.call(i,a(o,t,F,r),a(o,t,z,r),a(o,t,F,t.notifyWith))):(n!==F&&(s=void 0,c=[i]),(r||t.resolveWith)(s,c))}},l=r?u:function(){try{u()}catch(i){T.Deferred.exceptionHook&&T.Deferred.exceptionHook(i,l.stackTrace),e+1>=o&&(n!==z&&(s=void 0,c=[i]),t.rejectWith(s,c))}};e?l():(T.Deferred.getStackHook&&(l.stackTrace=T.Deferred.getStackHook()),i.setTimeout(l))}}return T.Deferred((function(i){t[0][3].add(a(0,i,g(r)?r:F,i.notifyWith)),t[1][3].add(a(0,i,g(e)?e:F)),t[2][3].add(a(0,i,g(n)?n:z))})).promise()},promise:function(e){return null!=e?T.extend(e,r):r}},o={};return T.each(t,(function(e,i){var a=i[2],s=i[5];r[i[1]]=a.add,s&&a.add((function(){n=s}),t[3-e][2].disable,t[3-e][3].disable,t[0][2].lock,t[0][3].lock),a.add(i[3].fire),o[i[0]]=function(){return o[i[0]+"With"](this===o?void 0:this,arguments),this},o[i[0]+"With"]=a.fireWith})),r.promise(o),e&&e.call(o,o),o},when:function(e){var t=arguments.length,n=t,i=Array(n),r=s.call(arguments),o=T.Deferred(),a=function(e){return function(n){i[e]=this,r[e]=arguments.length>1?s.call(arguments):n,--t||o.resolveWith(i,r)}};if(t<=1&&(V(e,o.done(a(n)).resolve,o.reject,!t),"pending"===o.state()||g(r[n]&&r[n].then)))return o.then();for(;n--;)V(r[n],a(n),o.reject);return o.promise()}});var J=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;T.Deferred.exceptionHook=function(e,t){i.console&&i.console.warn&&e&&J.test(e.name)&&i.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},T.readyException=function(e){i.setTimeout((function(){throw e}))};var U=T.Deferred();function q(){b.removeEventListener("DOMContentLoaded",q),i.removeEventListener("load",q),T.ready()}T.fn.ready=function(e){return U.then(e).catch((function(e){T.readyException(e)})),this},T.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--T.readyWait:T.isReady)||(T.isReady=!0,!0!==e&&--T.readyWait>0||U.resolveWith(b,[T]))}}),T.ready.then=U.then,"complete"===b.readyState||"loading"!==b.readyState&&!b.documentElement.doScroll?i.setTimeout(T.ready):(b.addEventListener("DOMContentLoaded",q),i.addEventListener("load",q));var H=function(e,t,n,i,r,o,a){var s=0,c=e.length,u=null==n;if("object"===N(n))for(s in r=!0,n)H(e,t,s,n[s],!0,o,a);else if(void 0!==i&&(r=!0,g(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(T(e),n)})),t))for(;s<c;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:u?t.call(e):c?t(e[0],n):o},G=/^-ms-/,W=/-([a-z])/g;function $(e,t){return t.toUpperCase()}function X(e){return e.replace(G,"ms-").replace(W,$)}var Y=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function Z(){this.expando=T.expando+Z.uid++}Z.uid=1,Z.prototype={cache:function(e){var t=e[this.expando];return t||(t={},Y(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[X(t)]=n;else for(i in t)r[X(i)]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i=e[this.expando];if(void 0!==i){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in i?[t]:t.match(B)||[]).length;for(;n--;)delete i[t[n]]}(void 0===t||T.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!T.isEmptyObject(t)}};var K=new Z,Q=new Z,ee=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ne(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(te,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(i))){try{n=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:ee.test(e)?JSON.parse(e):e)}(n)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}T.extend({hasData:function(e){return Q.hasData(e)||K.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return K.access(e,t,n)},_removeData:function(e,t){K.remove(e,t)}}),T.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=Q.get(o),1===o.nodeType&&!K.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(i=a[n].name).indexOf("data-")&&(i=X(i.slice(5)),ne(o,i,r[i]));K.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each((function(){Q.set(this,e)})):H(this,(function(t){var n;if(o&&void 0===t)return void 0!==(n=Q.get(o,e))||void 0!==(n=ne(o,e))?n:void 0;this.each((function(){Q.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){Q.remove(this,e)}))}}),T.extend({queue:function(e,t,n){var i;if(e)return t=(t||"fx")+"queue",i=K.get(e,t),n&&(!i||Array.isArray(n)?i=K.access(e,t,T.makeArray(n)):i.push(n)),i||[]},dequeue:function(e,t){t=t||"fx";var n=T.queue(e,t),i=n.length,r=n.shift(),o=T._queueHooks(e,t);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,(function(){T.dequeue(e,t)}),o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return K.get(e,n)||K.access(e,n,{empty:T.Callbacks("once memory").add((function(){K.remove(e,[t+"queue",n])}))})}}),T.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?T.queue(this[0],e):void 0===t?this:this.each((function(){var n=T.queue(this,e,t);T._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&T.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){T.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=T.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=K.get(o[a],e+"queueHooks"))&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var ie=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,re=new RegExp("^(?:([+-])=|)("+ie+")([a-z%]*)$","i"),oe=["Top","Right","Bottom","Left"],ae=b.documentElement,se=function(e){return T.contains(e.ownerDocument,e)},ce={composed:!0};ae.getRootNode&&(se=function(e){return T.contains(e.ownerDocument,e)||e.getRootNode(ce)===e.ownerDocument});var ue=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&se(e)&&"none"===T.css(e,"display")};function le(e,t,n,i){var r,o,a=20,s=i?function(){return i.cur()}:function(){return T.css(e,t,"")},c=s(),u=n&&n[3]||(T.cssNumber[t]?"":"px"),l=e.nodeType&&(T.cssNumber[t]||"px"!==u&&+c)&&re.exec(T.css(e,t));if(l&&l[3]!==u){for(c/=2,u=u||l[3],l=+c||1;a--;)T.style(e,t,l+u),(1-o)*(1-(o=s()/c||.5))<=0&&(a=0),l/=o;l*=2,T.style(e,t,l+u),n=n||[]}return n&&(l=+l||+c||0,r=n[1]?l+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=l,i.end=r)),r}var de={};function he(e){var t,n=e.ownerDocument,i=e.nodeName,r=de[i];return r||(t=n.body.appendChild(n.createElement(i)),r=T.css(t,"display"),t.parentNode.removeChild(t),"none"===r&&(r="block"),de[i]=r,r)}function fe(e,t){for(var n,i,r=[],o=0,a=e.length;o<a;o++)(i=e[o]).style&&(n=i.style.display,t?("none"===n&&(r[o]=K.get(i,"display")||null,r[o]||(i.style.display="")),""===i.style.display&&ue(i)&&(r[o]=he(i))):"none"!==n&&(r[o]="none",K.set(i,"display",n)));for(o=0;o<a;o++)null!=r[o]&&(e[o].style.display=r[o]);return e}T.fn.extend({show:function(){return fe(this,!0)},hide:function(){return fe(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){ue(this)?T(this).show():T(this).hide()}))}});var pe,ve,me=/^(?:checkbox|radio)$/i,ge=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,ye=/^$|^module$|\/(?:java|ecma)script/i;pe=b.createDocumentFragment().appendChild(b.createElement("div")),(ve=b.createElement("input")).setAttribute("type","radio"),ve.setAttribute("checked","checked"),ve.setAttribute("name","t"),pe.appendChild(ve),m.checkClone=pe.cloneNode(!0).cloneNode(!0).lastChild.checked,pe.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!pe.cloneNode(!0).lastChild.defaultValue,pe.innerHTML="<option></option>",m.option=!!pe.lastChild;var be={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function xe(e,t){var n;return n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?T.merge([e],n):n}function we(e,t){for(var n=0,i=e.length;n<i;n++)K.set(e[n],"globalEval",!t||K.get(t[n],"globalEval"))}be.tbody=be.tfoot=be.colgroup=be.caption=be.thead,be.th=be.td,m.option||(be.optgroup=be.option=[1,"<select multiple='multiple'>","</select>"]);var Ne=/<|&#?\w+;/;function Se(e,t,n,i,r){for(var o,a,s,c,u,l,d=t.createDocumentFragment(),h=[],f=0,p=e.length;f<p;f++)if((o=e[f])||0===o)if("object"===N(o))T.merge(h,o.nodeType?[o]:o);else if(Ne.test(o)){for(a=a||d.appendChild(t.createElement("div")),s=(ge.exec(o)||["",""])[1].toLowerCase(),c=be[s]||be._default,a.innerHTML=c[1]+T.htmlPrefilter(o)+c[2],l=c[0];l--;)a=a.lastChild;T.merge(h,a.childNodes),(a=d.firstChild).textContent=""}else h.push(t.createTextNode(o));for(d.textContent="",f=0;o=h[f++];)if(i&&T.inArray(o,i)>-1)r&&r.push(o);else if(u=se(o),a=xe(d.appendChild(o),"script"),u&&we(a),n)for(l=0;o=a[l++];)ye.test(o.type||"")&&n.push(o);return d}var Te=/^key/,Ce=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,_e=/^([^.]*)(?:\.(.+)|)/;function Oe(){return!0}function Me(){return!1}function Ee(e,t){return e===function(){try{return b.activeElement}catch(e){}}()==("focus"===t)}function Ae(e,t,n,i,r,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(i=i||n,n=void 0),t)Ae(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=Me;else if(!r)return e;return 1===o&&(a=r,(r=function(e){return T().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=T.guid++)),e.each((function(){T.event.add(this,t,r,i,n)}))}function Le(e,t,n){n?(K.set(e,t,!1),T.event.add(e,t,{namespace:!1,handler:function(e){var i,r,o=K.get(this,t);if(1&e.isTrigger&&this[t]){if(o.length)(T.event.special[t]||{}).delegateType&&e.stopPropagation();else if(o=s.call(arguments),K.set(this,t,o),i=n(this,t),this[t](),o!==(r=K.get(this,t))||i?K.set(this,t,!1):r={},o!==r)return e.stopImmediatePropagation(),e.preventDefault(),r.value}else o.length&&(K.set(this,t,{value:T.event.trigger(T.extend(o[0],T.Event.prototype),o.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===K.get(e,t)&&T.event.add(e,t,Oe)}T.event={global:{},add:function(e,t,n,i,r){var o,a,s,c,u,l,d,h,f,p,v,m=K.get(e);if(Y(e))for(n.handler&&(n=(o=n).handler,r=o.selector),r&&T.find.matchesSelector(ae,r),n.guid||(n.guid=T.guid++),(c=m.events)||(c=m.events=Object.create(null)),(a=m.handle)||(a=m.handle=function(t){return void 0!==T&&T.event.triggered!==t.type?T.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(B)||[""]).length;u--;)f=v=(s=_e.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),f&&(d=T.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=T.event.special[f]||{},l=T.extend({type:f,origType:v,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&T.expr.match.needsContext.test(r),namespace:p.join(".")},o),(h=c[f])||((h=c[f]=[]).delegateCount=0,d.setup&&!1!==d.setup.call(e,i,p,a)||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,l),l.handler.guid||(l.handler.guid=n.guid)),r?h.splice(h.delegateCount++,0,l):h.push(l),T.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,c,u,l,d,h,f,p,v,m=K.hasData(e)&&K.get(e);if(m&&(c=m.events)){for(u=(t=(t||"").match(B)||[""]).length;u--;)if(f=v=(s=_e.exec(t[u])||[])[1],p=(s[2]||"").split(".").sort(),f){for(d=T.event.special[f]||{},h=c[f=(i?d.delegateType:d.bindType)||f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=h.length;o--;)l=h[o],!r&&v!==l.origType||n&&n.guid!==l.guid||s&&!s.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(h.splice(o,1),l.selector&&h.delegateCount--,d.remove&&d.remove.call(e,l));a&&!h.length&&(d.teardown&&!1!==d.teardown.call(e,p,m.handle)||T.removeEvent(e,f,m.handle),delete c[f])}else for(f in c)T.event.remove(e,f+t[u],n,i,!0);T.isEmptyObject(c)&&K.remove(e,"handle events")}},dispatch:function(e){var t,n,i,r,o,a,s=new Array(arguments.length),c=T.event.fix(e),u=(K.get(this,"events")||Object.create(null))[c.type]||[],l=T.event.special[c.type]||{};for(s[0]=c,t=1;t<arguments.length;t++)s[t]=arguments[t];if(c.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,c)){for(a=T.event.handlers.call(this,c,u),t=0;(r=a[t++])&&!c.isPropagationStopped();)for(c.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!c.isImmediatePropagationStopped();)c.rnamespace&&!1!==o.namespace&&!c.rnamespace.test(o.namespace)||(c.handleObj=o,c.data=o.data,void 0!==(i=((T.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s))&&!1===(c.result=i)&&(c.preventDefault(),c.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,c),c.result}},handlers:function(e,t){var n,i,r,o,a,s=[],c=t.delegateCount,u=e.target;if(c&&u.nodeType&&!("click"===e.type&&e.button>=1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&("click"!==e.type||!0!==u.disabled)){for(o=[],a={},n=0;n<c;n++)void 0===a[r=(i=t[n]).selector+" "]&&(a[r]=i.needsContext?T(r,this).index(u)>-1:T.find(r,this,null,[u]).length),a[r]&&o.push(i);o.length&&s.push({elem:u,handlers:o})}return u=this,c<t.length&&s.push({elem:u,handlers:t.slice(c)}),s},addProp:function(e,t){Object.defineProperty(T.Event.prototype,e,{enumerable:!0,configurable:!0,get:g(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[T.expando]?e:new T.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return me.test(t.type)&&t.click&&A(t,"input")&&Le(t,"click",Oe),!1},trigger:function(e){var t=this||e;return me.test(t.type)&&t.click&&A(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return me.test(t.type)&&t.click&&A(t,"input")&&K.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},T.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},T.Event=function(e,t){if(!(this instanceof T.Event))return new T.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?Oe:Me,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&T.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[T.expando]=!0},T.Event.prototype={constructor:T.Event,isDefaultPrevented:Me,isPropagationStopped:Me,isImmediatePropagationStopped:Me,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=Oe,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=Oe,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=Oe,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},T.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(e){var t=e.button;return null==e.which&&Te.test(e.type)?null!=e.charCode?e.charCode:e.keyCode:!e.which&&void 0!==t&&Ce.test(e.type)?1&t?1:2&t?3:4&t?2:0:e.which}},T.event.addProp),T.each({focus:"focusin",blur:"focusout"},(function(e,t){T.event.special[e]={setup:function(){return Le(this,e,Ee),!1},trigger:function(){return Le(this,e),!0},delegateType:t}})),T.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){T.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||T.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}})),T.fn.extend({on:function(e,t,n,i){return Ae(this,e,t,n,i)},one:function(e,t,n,i){return Ae(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,T(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Me),this.each((function(){T.event.remove(this,e,n,t)}))}});var De=/<script|<style|<link/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&T(e).children("tbody")[0]||e}function ke(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ie(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Be(e,t){var n,i,r,o,a,s;if(1===t.nodeType){if(K.hasData(e)&&(s=K.get(e).events))for(r in K.remove(t,"handle events"),s)for(n=0,i=s[r].length;n<i;n++)T.event.add(t,r,s[r][n]);Q.hasData(e)&&(o=Q.access(e),a=T.extend({},o),Q.set(t,a))}}function Fe(e,t){var n=t.nodeName.toLowerCase();"input"===n&&me.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function ze(e,t,n,i){t=c(t);var r,o,a,s,u,l,d=0,h=e.length,f=h-1,p=t[0],v=g(p);if(v||h>1&&"string"==typeof p&&!m.checkClone&&Pe.test(p))return e.each((function(r){var o=e.eq(r);v&&(t[0]=p.call(this,r,o.html())),ze(o,t,n,i)}));if(h&&(o=(r=Se(t,e[0].ownerDocument,!1,e,i)).firstChild,1===r.childNodes.length&&(r=o),o||i)){for(s=(a=T.map(xe(r,"script"),ke)).length;d<h;d++)u=r,d!==f&&(u=T.clone(u,!0,!0),s&&T.merge(a,xe(u,"script"))),n.call(e[d],u,d);if(s)for(l=a[a.length-1].ownerDocument,T.map(a,Ie),d=0;d<s;d++)u=a[d],ye.test(u.type||"")&&!K.access(u,"globalEval")&&T.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?T._evalUrl&&!u.noModule&&T._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):w(u.textContent.replace(Re,""),u,l))}return e}function Ve(e,t,n){for(var i,r=t?T.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||T.cleanData(xe(i)),i.parentNode&&(n&&se(i)&&we(xe(i,"script")),i.parentNode.removeChild(i));return e}T.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),c=se(e);if(!(m.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||T.isXMLDoc(e)))for(a=xe(s),i=0,r=(o=xe(e)).length;i<r;i++)Fe(o[i],a[i]);if(t)if(n)for(o=o||xe(e),a=a||xe(s),i=0,r=o.length;i<r;i++)Be(o[i],a[i]);else Be(e,s);return(a=xe(s,"script")).length>0&&we(a,!c&&xe(e,"script")),s},cleanData:function(e){for(var t,n,i,r=T.event.special,o=0;void 0!==(n=e[o]);o++)if(Y(n)){if(t=n[K.expando]){if(t.events)for(i in t.events)r[i]?T.event.remove(n,i):T.removeEvent(n,i,t.handle);n[K.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),T.fn.extend({detach:function(e){return Ve(this,e,!0)},remove:function(e){return Ve(this,e)},text:function(e){return H(this,(function(e){return void 0===e?T.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return ze(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)}))},prepend:function(){return ze(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return ze(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return ze(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(T.cleanData(xe(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return T.clone(this,e,t)}))},html:function(e){return H(this,(function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!De.test(e)&&!be[(ge.exec(e)||["",""])[1].toLowerCase()]){e=T.htmlPrefilter(e);try{for(;n<i;n++)1===(t=this[n]||{}).nodeType&&(T.cleanData(xe(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return ze(this,arguments,(function(t){var n=this.parentNode;T.inArray(this,e)<0&&(T.cleanData(xe(this)),n&&n.replaceChild(t,this))}),e)}}),T.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){T.fn[e]=function(e){for(var n,i=[],r=T(e),o=r.length-1,a=0;a<=o;a++)n=a===o?this:this.clone(!0),T(r[a])[t](n),u.apply(i,n.get());return this.pushStack(i)}}));var Je=new RegExp("^("+ie+")(?!px)[a-z%]+$","i"),Ue=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=i),t.getComputedStyle(e)},qe=function(e,t,n){var i,r,o={};for(r in t)o[r]=e.style[r],e.style[r]=t[r];for(r in i=n.call(e),t)e.style[r]=o[r];return i},He=new RegExp(oe.join("|"),"i");function Ge(e,t,n){var i,r,o,a,s=e.style;return(n=n||Ue(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||se(e)||(a=T.style(e,t)),!m.pixelBoxStyles()&&Je.test(a)&&He.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function We(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ae.appendChild(u).appendChild(l);var e=i.getComputedStyle(l);n="1%"!==e.top,c=12===t(e.marginLeft),l.style.right="60%",a=36===t(e.right),r=36===t(e.width),l.style.position="absolute",o=12===t(l.offsetWidth/3),ae.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,o,a,s,c,u=b.createElement("div"),l=b.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===l.style.backgroundClip,T.extend(m,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),a},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),c},scrollboxSize:function(){return e(),o},reliableTrDimensions:function(){var e,t,n,r;return null==s&&(e=b.createElement("table"),t=b.createElement("tr"),n=b.createElement("div"),e.style.cssText="position:absolute;left:-11111px",t.style.height="1px",n.style.height="9px",ae.appendChild(e).appendChild(t).appendChild(n),r=i.getComputedStyle(t),s=parseInt(r.height)>3,ae.removeChild(e)),s}}))}();var $e=["Webkit","Moz","ms"],Xe=b.createElement("div").style,Ye={};function Ze(e){return T.cssProps[e]||Ye[e]||(e in Xe?e:Ye[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),n=$e.length;n--;)if((e=$e[n]+t)in Xe)return e}(e)||e)}var Ke=/^(none|table(?!-c[ea]).+)/,Qe=/^--/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"};function nt(e,t,n){var i=re.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function it(e,t,n,i,r,o){var a="width"===t?1:0,s=0,c=0;if(n===(i?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(c+=T.css(e,n+oe[a],!0,r)),i?("content"===n&&(c-=T.css(e,"padding"+oe[a],!0,r)),"margin"!==n&&(c-=T.css(e,"border"+oe[a]+"Width",!0,r))):(c+=T.css(e,"padding"+oe[a],!0,r),"padding"!==n?c+=T.css(e,"border"+oe[a]+"Width",!0,r):s+=T.css(e,"border"+oe[a]+"Width",!0,r));return!i&&o>=0&&(c+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-c-s-.5))||0),c}function rt(e,t,n){var i=Ue(e),r=(!m.boxSizingReliable()||n)&&"border-box"===T.css(e,"boxSizing",!1,i),o=r,a=Ge(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(Je.test(a)){if(!n)return a;a="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===T.css(e,"display",!1,i))&&e.getClientRects().length&&(r="border-box"===T.css(e,"boxSizing",!1,i),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+it(e,t,n||(r?"border":"content"),o,i,a)+"px"}function ot(e,t,n,i,r){return new ot.prototype.init(e,t,n,i,r)}T.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=X(t),c=Qe.test(t),u=e.style;if(c||(t=Ze(s)),a=T.cssHooks[t]||T.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:u[t];"string"==(o=typeof n)&&(r=re.exec(n))&&r[1]&&(n=le(e,t,r),o="number"),null!=n&&n==n&&("number"!==o||c||(n+=r&&r[3]||(T.cssNumber[s]?"":"px")),m.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(c?u.setProperty(t,n):u[t]=n))}},css:function(e,t,n,i){var r,o,a,s=X(t);return Qe.test(t)||(t=Ze(s)),(a=T.cssHooks[t]||T.cssHooks[s])&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=Ge(e,t,i)),"normal"===r&&t in tt&&(r=tt[t]),""===n||n?(o=parseFloat(r),!0===n||isFinite(o)?o||0:r):r}}),T.each(["height","width"],(function(e,t){T.cssHooks[t]={get:function(e,n,i){if(n)return!Ke.test(T.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?rt(e,t,i):qe(e,et,(function(){return rt(e,t,i)}))},set:function(e,n,i){var r,o=Ue(e),a=!m.scrollboxSize()&&"absolute"===o.position,s=(a||i)&&"border-box"===T.css(e,"boxSizing",!1,o),c=i?it(e,t,i,s,o):0;return s&&a&&(c-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(o[t])-it(e,t,"border",!1,o)-.5)),c&&(r=re.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=T.css(e,t)),nt(0,n,c)}}})),T.cssHooks.marginLeft=We(m.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ge(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),T.each({margin:"",padding:"",border:"Width"},(function(e,t){T.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];i<4;i++)r[e+oe[i]+t]=o[i]||o[i-2]||o[0];return r}},"margin"!==e&&(T.cssHooks[e+t].set=nt)})),T.fn.extend({css:function(e,t){return H(this,(function(e,t,n){var i,r,o={},a=0;if(Array.isArray(t)){for(i=Ue(e),r=t.length;a<r;a++)o[t[a]]=T.css(e,t[a],!1,i);return o}return void 0!==n?T.style(e,t,n):T.css(e,t)}),e,t,arguments.length>1)}}),T.Tween=ot,ot.prototype={constructor:ot,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||T.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(T.cssNumber[n]?"":"px")},cur:function(){var e=ot.propHooks[this.prop];return e&&e.get?e.get(this):ot.propHooks._default.get(this)},run:function(e){var t,n=ot.propHooks[this.prop];return this.options.duration?this.pos=t=T.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ot.propHooks._default.set(this),this}},ot.prototype.init.prototype=ot.prototype,ot.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=T.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){T.fx.step[e.prop]?T.fx.step[e.prop](e):1!==e.elem.nodeType||!T.cssHooks[e.prop]&&null==e.elem.style[Ze(e.prop)]?e.elem[e.prop]=e.now:T.style(e.elem,e.prop,e.now+e.unit)}}},ot.propHooks.scrollTop=ot.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},T.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},T.fx=ot.prototype.init,T.fx.step={};var at,st,ct=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function lt(){st&&(!1===b.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(lt):i.setTimeout(lt,T.fx.interval),T.fx.tick())}function dt(){return i.setTimeout((function(){at=void 0})),at=Date.now()}function ht(e,t){var n,i=0,r={height:e};for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=oe[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function ft(e,t,n){for(var i,r=(pt.tweeners[t]||[]).concat(pt.tweeners["*"]),o=0,a=r.length;o<a;o++)if(i=r[o].call(n,t,e))return i}function pt(e,t,n){var i,r,o=0,a=pt.prefilters.length,s=T.Deferred().always((function(){delete c.elem})),c=function(){if(r)return!1;for(var t=at||dt(),n=Math.max(0,u.startTime+u.duration-t),i=1-(n/u.duration||0),o=0,a=u.tweens.length;o<a;o++)u.tweens[o].run(i);return s.notifyWith(e,[u,i,n]),i<1&&a?n:(a||s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:T.extend({},t),opts:T.extend(!0,{specialEasing:{},easing:T.easing._default},n),originalProperties:t,originalOptions:n,startTime:at||dt(),duration:n.duration,tweens:[],createTween:function(t,n){var i=T.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),l=u.props;for(function(e,t){var n,i,r,o,a;for(n in e)if(r=t[i=X(n)],o=e[n],Array.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),(a=T.cssHooks[i])&&"expand"in a)for(n in o=a.expand(o),delete e[i],o)n in e||(e[n]=o[n],t[n]=r);else t[i]=r}(l,u.opts.specialEasing);o<a;o++)if(i=pt.prefilters[o].call(u,e,l,u.opts))return g(i.stop)&&(T._queueHooks(u.elem,u.opts.queue).stop=i.stop.bind(i)),i;return T.map(l,ft,u),g(u.opts.start)&&u.opts.start.call(e,u),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always),T.fx.timer(T.extend(c,{elem:e,anim:u,queue:u.opts.queue})),u}T.Animation=T.extend(pt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return le(n.elem,e,re.exec(t),n),n}]},tweener:function(e,t){g(e)?(t=e,e=["*"]):e=e.match(B);for(var n,i=0,r=e.length;i<r;i++)n=e[i],pt.tweeners[n]=pt.tweeners[n]||[],pt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var i,r,o,a,s,c,u,l,d="width"in t||"height"in t,h=this,f={},p=e.style,v=e.nodeType&&ue(e),m=K.get(e,"fxshow");for(i in n.queue||(null==(a=T._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,h.always((function(){h.always((function(){a.unqueued--,T.queue(e,"fx").length||a.empty.fire()}))}))),t)if(r=t[i],ct.test(r)){if(delete t[i],o=o||"toggle"===r,r===(v?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;v=!0}f[i]=m&&m[i]||T.style(e,i)}if((c=!T.isEmptyObject(t))||!T.isEmptyObject(f))for(i in d&&1===e.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(u=m&&m.display)&&(u=K.get(e,"display")),"none"===(l=T.css(e,"display"))&&(u?l=u:(fe([e],!0),u=e.style.display||u,l=T.css(e,"display"),fe([e]))),("inline"===l||"inline-block"===l&&null!=u)&&"none"===T.css(e,"float")&&(c||(h.done((function(){p.display=u})),null==u&&(l=p.display,u="none"===l?"":l)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",h.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),c=!1,f)c||(m?"hidden"in m&&(v=m.hidden):m=K.access(e,"fxshow",{display:u}),o&&(m.hidden=!v),v&&fe([e],!0),h.done((function(){for(i in v||fe([e]),K.remove(e,"fxshow"),f)T.style(e,i,f[i])}))),c=ft(v?m[i]:0,i,h),i in m||(m[i]=c.start,v&&(c.end=c.start,c.start=0))}],prefilter:function(e,t){t?pt.prefilters.unshift(e):pt.prefilters.push(e)}}),T.speed=function(e,t,n){var i=e&&"object"==typeof e?T.extend({},e):{complete:n||!n&&t||g(e)&&e,duration:e,easing:n&&t||t&&!g(t)&&t};return T.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in T.fx.speeds?i.duration=T.fx.speeds[i.duration]:i.duration=T.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){g(i.old)&&i.old.call(this),i.queue&&T.dequeue(this,i.queue)},i},T.fn.extend({fadeTo:function(e,t,n,i){return this.filter(ue).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=T.isEmptyObject(e),o=T.speed(t,n,i),a=function(){var t=pt(this,T.extend({},e),o);(r||K.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,r=null!=e&&e+"queueHooks",o=T.timers,a=K.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&ut.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||T.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,n=K.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=T.timers,a=i?i.length:0;for(n.finish=!0,T.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;t<a;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish}))}}),T.each(["toggle","show","hide"],(function(e,t){var n=T.fn[t];T.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ht(t,!0),e,i,r)}})),T.each({slideDown:ht("show"),slideUp:ht("hide"),slideToggle:ht("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){T.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}})),T.timers=[],T.fx.tick=function(){var e,t=0,n=T.timers;for(at=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||T.fx.stop(),at=void 0},T.fx.timer=function(e){T.timers.push(e),T.fx.start()},T.fx.interval=13,T.fx.start=function(){st||(st=!0,lt())},T.fx.stop=function(){st=null},T.fx.speeds={slow:600,fast:200,_default:400},T.fn.delay=function(e,t){return e=T.fx&&T.fx.speeds[e]||e,t=t||"fx",this.queue(t,(function(t,n){var r=i.setTimeout(t,e);n.stop=function(){i.clearTimeout(r)}}))},function(){var e=b.createElement("input"),t=b.createElement("select").appendChild(b.createElement("option"));e.type="checkbox",m.checkOn=""!==e.value,m.optSelected=t.selected,(e=b.createElement("input")).value="t",e.type="radio",m.radioValue="t"===e.value}();var vt,mt=T.expr.attrHandle;T.fn.extend({attr:function(e,t){return H(this,T.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){T.removeAttr(this,e)}))}}),T.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?T.prop(e,t,n):(1===o&&T.isXMLDoc(e)||(r=T.attrHooks[t.toLowerCase()]||(T.expr.match.bool.test(t)?vt:void 0)),void 0!==n?null===n?void T.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:null==(i=T.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!m.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i=0,r=t&&t.match(B);if(r&&1===e.nodeType)for(;n=r[i++];)e.removeAttribute(n)}}),vt={set:function(e,t,n){return!1===t?T.removeAttr(e,n):e.setAttribute(n,n),n}},T.each(T.expr.match.bool.source.match(/\w+/g),(function(e,t){var n=mt[t]||T.find.attr;mt[t]=function(e,t,i){var r,o,a=t.toLowerCase();return i||(o=mt[a],mt[a]=r,r=null!=n(e,t,i)?a:null,mt[a]=o),r}}));var gt=/^(?:input|select|textarea|button)$/i,yt=/^(?:a|area)$/i;function bt(e){return(e.match(B)||[]).join(" ")}function xt(e){return e.getAttribute&&e.getAttribute("class")||""}function wt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(B)||[]}T.fn.extend({prop:function(e,t){return H(this,T.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[T.propFix[e]||e]}))}}),T.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&T.isXMLDoc(e)||(t=T.propFix[t]||t,r=T.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=T.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||yt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(T.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),T.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){T.propFix[this.toLowerCase()]=this})),T.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,c=0;if(g(e))return this.each((function(t){T(this).addClass(e.call(this,t,xt(this)))}));if((t=wt(e)).length)for(;n=this[c++];)if(r=xt(n),i=1===n.nodeType&&" "+bt(r)+" "){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");r!==(s=bt(i))&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,c=0;if(g(e))return this.each((function(t){T(this).removeClass(e.call(this,t,xt(this)))}));if(!arguments.length)return this.attr("class","");if((t=wt(e)).length)for(;n=this[c++];)if(r=xt(n),i=1===n.nodeType&&" "+bt(r)+" "){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");r!==(s=bt(i))&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e,i="string"===n||Array.isArray(e);return"boolean"==typeof t&&i?t?this.addClass(e):this.removeClass(e):g(e)?this.each((function(n){T(this).toggleClass(e.call(this,n,xt(this),t),t)})):this.each((function(){var t,r,o,a;if(i)for(r=0,o=T(this),a=wt(e);t=a[r++];)o.hasClass(t)?o.removeClass(t):o.addClass(t);else void 0!==e&&"boolean"!==n||((t=xt(this))&&K.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===e?"":K.get(this,"__className__")||""))}))},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+bt(xt(n))+" ").indexOf(t)>-1)return!0;return!1}});var Nt=/\r/g;T.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=g(e),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?e.call(this,n,T(this).val()):e)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=T.map(r,(function(e){return null==e?"":e+""}))),(t=T.valHooks[this.type]||T.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))}))):r?(t=T.valHooks[r.type]||T.valHooks[r.nodeName.toLowerCase()])&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Nt,""):null==n?"":n:void 0}}),T.extend({valHooks:{option:{get:function(e){var t=T.find.attr(e,"value");return null!=t?t:bt(T.text(e))}},select:{get:function(e){var t,n,i,r=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],c=a?o+1:r.length;for(i=o<0?c:a?o:0;i<c;i++)if(((n=r[i]).selected||i===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=T(n).val(),a)return t;s.push(t)}return s},set:function(e,t){for(var n,i,r=e.options,o=T.makeArray(t),a=r.length;a--;)((i=r[a]).selected=T.inArray(T.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),T.each(["radio","checkbox"],(function(){T.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=T.inArray(T(e).val(),t)>-1}},m.checkOn||(T.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})})),m.focusin="onfocusin"in i;var St=/^(?:focusinfocus|focusoutblur)$/,Tt=function(e){e.stopPropagation()};T.extend(T.event,{trigger:function(e,t,n,r){var o,a,s,c,u,l,d,h,p=[n||b],v=f.call(e,"type")?e.type:e,m=f.call(e,"namespace")?e.namespace.split("."):[];if(a=h=s=n=n||b,3!==n.nodeType&&8!==n.nodeType&&!St.test(v+T.event.triggered)&&(v.indexOf(".")>-1&&(m=v.split("."),v=m.shift(),m.sort()),u=v.indexOf(":")<0&&"on"+v,(e=e[T.expando]?e:new T.Event(v,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=m.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:T.makeArray(t,[e]),d=T.event.special[v]||{},r||!d.trigger||!1!==d.trigger.apply(n,t))){if(!r&&!d.noBubble&&!y(n)){for(c=d.delegateType||v,St.test(c+v)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(n.ownerDocument||b)&&p.push(s.defaultView||s.parentWindow||i)}for(o=0;(a=p[o++])&&!e.isPropagationStopped();)h=a,e.type=o>1?c:d.bindType||v,(l=(K.get(a,"events")||Object.create(null))[e.type]&&K.get(a,"handle"))&&l.apply(a,t),(l=u&&a[u])&&l.apply&&Y(a)&&(e.result=l.apply(a,t),!1===e.result&&e.preventDefault());return e.type=v,r||e.isDefaultPrevented()||d._default&&!1!==d._default.apply(p.pop(),t)||!Y(n)||u&&g(n[v])&&!y(n)&&((s=n[u])&&(n[u]=null),T.event.triggered=v,e.isPropagationStopped()&&h.addEventListener(v,Tt),n[v](),e.isPropagationStopped()&&h.removeEventListener(v,Tt),T.event.triggered=void 0,s&&(n[u]=s)),e.result}},simulate:function(e,t,n){var i=T.extend(new T.Event,n,{type:e,isSimulated:!0});T.event.trigger(i,null,t)}}),T.fn.extend({trigger:function(e,t){return this.each((function(){T.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var n=this[0];if(n)return T.event.trigger(e,t,n,!0)}}),m.focusin||T.each({focus:"focusin",blur:"focusout"},(function(e,t){var n=function(e){T.event.simulate(t,e.target,T.event.fix(e))};T.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,r=K.access(i,t);r||i.addEventListener(e,n,!0),K.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=K.access(i,t)-1;r?K.access(i,t,r):(i.removeEventListener(e,n,!0),K.remove(i,t))}}}));var Ct=i.location,_t={guid:Date.now()},Ot=/\?/;T.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new i.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||T.error("Invalid XML: "+e),t};var Mt=/\[\]$/,Et=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Dt(e,t,n,i){var r;if(Array.isArray(t))T.each(t,(function(t,r){n||Mt.test(e)?i(e,r):Dt(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)}));else if(n||"object"!==N(t))i(e,t);else for(r in t)Dt(e+"["+r+"]",t[r],n,i)}T.param=function(e,t){var n,i=[],r=function(e,t){var n=g(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!T.isPlainObject(e))T.each(e,(function(){r(this.name,this.value)}));else for(n in e)Dt(n,e[n],t,r);return i.join("&")},T.fn.extend({serialize:function(){return T.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=T.prop(this,"elements");return e?T.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!T(this).is(":disabled")&&Lt.test(this.nodeName)&&!At.test(e)&&(this.checked||!me.test(e))})).map((function(e,t){var n=T(this).val();return null==n?null:Array.isArray(n)?T.map(n,(function(e){return{name:t.name,value:e.replace(Et,"\r\n")}})):{name:t.name,value:n.replace(Et,"\r\n")}})).get()}});var Pt=/%20/g,Rt=/#.*$/,jt=/([?&])_=[^&]*/,kt=/^(.*?):[ \t]*([^\r\n]*)$/gm,It=/^(?:GET|HEAD)$/,Bt=/^\/\//,Ft={},zt={},Vt="*/".concat("*"),Jt=b.createElement("a");function Ut(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(B)||[];if(g(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function qt(e,t,n,i){var r={},o=e===zt;function a(s){var c;return r[s]=!0,T.each(e[s]||[],(function(e,s){var u=s(t,n,i);return"string"!=typeof u||o||r[u]?o?!(c=u):void 0:(t.dataTypes.unshift(u),a(u),!1)})),c}return a(t.dataTypes[0])||!r["*"]&&a("*")}function Ht(e,t){var n,i,r=T.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&T.extend(!0,e,i),e}Jt.href=Ct.href,T.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ct.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Ct.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":T.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ht(Ht(e,T.ajaxSettings),t):Ht(T.ajaxSettings,e)},ajaxPrefilter:Ut(Ft),ajaxTransport:Ut(zt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var n,r,o,a,s,c,u,l,d,h,f=T.ajaxSetup({},t),p=f.context||f,v=f.context&&(p.nodeType||p.jquery)?T(p):T.event,m=T.Deferred(),g=T.Callbacks("once memory"),y=f.statusCode||{},x={},w={},N="canceled",S={readyState:0,getResponseHeader:function(e){var t;if(u){if(!a)for(a={};t=kt.exec(o);)a[t[1].toLowerCase()+" "]=(a[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=a[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return u?o:null},setRequestHeader:function(e,t){return null==u&&(e=w[e.toLowerCase()]=w[e.toLowerCase()]||e,x[e]=t),this},overrideMimeType:function(e){return null==u&&(f.mimeType=e),this},statusCode:function(e){var t;if(e)if(u)S.always(e[S.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||N;return n&&n.abort(t),C(0,t),this}};if(m.promise(S),f.url=((e||f.url||Ct.href)+"").replace(Bt,Ct.protocol+"//"),f.type=t.method||t.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(B)||[""],null==f.crossDomain){c=b.createElement("a");try{c.href=f.url,c.href=c.href,f.crossDomain=Jt.protocol+"//"+Jt.host!=c.protocol+"//"+c.host}catch(e){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=T.param(f.data,f.traditional)),qt(Ft,f,t,S),u)return S;for(d in(l=T.event&&f.global)&&0==T.active++&&T.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!It.test(f.type),r=f.url.replace(Rt,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Pt,"+")):(h=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Ot.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(jt,"$1"),h=(Ot.test(r)?"&":"?")+"_="+_t.guid+++h),f.url=r+h),f.ifModified&&(T.lastModified[r]&&S.setRequestHeader("If-Modified-Since",T.lastModified[r]),T.etag[r]&&S.setRequestHeader("If-None-Match",T.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||t.contentType)&&S.setRequestHeader("Content-Type",f.contentType),S.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Vt+"; q=0.01":""):f.accepts["*"]),f.headers)S.setRequestHeader(d,f.headers[d]);if(f.beforeSend&&(!1===f.beforeSend.call(p,S,f)||u))return S.abort();if(N="abort",g.add(f.complete),S.done(f.success),S.fail(f.error),n=qt(zt,f,t,S)){if(S.readyState=1,l&&v.trigger("ajaxSend",[S,f]),u)return S;f.async&&f.timeout>0&&(s=i.setTimeout((function(){S.abort("timeout")}),f.timeout));try{u=!1,n.send(x,C)}catch(e){if(u)throw e;C(-1,e)}}else C(-1,"No Transport");function C(e,t,a,c){var d,h,b,x,w,N=t;u||(u=!0,s&&i.clearTimeout(s),n=void 0,o=c||"",S.readyState=e>0?4:0,d=e>=200&&e<300||304===e,a&&(x=function(e,t,n){for(var i,r,o,a,s=e.contents,c=e.dataTypes;"*"===c[0];)c.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){c.unshift(r);break}if(c[0]in n)o=c[0];else{for(r in n){if(!c[0]||e.converters[r+" "+c[0]]){o=r;break}a||(a=r)}o=o||a}if(o)return o!==c[0]&&c.unshift(o),n[o]}(f,S,a)),!d&&T.inArray("script",f.dataTypes)>-1&&(f.converters["text script"]=function(){}),x=function(e,t,n,i){var r,o,a,s,c,u={},l=e.dataTypes.slice();if(l[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=l.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!c&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),c=o,o=l.shift())if("*"===o)o=c;else if("*"!==c&&c!==o){if(!(a=u[c+" "+o]||u["* "+o]))for(r in u)if((s=r.split(" "))[1]===o&&(a=u[c+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[r]:!0!==u[r]&&(o=s[0],l.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+c+" to "+o}}}return{state:"success",data:t}}(f,x,S,d),d?(f.ifModified&&((w=S.getResponseHeader("Last-Modified"))&&(T.lastModified[r]=w),(w=S.getResponseHeader("etag"))&&(T.etag[r]=w)),204===e||"HEAD"===f.type?N="nocontent":304===e?N="notmodified":(N=x.state,h=x.data,d=!(b=x.error))):(b=N,!e&&N||(N="error",e<0&&(e=0))),S.status=e,S.statusText=(t||N)+"",d?m.resolveWith(p,[h,N,S]):m.rejectWith(p,[S,N,b]),S.statusCode(y),y=void 0,l&&v.trigger(d?"ajaxSuccess":"ajaxError",[S,f,d?h:b]),g.fireWith(p,[S,N]),l&&(v.trigger("ajaxComplete",[S,f]),--T.active||T.event.trigger("ajaxStop")))}return S},getJSON:function(e,t,n){return T.get(e,t,n,"json")},getScript:function(e,t){return T.get(e,void 0,t,"script")}}),T.each(["get","post"],(function(e,t){T[t]=function(e,n,i,r){return g(n)&&(r=r||i,i=n,n=void 0),T.ajax(T.extend({url:e,type:t,dataType:r,data:n,success:i},T.isPlainObject(e)&&e))}})),T.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),T._evalUrl=function(e,t,n){return T.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){T.globalEval(e,t,n)}})},T.fn.extend({wrapAll:function(e){var t;return this[0]&&(g(e)&&(e=e.call(this[0])),t=T(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return g(e)?this.each((function(t){T(this).wrapInner(e.call(this,t))})):this.each((function(){var t=T(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)}))},wrap:function(e){var t=g(e);return this.each((function(n){T(this).wrapAll(t?e.call(this,n):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){T(this).replaceWith(this.childNodes)})),this}}),T.expr.pseudos.hidden=function(e){return!T.expr.pseudos.visible(e)},T.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},T.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(e){}};var Gt={0:200,1223:204},Wt=T.ajaxSettings.xhr();m.cors=!!Wt&&"withCredentials"in Wt,m.ajax=Wt=!!Wt,T.ajaxTransport((function(e){var t,n;if(m.cors||Wt&&!e.crossDomain)return{send:function(r,o){var a,s=e.xhr();if(s.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)s[a]=e.xhrFields[a];for(a in e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),e.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)s.setRequestHeader(a,r[a]);t=function(e){return function(){t&&(t=n=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(Gt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=t(),n=s.onerror=s.ontimeout=t("error"),void 0!==s.onabort?s.onabort=n:s.onreadystatechange=function(){4===s.readyState&&i.setTimeout((function(){t&&n()}))},t=t("abort");try{s.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}})),T.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),T.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return T.globalEval(e),e}}}),T.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),T.ajaxTransport("script",(function(e){var t,n;if(e.crossDomain||e.scriptAttrs)return{send:function(i,r){t=T("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),b.head.appendChild(t[0])},abort:function(){n&&n()}}}));var $t,Xt=[],Yt=/(=)\?(?=&|$)|\?\?/;T.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Xt.pop()||T.expando+"_"+_t.guid++;return this[e]=!0,e}}),T.ajaxPrefilter("json jsonp",(function(e,t,n){var r,o,a,s=!1!==e.jsonp&&(Yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Yt.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=g(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Yt,"$1"+r):!1!==e.jsonp&&(e.url+=(Ot.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||T.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=i[r],i[r]=function(){a=arguments},n.always((function(){void 0===o?T(i).removeProp(r):i[r]=o,e[r]&&(e.jsonpCallback=t.jsonpCallback,Xt.push(r)),a&&g(o)&&o(a[0]),a=o=void 0})),"script"})),m.createHTMLDocument=(($t=b.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===$t.childNodes.length),T.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(m.createHTMLDocument?((i=(t=b.implementation.createHTMLDocument("")).createElement("base")).href=b.location.href,t.head.appendChild(i)):t=b),o=!n&&[],(r=L.exec(e))?[t.createElement(r[1])]:(r=Se([e],t,o),o&&o.length&&T(o).remove(),T.merge([],r.childNodes)));var i,r,o},T.fn.load=function(e,t,n){var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=bt(e.slice(s)),e=e.slice(0,s)),g(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&T.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done((function(e){o=arguments,a.html(i?T("<div>").append(T.parseHTML(e)).find(i):e)})).always(n&&function(e,t){a.each((function(){n.apply(this,o||[e.responseText,t,e])}))}),this},T.expr.pseudos.animated=function(e){return T.grep(T.timers,(function(t){return e===t.elem})).length},T.offset={setOffset:function(e,t,n){var i,r,o,a,s,c,u=T.css(e,"position"),l=T(e),d={};"static"===u&&(e.style.position="relative"),s=l.offset(),o=T.css(e,"top"),c=T.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+c).indexOf("auto")>-1?(a=(i=l.position()).top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(c)||0),g(t)&&(t=t.call(e,n,T.extend({},s))),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+r),"using"in t?t.using.call(e,d):("number"==typeof d.top&&(d.top+="px"),"number"==typeof d.left&&(d.left+="px"),l.css(d))}},T.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){T.offset.setOffset(this,e,t)}));var t,n,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,i=this[0],r={top:0,left:0};if("fixed"===T.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),n=i.ownerDocument,e=i.offsetParent||n.documentElement;e&&(e===n.body||e===n.documentElement)&&"static"===T.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((r=T(e).offset()).top+=T.css(e,"borderTopWidth",!0),r.left+=T.css(e,"borderLeftWidth",!0))}return{top:t.top-r.top-T.css(i,"marginTop",!0),left:t.left-r.left-T.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===T.css(e,"position");)e=e.offsetParent;return e||ae}))}}),T.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var n="pageYOffset"===t;T.fn[e]=function(i){return H(this,(function(e,i,r){var o;if(y(e)?o=e:9===e.nodeType&&(o=e.defaultView),void 0===r)return o?o[t]:e[i];o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r}),e,i,arguments.length)}})),T.each(["top","left"],(function(e,t){T.cssHooks[t]=We(m.pixelPosition,(function(e,n){if(n)return n=Ge(e,t),Je.test(n)?T(e).position()[t]+"px":n}))})),T.each({Height:"height",Width:"width"},(function(e,t){T.each({padding:"inner"+e,content:t,"":"outer"+e},(function(n,i){T.fn[i]=function(r,o){var a=arguments.length&&(n||"boolean"!=typeof r),s=n||(!0===r||!0===o?"margin":"border");return H(this,(function(t,n,r){var o;return y(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(o=t.documentElement,Math.max(t.body["scroll"+e],o["scroll"+e],t.body["offset"+e],o["offset"+e],o["client"+e])):void 0===r?T.css(t,n,s):T.style(t,n,r,s)}),t,a?r:void 0,a)}}))})),T.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){T.fn[t]=function(e){return this.on(t,e)}})),T.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),T.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){T.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}));var Zt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;T.proxy=function(e,t){var n,i,r;if("string"==typeof t&&(n=e[t],t=e,e=n),g(e))return i=s.call(arguments,2),(r=function(){return e.apply(t||this,i.concat(s.call(arguments)))}).guid=e.guid=e.guid||T.guid++,r},T.holdReady=function(e){e?T.readyWait++:T.ready(!0)},T.isArray=Array.isArray,T.parseJSON=JSON.parse,T.nodeName=A,T.isFunction=g,T.isWindow=y,T.camelCase=X,T.type=N,T.now=Date.now,T.isNumeric=function(e){var t=T.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},T.trim=function(e){return null==e?"":(e+"").replace(Zt,"")},void 0===(n=function(){return T}.apply(t,[]))||(e.exports=n);var Kt=i.jQuery,Qt=i.$;return T.noConflict=function(e){return i.$===T&&(i.$=Qt),e&&i.jQuery===T&&(i.jQuery=Kt),T},void 0===r&&(i.jQuery=i.$=T),T}))},1410:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TrackballControls:()=>r});var i=n(2212),r=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var n=this,r=-1;this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.ZOOM,RIGHT:i.MOUSE.PAN},this.target=new i.Vector3;var o=1e-6,a=new i.Vector3,s=1,c=r,u=r,l=new i.Vector3,d=new i.Vector2,h=new i.Vector2,f=new i.Vector3,p=0,v=new i.Vector2,m=new i.Vector2,g=0,y=0,b=new i.Vector2,x=new i.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var w={type:"change"},N={type:"start"},S={type:"end"};this.handleResize=function(){var e=n.domElement.getBoundingClientRect(),t=n.domElement.ownerDocument.documentElement;n.screen.left=e.left+window.pageXOffset-t.clientLeft,n.screen.top=e.top+window.pageYOffset-t.clientTop,n.screen.width=e.width,n.screen.height=e.height};var T,C,_,O,M,E,A,L,D,P,R,j=(T=new i.Vector2,function(e,t){return T.set((e-n.screen.left)/n.screen.width,(t-n.screen.top)/n.screen.height),T}),k=function(){var e=new i.Vector2;return function(t,i){return e.set((t-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-i))/n.screen.width),e}}();function I(e){!1!==n.enabled&&(window.removeEventListener("keydown",I),u===r&&(e.keyCode!==n.keys[0]||n.noRotate?e.keyCode!==n.keys[1]||n.noZoom?e.keyCode!==n.keys[2]||n.noPan||(u=2):u=1:u=0))}function B(){!1!==n.enabled&&(u=r,window.addEventListener("keydown",I,!1))}function F(e){if(!1!==n.enabled){if(e.preventDefault(),e.stopPropagation(),c===r)switch(e.button){case n.mouseButtons.LEFT:c=0;break;case n.mouseButtons.MIDDLE:c=1;break;case n.mouseButtons.RIGHT:c=2;break;default:c=r}var t=u!==r?u:c;0!==t||n.noRotate?1!==t||n.noZoom?2!==t||n.noPan||(b.copy(j(e.pageX,e.pageY)),x.copy(b)):(v.copy(j(e.pageX,e.pageY)),m.copy(v)):(h.copy(k(e.pageX,e.pageY)),d.copy(h)),n.domElement.ownerDocument.addEventListener("mousemove",z,!1),n.domElement.ownerDocument.addEventListener("mouseup",V,!1),n.dispatchEvent(N)}}function z(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=u!==r?u:c;0!==t||n.noRotate?1!==t||n.noZoom?2!==t||n.noPan||x.copy(j(e.pageX,e.pageY)):m.copy(j(e.pageX,e.pageY)):(d.copy(h),h.copy(k(e.pageX,e.pageY)))}}function V(e){!1!==n.enabled&&(e.preventDefault(),e.stopPropagation(),c=r,n.domElement.ownerDocument.removeEventListener("mousemove",z),n.domElement.ownerDocument.removeEventListener("mouseup",V),n.dispatchEvent(S))}function J(e){if(!1!==n.enabled&&!0!==n.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:v.y-=.025*e.deltaY;break;case 1:v.y-=.01*e.deltaY;break;default:v.y-=25e-5*e.deltaY}n.dispatchEvent(N),n.dispatchEvent(S)}}function U(e){if(!1!==n.enabled){switch(e.preventDefault(),e.touches.length){case 1:c=3,h.copy(k(e.touches[0].pageX,e.touches[0].pageY)),d.copy(h);break;default:c=4;var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;y=g=Math.sqrt(t*t+i*i);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;b.copy(j(r,o)),x.copy(b)}n.dispatchEvent(N)}}function q(e){if(!1!==n.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:d.copy(h),h.copy(k(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY;y=Math.sqrt(t*t+i*i);var r=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;x.copy(j(r,o))}}function H(e){if(!1!==n.enabled){switch(e.touches.length){case 0:c=r;break;case 1:c=3,h.copy(k(e.touches[0].pageX,e.touches[0].pageY)),d.copy(h)}n.dispatchEvent(S)}}function G(e){!1!==n.enabled&&e.preventDefault()}this.rotateCamera=(_=new i.Vector3,O=new i.Quaternion,M=new i.Vector3,E=new i.Vector3,A=new i.Vector3,L=new i.Vector3,function(){L.set(h.x-d.x,h.y-d.y,0),(C=L.length())?(l.copy(n.object.position).sub(n.target),M.copy(l).normalize(),E.copy(n.object.up).normalize(),A.crossVectors(E,M).normalize(),E.setLength(h.y-d.y),A.setLength(h.x-d.x),L.copy(E.add(A)),_.crossVectors(L,l).normalize(),C*=n.rotateSpeed,O.setFromAxisAngle(_,C),l.applyQuaternion(O),n.object.up.applyQuaternion(O),f.copy(_),p=C):!n.staticMoving&&p&&(p*=Math.sqrt(1-n.dynamicDampingFactor),l.copy(n.object.position).sub(n.target),O.setFromAxisAngle(f,p),l.applyQuaternion(O),n.object.up.applyQuaternion(O)),d.copy(h)}),this.zoomCamera=function(){var e;4===c?(e=g/y,g=y,n.object.isPerspectiveCamera?l.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom*=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!=(e=1+(m.y-v.y)*n.zoomSpeed)&&e>0&&(n.object.isPerspectiveCamera?l.multiplyScalar(e):n.object.isOrthographicCamera?(n.object.zoom/=e,n.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),n.staticMoving?v.copy(m):v.y+=(m.y-v.y)*this.dynamicDampingFactor)},this.panCamera=(D=new i.Vector2,P=new i.Vector3,R=new i.Vector3,function(){if(D.copy(x).sub(b),D.lengthSq()){if(n.object.isOrthographicCamera){var e=(n.object.right-n.object.left)/n.object.zoom/n.domElement.clientWidth,t=(n.object.top-n.object.bottom)/n.object.zoom/n.domElement.clientWidth;D.x*=e,D.y*=t}D.multiplyScalar(l.length()*n.panSpeed),R.copy(l).cross(n.object.up).setLength(D.x),R.add(P.copy(n.object.up).setLength(D.y)),n.object.position.add(R),n.target.add(R),n.staticMoving?b.copy(x):b.add(D.subVectors(x,b).multiplyScalar(n.dynamicDampingFactor))}}),this.checkDistances=function(){n.noZoom&&n.noPan||(l.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,l.setLength(n.maxDistance)),v.copy(m)),l.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,l.setLength(n.minDistance)),v.copy(m)))},this.update=function(){l.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,l),n.object.isPerspectiveCamera?(n.checkDistances(),n.object.lookAt(n.target),a.distanceToSquared(n.object.position)>o&&(n.dispatchEvent(w),a.copy(n.object.position))):n.object.isOrthographicCamera?(n.object.lookAt(n.target),(a.distanceToSquared(n.object.position)>o||s!==n.object.zoom)&&(n.dispatchEvent(w),a.copy(n.object.position),s=n.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){c=r,u=r,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),l.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(w),a.copy(n.object.position),s=n.object.zoom},this.dispose=function(){n.domElement.removeEventListener("contextmenu",G,!1),n.domElement.removeEventListener("mousedown",F,!1),n.domElement.removeEventListener("wheel",J,!1),n.domElement.removeEventListener("touchstart",U,!1),n.domElement.removeEventListener("touchend",H,!1),n.domElement.removeEventListener("touchmove",q,!1),n.domElement.ownerDocument.removeEventListener("mousemove",z,!1),n.domElement.ownerDocument.removeEventListener("mouseup",V,!1),window.removeEventListener("keydown",I,!1),window.removeEventListener("keyup",B,!1)},this.domElement.addEventListener("contextmenu",G,!1),this.domElement.addEventListener("mousedown",F,!1),this.domElement.addEventListener("wheel",J,!1),this.domElement.addEventListener("touchstart",U,!1),this.domElement.addEventListener("touchend",H,!1),this.domElement.addEventListener("touchmove",q,!1),window.addEventListener("keydown",I,!1),window.addEventListener("keyup",B,!1),this.handleResize(),this.update()};r.prototype=Object.create(i.EventDispatcher.prototype),r.prototype.constructor=r},9511:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AttributeNode:()=>f,BlurNode:()=>_e,BoolNode:()=>H,BumpMapNode:()=>pe,BypassNode:()=>ve,CameraNode:()=>ae,CheckerNode:()=>he,ColorAdjustmentNode:()=>Me,ColorNode:()=>W,ColorSpaceNode:()=>A,ColorsNode:()=>oe,CondNode:()=>le,ConstNode:()=>c,CubeTextureNode:()=>j,ExpressionNode:()=>y,FloatNode:()=>E,FunctionCallNode:()=>b,FunctionNode:()=>g,InputNode:()=>a,IntNode:()=>G,JoinNode:()=>ye,LightNode:()=>se,LuminanceNode:()=>Oe,MathNode:()=>I,Matrix3Node:()=>$,Matrix4Node:()=>X,MaxMIPLevelNode:()=>Se,MeshStandardNode:()=>De,MeshStandardNodeMaterial:()=>ke,Node:()=>r,NodeBuilder:()=>q,NodeFrame:()=>S,NodeLib:()=>p,NodeMaterial:()=>ee,NodePostProcessing:()=>Ie,NodeUniform:()=>T,NodeUtils:()=>N,NoiseNode:()=>de,NormalMapNode:()=>fe,NormalNode:()=>P,OperatorNode:()=>k,PhongNode:()=>Ae,PhongNodeMaterial:()=>Re,PositionNode:()=>D,PropertyNode:()=>K,RTTNode:()=>te,RawNode:()=>Q,ReflectNode:()=>R,ReflectorNode:()=>Z,ResolutionNode:()=>ce,ScreenNode:()=>Y,ScreenUVNode:()=>ue,SpecularMIPLevelNode:()=>Te,SpriteNode:()=>Ee,SpriteNodeMaterial:()=>Pe,StandardNode:()=>Le,StandardNodeMaterial:()=>je,StructNode:()=>h,SubSlotNode:()=>Ce,SwitchNode:()=>be,TempNode:()=>o,TextureCubeNode:()=>F,TextureCubeUVNode:()=>B,TextureNode:()=>L,TimerNode:()=>xe,UVNode:()=>M,UVTransformNode:()=>Ne,VarNode:()=>u,Vector2Node:()=>C,Vector3Node:()=>_,Vector4Node:()=>O,VelocityNode:()=>we});var i=n(2212);function r(e){this.uuid=i.MathUtils.generateUUID(),this.name="",this.type=e,this.userData={}}function o(e,t){r.call(this,e),t=t||{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}function a(e,t){(t=t||{}).shared=void 0!==t.shared&&t.shared,o.call(this,e,t),this.readonly=!1}r.prototype={constructor:r,isNode:!0,analyze:function(e,t){t=t||{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1},analyzeAndFlow:function(e,t,n){return n=n||{},this.analyze(e,n),this.flow(e,t,n)},flow:function(e,t,n){n=n||{},e.addFlow(n.slot,n.cache,n.context);var i={};return i.result=this.build(e,t),i.code=e.clearNodeCode(),i.extra=e.context.extra,e.removeFlow(),i},build:function(e,t,n){t=t||this.getType(e,t);var i=e.getNodeData(n||this);return e.analyzing&&this.appendDepsNode(e,i,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,n)},generate:function(){},appendDepsNode:function(e,t,n){t.deps=(t.deps||0)+1;var i=e.getTypeLength(n);(i>(t.outputMax||0)||this.getType(e,n))&&(t.outputMax=i,t.output=n)},setName:function(e){return this.name=e,this},getName:function(){return this.name},getType:function(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type},getJSONNode:function(e){if(void 0!==e&&"string"!=typeof e&&void 0!==e.nodes[this.uuid])return e.nodes[this.uuid]},copy:function(e){return void 0!==e.name&&(this.name=e.name),void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},createJSONNode:function(e){var t=void 0===e||"string"==typeof e,n={};if("string"!=typeof this.nodeType)throw new Error("Node does not allow serialization.");return n.uuid=this.uuid,n.nodeType=this.nodeType,""!==this.name&&(n.name=this.name),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),t||(e.nodes[this.uuid]=n),n},toJSON:function(e){return this.getJSONNode(e)||this.createJSONNode(e)}},o.prototype=Object.create(r.prototype),o.prototype.constructor=o,o.prototype.build=function(e,t,n,a){if(t=t||this.getType(e),this.getShared(e,t)){var s=this.getUnique(e,t);s&&void 0===this.constructor.uuid&&(this.constructor.uuid=i.MathUtils.generateUUID()),n=e.getUuid(n||this.getUuid(),!s);var c=e.getNodeData(n),u=c.output||this.getType(e);if(e.analyzing)return(c.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,c,t),this.generate(e,t,n)):r.prototype.build.call(this,e,t,n);if(s)return c.name=c.name||r.prototype.build.call(this,e,t,n),c.name;if(!this.getLabel()&&(!this.getShared(e,u)||e.context.ignoreCache||1===c.deps))return r.prototype.build.call(this,e,t,n);n=this.getUuid(!1);var l=this.getTemp(e,n);if(l)return e.format(l,u,t);l=o.prototype.generate.call(this,e,t,n,c.output,a);var d=this.generate(e,u,n);return e.addNodeCode(l+" = "+d+";"),e.format(l,u,t)}return r.prototype.build.call(this,e,t,n)},o.prototype.getShared=function(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared},o.prototype.getUnique=function(){return this.unique},o.prototype.setLabel=function(e){return this.label=e,this},o.prototype.getLabel=function(){return this.label},o.prototype.getUuid=function(e){var t=(e||null==e)&&this.constructor.uuid||this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t},o.prototype.getTemp=function(e,t){t=t||this.uuid;var n=e.getVars()[t];return n?n.name:void 0},o.prototype.generate=function(e,t,n,i,r){return this.getShared(e,t)||console.error("THREE.TempNode is not shared!"),n=n||this.uuid,e.getTempVar(n,i||this.getType(e),r,this.getLabel()).name},a.prototype=Object.create(o.prototype),a.prototype.constructor=a,a.prototype.setReadonly=function(e){return this.readonly=e,this},a.prototype.getReadonly=function(){return this.readonly},a.prototype.copy=function(e){return o.prototype.copy.call(this,e),void 0!==e.readonly&&(this.readonly=e.readonly),this},a.prototype.createJSONNode=function(e){var t=o.prototype.createJSONNode.call(this,e);return!0===this.readonly&&(t.readonly=this.readonly),t},a.prototype.generate=function(e,t,n,i,r,o){n=e.getUuid(n||this.getUuid()),i=i||this.getType(e);var a=e.getNodeData(n);return this.getReadonly(e)&&void 0!==this.generateReadonly?this.generateReadonly(e,t,n,i,r,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(i,this,r,o,this.getLabel())),e.format(a.vertex.name,i,t)):(a.fragment||(a.fragment=e.createFragmentUniform(i,this,r,o,this.getLabel())),e.format(a.fragment.name,i,t))};var s=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;function c(e,t){o.call(this),this.parse(e||c.PI,t)}function u(e,t){r.call(this,e),this.value=t}c.PI="PI",c.PI2="PI2",c.RECIPROCAL_PI="RECIPROCAL_PI",c.RECIPROCAL_PI2="RECIPROCAL_PI2",c.LOG2="LOG2",c.EPSILON="EPSILON",c.prototype=Object.create(o.prototype),c.prototype.constructor=c,c.prototype.nodeType="Const",c.prototype.getType=function(e){return e.getTypeByFormat(this.type)},c.prototype.parse=function(e,t){this.src=e||"";var n,i,r="",o=this.src.match(s);this.useDefine=t||"#"===this.src.charAt(0),o&&o.length>1?(i=o[1],n=o[2],r=o[3]):(n=this.src,i="f"),this.name=n,this.type=i,this.value=r},c.prototype.build=function(e,t){return"source"!==t?(e.include(this),e.format(this.name,this.getType(e),t)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0},c.prototype.generate=function(e,t){return e.format(this.name,this.getType(e),t)},c.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.parse(e.src,e.useDefine),this},c.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src,!0===t.useDefine&&(t.useDefine=!0)),t},u.prototype=Object.create(r.prototype),u.prototype.constructor=u,u.prototype.nodeType="Var",u.prototype.getType=function(e){return e.getTypeByFormat(this.type)},u.prototype.generate=function(e,t){var n=e.getVar(this.uuid,this.type);return this.value&&e.isShader("vertex")&&e.addNodeCode(n.name+" = "+this.value.build(e,this.getType(e))+";"),e.format(n.name,this.getType(e),t)},u.prototype.copy=function(e){return r.prototype.copy.call(this,e),this.type=e.type,this.value=e.value,this},u.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type,this.value&&(t.value=this.value.toJSON(e).uuid)),t};var l=/^struct\s*([a-z_0-9]+)\s*{\s*((.|\n)*?)}/gim,d=/\s*(\w*?)\s*(\w*?)(\=|\;)/gim;function h(e){o.call(this),this.parse(e)}function f(e,t){r.call(this,t),this.name=e}h.prototype=Object.create(o.prototype),h.prototype.constructor=h,h.prototype.nodeType="Struct",h.prototype.getType=function(e){return e.getTypeByFormat(this.name)},h.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},h.prototype.generate=function(e,t){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)},h.prototype.parse=function(e){this.src=e||"",this.inputs=[];var t=l.exec(this.src);if(t){for(var n,i=t[2];n=d.exec(i);)this.inputs.push({type:n[1],name:n[2]});this.name=t[1]}else this.name="";this.type=this.name},h.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src),t},f.prototype=Object.create(r.prototype),f.prototype.constructor=f,f.prototype.nodeType="Attribute",f.prototype.getAttributeType=function(e){return"number"==typeof this.type?e.getConstructorFromLength(this.type):this.type},f.prototype.getType=function(e){var t=this.getAttributeType(e);return e.getTypeByFormat(t)},f.prototype.generate=function(e,t){var n=this.getAttributeType(e),i=e.getAttribute(this.name,n),r=e.isShader("vertex")?this.name:i.varying.name;return e.format(r,this.getType(e),t)},f.prototype.copy=function(e){return r.prototype.copy.call(this,e),this.type=e.type,this},f.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type),t};var p={nodes:{},keywords:{},add:function(e){this.nodes[e.name]=e},addKeyword:function(e,t,n){n=void 0===n||n,this.keywords[e]={callback:t,cache:n}},remove:function(e){delete this.nodes[e.name]},removeKeyword:function(e){delete this.keywords[e]},get:function(e){return this.nodes[e]},getKeyword:function(e,t){return this.keywords[e].callback.call(this,t)},getKeywordData:function(e){return this.keywords[e]},contains:function(e){return void 0!==this.nodes[e]},containsKeyword:function(e){return void 0!==this.keywords[e]}},v=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,m=/[a-z_0-9]+/gi;function g(e,t,n,i,r){this.isMethod=void 0===r,this.isInterface=!1,o.call(this,r),this.parse(e,t,n,i)}function y(e,t,n,i,r){g.call(this,e,r,i,n,t)}function b(e,t){o.call(this),this.setFunction(e,t)}g.prototype=Object.create(o.prototype),g.prototype.constructor=g,g.prototype.nodeType="Function",g.prototype.useKeywords=!0,g.prototype.getShared=function(){return!this.isMethod},g.prototype.getType=function(e){return e.getTypeByFormat(this.type)},g.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},g.prototype.getIncludeByName=function(e){for(var t=this.includes.length;t--;)if(this.includes[t].name===e)return this.includes[t]},g.prototype.generate=function(e,t){for(var n=0,i=this.src,r=0;r<this.includes.length;r++)e.include(this.includes[r],this);for(var o in this.extensions)e.extensions[o]=!0;for(var a=[];s=m.exec(this.src);)a.push(s);for(r=0;r<a.length;r++){var s,c=(s=a[r])[0],u=!this.isMethod||!this.getInputByName(c),l=c;if(this.keywords[c]||this.useKeywords&&u&&p.containsKeyword(c)){var d=this.keywords[c];if(!d){var h=p.getKeywordData(c);h.cache&&(d=e.keywords[c]),d=d||p.getKeyword(c,e),h.cache&&(e.keywords[c]=d)}l=d.build(e)}c!==l&&(i=i.substring(0,s.index+n)+l+i.substring(s.index+c.length+n),n+=l.length-c.length),void 0===this.getIncludeByName(l)&&p.contains(l)&&e.include(p.get(l))}return"source"===t?i:this.isMethod?(this.isInterface||e.include(this,!1,i),this.name):e.format("( "+i+" )",this.getType(e),t)},g.prototype.parse=function(e,t,n,i){if(this.src=e||"",this.includes=t||[],this.extensions=n||{},this.keywords=i||{},this.isMethod){var r=this.src.match(v);if(this.inputs=[],r&&4==r.length){this.type=r[1],this.name=r[2];var o=r[3].match(m);if(o)for(var a=0;a<o.length;){var s,c,u=o[a++];"in"===u||"out"===u||"inout"===u?s=o[a++]:(s=u,u=""),c=o[a++],this.inputs.push({name:c,type:s,qualifier:u})}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}},g.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.isMethod=e.isMethod,this.useKeywords=e.useKeywords,this.parse(e.src,e.includes,e.extensions,e.keywords),void 0!==e.type&&(this.type=e.type),this},g.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){for(var n in(t=this.createJSONNode(e)).src=this.src,t.isMethod=this.isMethod,t.useKeywords=this.useKeywords,this.isMethod||(t.type=this.type),t.extensions=JSON.parse(JSON.stringify(this.extensions)),t.keywords={},this.keywords)t.keywords[n]=this.keywords[n].toJSON(e).uuid;if(this.includes.length){t.includes=[];for(var i=0;i<this.includes.length;i++)t.includes.push(this.includes[i].toJSON(e).uuid)}}return t},y.prototype=Object.create(g.prototype),y.prototype.constructor=y,y.prototype.nodeType="Expression",b.prototype=Object.create(o.prototype),b.prototype.constructor=b,b.prototype.nodeType="FunctionCall",b.prototype.setFunction=function(e,t){this.value=e,this.inputs=t||[]},b.prototype.getFunction=function(){return this.value},b.prototype.getType=function(e){return this.value.getType(e)},b.prototype.generate=function(e,t){for(var n=this.getType(e),i=this.value,r=i.build(e,t)+"( ",o=[],a=0;a<i.inputs.length;a++){var s=i.inputs[a],c=this.inputs[a]||this.inputs[s.name];o.push(c.build(e,e.getTypeByFormat(s.type)))}return r+=o.join(", ")+" )",e.format(r,n,t)},b.prototype.copy=function(e){for(var t in o.prototype.copy.call(this,e),e.inputs)this.inputs[t]=e.inputs[t];return this.value=e.value,this},b.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){var n=this.value;if((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,n.inputs.length){t.inputs={};for(var i=0;i<n.inputs.length;i++){var r=n.inputs[i],o=this.inputs[i]||this.inputs[r.name];t.inputs[r.name]=o.toJSON(e).uuid}}}return t};var x,w,N={elements:["x","y","z","w"],addShortcuts:function(){function e(e,t,n){return n?{get:function(){return this[e][t][n]},set:function(i){this[e][t][n]=i}}:{get:function(){return this[e][t]},set:function(n){this[e][t]=n}}}return function(t,n,i){for(var r={},o=0;o<i.length;++o){var a=i[o].split("."),s=a[0],c=a[1];r[s]=e(n,s,c)}Object.defineProperties(t,r)}}()};function S(e){this.time=void 0!==e?e:0,this.id=0}function T(e){e=e||{},this.name=e.name,this.type=e.type,this.node=e.node,this.needsUpdate=e.needsUpdate}function C(e,t){a.call(this,"v2"),this.value=e instanceof i.Vector2?e:new i.Vector2(e,t)}function _(e,t,n){a.call(this,"v3"),this.value=e instanceof i.Vector3?e:new i.Vector3(e,t,n)}function O(e,t,n,r){a.call(this,"v4"),this.value=e instanceof i.Vector4?e:new i.Vector4(e,t,n,r)}function M(e){o.call(this,"v2",{shared:!1}),this.index=e||0}function E(e){a.call(this,"f"),this.value=e||0}function A(e,t){o.call(this,"v4"),this.input=e,this.method=t||A.LINEAR_TO_LINEAR}function L(e,t,n,i){a.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new M,this.bias=n,this.project=void 0!==i&&i}function D(e){o.call(this,"v3"),this.scope=e||D.LOCAL}function P(e){o.call(this,"v3"),this.scope=e||P.VIEW}function R(e){o.call(this,"v3"),this.scope=e||R.CUBE}function j(e,t,n){a.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new R,this.bias=n}function k(e,t,n){o.call(this),this.a=e,this.b=t,this.op=n}function I(e,t,n,i){o.call(this),this.a=e,"string"!=typeof t?this.b=t:i=t,"string"!=typeof n?this.c=n:i=n,this.method=i}function B(e,t,n){o.call(this,"v4"),this.value=e,this.uv=t,this.bias=n}function F(e,t,n){o.call(this,"v4"),this.value=e,this.radianceNode=new B(this.value,t||new R(R.VECTOR),n),this.irradianceNode=new B(this.value,new P(P.WORLD),new E(1).setReadonly(!0))}S.prototype={constructor:S,update:function(e){return++this.id,this.time+=e,this.delta=e,this},setRenderer:function(e){return this.renderer=e,this},setRenderTexture:function(e){return this.renderTexture=e,this},updateNode:function(e){return e.frameId===this.id||(e.updateFrame(this),e.frameId=this.id),this}},Object.defineProperties(T.prototype,{value:{get:function(){return this.node.value},set:function(e){this.node.value=e}}}),C.prototype=Object.create(a.prototype),C.prototype.constructor=C,C.prototype.nodeType="Vector2",N.addShortcuts(C.prototype,"value",["x","y"]),C.prototype.generateReadonly=function(e,t,n,i){return e.format("vec2( "+this.x+", "+this.y+" )",i,t)},C.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value.copy(e),this},C.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,!0===this.readonly&&(t.readonly=!0)),t},_.prototype=Object.create(a.prototype),_.prototype.constructor=_,_.prototype.nodeType="Vector3",N.addShortcuts(_.prototype,"value",["x","y","z"]),_.prototype.generateReadonly=function(e,t,n,i){return e.format("vec3( "+this.x+", "+this.y+", "+this.z+" )",i,t)},_.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value.copy(e),this},_.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,!0===this.readonly&&(t.readonly=!0)),t},O.prototype=Object.create(a.prototype),O.prototype.constructor=O,O.prototype.nodeType="Vector4",N.addShortcuts(O.prototype,"value",["x","y","z","w"]),O.prototype.generateReadonly=function(e,t,n,i){return e.format("vec4( "+this.x+", "+this.y+", "+this.z+", "+this.w+" )",i,t)},O.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value.copy(e),this},O.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,!0===this.readonly&&(t.readonly=!0)),t},M.prototype=Object.create(o.prototype),M.prototype.constructor=M,M.prototype.nodeType="UV",M.prototype.generate=function(e,t){e.requires.uv[this.index]=!0;var n=this.index>0?this.index+1:"",i=e.isShader("vertex")?"uv"+n:"vUv"+n;return e.format(i,this.getType(e),t)},M.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.index=e.index,this},M.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},p.addKeyword("uv",(function(){return new M})),p.addKeyword("uv2",(function(){return new M(1)})),E.prototype=Object.create(a.prototype),E.prototype.constructor=E,E.prototype.nodeType="Float",E.prototype.generateReadonly=function(e,t,n,i){return e.format(this.value+(this.value%1?"":".0"),i,t)},E.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value=e.value,this},E.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},A.Nodes={LinearToLinear:new g(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),GammaToLinear:new g(["vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );","}"].join("\n")),LinearToGamma:new g(["vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );","}"].join("\n")),sRGBToLinear:new g(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new g(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n")),RGBEToLinear:new g(["vec4 RGBEToLinear( in vec4 value ) {","\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );","}"].join("\n")),LinearToRGBE:new g(["vec4 LinearToRGBE( in vec4 value ) {","\tfloat maxComponent = max( max( value.r, value.g ), value.b );","\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );","\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );","}"].join("\n")),RGBMToLinear:new g(["vec3 RGBMToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.xyz * value.w * maxRange, 1.0 );","}"].join("\n")),LinearToRGBM:new g(["vec3 LinearToRGBM( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );","\tM            = ceil( M * 255.0 ) / 255.0;","\treturn vec4( value.rgb / ( M * maxRange ), M );","}"].join("\n")),RGBDToLinear:new g(["vec3 RGBDToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );","}"].join("\n")),LinearToRGBD:new g(["vec3 LinearToRGBD( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat D      = max( maxRange / maxRGB, 1.0 );","\tD            = clamp( floor( D ) / 255.0, 0.0, 1.0 );","\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );","}"].join("\n")),cLogLuvM:x=new c("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),LinearToLogLuv:new g(["vec4 LinearToLogLuv( in vec4 value ) {","\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;","\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));","\tvec4 vResult;","\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;","\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;","\tvResult.w = fract(Le);","\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;","\treturn vResult;","}"].join("\n"),[x]),cLogLuvInverseM:w=new c("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );"),LogLuvToLinear:new g(["vec4 LogLuvToLinear( in vec4 value ) {","\tfloat Le = value.z * 255.0 + value.w;","\tvec3 Xp_Y_XYZp;","\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);","\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;","\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;","\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;","\treturn vec4( max(vRGB, 0.0), 1.0 );","}"].join("\n"),[w])},A.LINEAR_TO_LINEAR="LinearToLinear",A.GAMMA_TO_LINEAR="GammaToLinear",A.LINEAR_TO_GAMMA="LinearToGamma",A.SRGB_TO_LINEAR="sRGBToLinear",A.LINEAR_TO_SRGB="LinearTosRGB",A.RGBE_TO_LINEAR="RGBEToLinear",A.LINEAR_TO_RGBE="LinearToRGBE",A.RGBM_TO_LINEAR="RGBMToLinear",A.LINEAR_TO_RGBM="LinearToRGBM",A.RGBD_TO_LINEAR="RGBDToLinear",A.LINEAR_TO_RGBD="LinearToRGBD",A.LINEAR_TO_LOG_LUV="LinearToLogLuv",A.LOG_LUV_TO_LINEAR="LogLuvToLinear",A.getEncodingComponents=function(e){switch(e){case i.LinearEncoding:return["Linear"];case i.sRGBEncoding:return["sRGB"];case i.RGBEEncoding:return["RGBE"];case i.RGBM7Encoding:return["RGBM",new E(7).setReadonly(!0)];case i.RGBM16Encoding:return["RGBM",new E(16).setReadonly(!0)];case i.RGBDEncoding:return["RGBD",new E(256).setReadonly(!0)];case i.GammaEncoding:return["Gamma",new y("float( GAMMA_FACTOR )","f")]}},A.prototype=Object.create(o.prototype),A.prototype.constructor=A,A.prototype.nodeType="ColorSpace",A.prototype.generate=function(e,t){var n=this.input.build(e,"v4"),i=this.getType(e),r=A.Nodes[this.method],o=e.include(r);if(o===A.LINEAR_TO_LINEAR)return e.format(n,i,t);if(2===r.inputs.length){var a=this.factor.build(e,"f");return e.format(o+"( "+n+", "+a+" )",i,t)}return e.format(o+"( "+n+" )",i,t)},A.prototype.fromEncoding=function(e){var t=A.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]},A.prototype.fromDecoding=function(e){var t=A.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]},A.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.input=e.input,this.method=e.method,this},A.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).input=this.input.toJSON(e).uuid,t.method=this.method),t},L.prototype=Object.create(a.prototype),L.prototype.constructor=L,L.prototype.nodeType="Texture",L.prototype.getTexture=function(e,t){return a.prototype.generate.call(this,e,t,this.value.uuid,"t")},L.prototype.generate=function(e,t){if("sampler2D"===t)return this.getTexture(e,t);var n,i,r=this.getTexture(e,t),o=this.uv.build(e,this.project?"v4":"v2"),a=this.bias?this.bias.build(e,"f"):void 0;void 0===a&&e.context.bias&&(a=e.context.bias.setTexture(this).build(e,"f")),n=this.project?"texture2DProj":a?"tex2DBias":"tex2D",i=a?n+"( "+r+", "+o+", "+a+" )":n+"( "+r+", "+o+" )";var s={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(s),this.colorSpace=this.colorSpace||new A(new y("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(i),i=this.colorSpace.build(e,c),e.removeContext(),e.format(i,c,t)},L.prototype.copy=function(e){return a.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),void 0!==e.project&&(this.project=e.project),this},L.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.uuid),t.uv=this.uv.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},D.LOCAL="local",D.WORLD="world",D.VIEW="view",D.PROJECTION="projection",D.prototype=Object.create(o.prototype),D.prototype.constructor=D,D.prototype.nodeType="Position",D.prototype.getType=function(){switch(this.scope){case D.PROJECTION:return"v4"}return this.type},D.prototype.getShared=function(){switch(this.scope){case D.LOCAL:case D.WORLD:return!1}return!0},D.prototype.generate=function(e,t){var n;switch(this.scope){case D.LOCAL:e.isShader("vertex")?n="transformed":(e.requires.position=!0,n="vPosition");break;case D.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,n="vWPosition";break;case D.VIEW:n=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case D.PROJECTION:n=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(n,this.getType(e),t)},D.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.scope=e.scope,this},D.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},p.addKeyword("position",(function(){return new D})),p.addKeyword("worldPosition",(function(){return new D(D.WORLD)})),p.addKeyword("viewPosition",(function(){return new D(D.VIEW)})),P.LOCAL="local",P.WORLD="world",P.VIEW="view",P.prototype=Object.create(o.prototype),P.prototype.constructor=P,P.prototype.nodeType="Normal",P.prototype.getShared=function(){return this.scope===P.WORLD},P.prototype.build=function(e,t,n,i){var r=e.context[this.scope+"Normal"];return r?r.build(e,t,n,i):o.prototype.build.call(this,e,t,n)},P.prototype.generate=function(e,t){var n;switch(this.scope){case P.VIEW:n=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case P.LOCAL:e.isShader("vertex")?n="objectNormal":(e.requires.normal=!0,n="vObjectNormal");break;case P.WORLD:e.isShader("vertex")?n="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,n="vWNormal")}return e.format(n,this.getType(e),t)},P.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.scope=e.scope,this},P.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},p.addKeyword("viewNormal",(function(){return new P(P.VIEW)})),p.addKeyword("localNormal",(function(){return new P(P.NORMAL)})),p.addKeyword("worldNormal",(function(){return new P(P.WORLD)})),R.CUBE="cube",R.SPHERE="sphere",R.VECTOR="vector",R.prototype=Object.create(o.prototype),R.prototype.constructor=R,R.prototype.nodeType="Reflect",R.prototype.getUnique=function(e){return!e.context.viewNormal},R.prototype.getType=function(){switch(this.scope){case R.SPHERE:return"v2"}return this.type},R.prototype.generate=function(e,t){var n=this.getUnique(e);if(e.isShader("fragment")){var i;switch(this.scope){case R.VECTOR:var r=new P(P.VIEW),o=e.context.roughness,a=r.build(e,"v3"),s=new D(D.VIEW).build(e,"v3"),c=o?o.build(e,"f"):void 0,u=`reflect( -normalize( ${s} ), ${a} )`;c&&(u=`normalize( mix( ${u}, ${a}, ${c} * ${c} ) )`);var l=`inverseTransformDirection( ${u}, viewMatrix )`;n?(e.addNodeCode(`vec3 reflectVec = ${l};`),i="reflectVec"):i=l;break;case R.CUBE:l="vec3( -"+(d=new R(R.VECTOR).build(e,"v3"))+".x, "+d+".yz )",n?(e.addNodeCode(`vec3 reflectCubeVec = ${l};`),i="reflectCubeVec"):i=l;break;case R.SPHERE:var d;l="normalize( ( viewMatrix * vec4( "+(d=new R(R.VECTOR).build(e,"v3"))+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5",n?(e.addNodeCode(`vec2 reflectSphereVec = ${l};`),i="reflectSphereVec"):i=l}return e.format(i,this.getType(e),t)}return console.warn("THREE.ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)},R.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},j.prototype=Object.create(a.prototype),j.prototype.constructor=j,j.prototype.nodeType="CubeTexture",j.prototype.getTexture=function(e,t){return a.prototype.generate.call(this,e,t,this.value.uuid,"tc")},j.prototype.generate=function(e,t){if("samplerCube"===t)return this.getTexture(e,t);var n,i=this.getTexture(e,t),r=this.uv.build(e,"v3"),o=this.bias?this.bias.build(e,"f"):void 0;void 0===o&&e.context.bias&&(o=e.context.bias.setTexture(this).build(e,"f")),n=o?"texCubeBias( "+i+", "+r+", "+o+" )":"texCube( "+i+", "+r+" )";var a={include:e.isShader("vertex"),ignoreCache:!0},s=this.getType(e);return e.addContext(a),this.colorSpace=this.colorSpace||new A(new y("",s)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(n),n=this.colorSpace.build(e,s),e.removeContext(),e.format(n,s,t)},j.prototype.copy=function(e){return a.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),this},j.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.uuid,t.uv=this.uv.toJSON(e).uuid,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t},k.ADD="+",k.SUB="-",k.MUL="*",k.DIV="/",k.prototype=Object.create(o.prototype),k.prototype.constructor=k,k.prototype.nodeType="Operator",k.prototype.getType=function(e){var t=this.a.getType(e),n=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(n)>e.getTypeLength(t)?n:t},k.prototype.generate=function(e,t){var n=this.getType(e),i=this.a.build(e,n),r=this.b.build(e,n);return e.format("( "+i+" "+this.op+" "+r+" )",n,t)},k.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this},k.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op),t},I.RAD="radians",I.DEG="degrees",I.EXP="exp",I.EXP2="exp2",I.LOG="log",I.LOG2="log2",I.SQRT="sqrt",I.INV_SQRT="inversesqrt",I.FLOOR="floor",I.CEIL="ceil",I.NORMALIZE="normalize",I.FRACT="fract",I.SATURATE="saturate",I.SIN="sin",I.COS="cos",I.TAN="tan",I.ASIN="asin",I.ACOS="acos",I.ARCTAN="atan",I.ABS="abs",I.SIGN="sign",I.LENGTH="length",I.NEGATE="negate",I.INVERT="invert",I.MIN="min",I.MAX="max",I.MOD="mod",I.STEP="step",I.REFLECT="reflect",I.DISTANCE="distance",I.DOT="dot",I.CROSS="cross",I.POW="pow",I.MIX="mix",I.CLAMP="clamp",I.REFRACT="refract",I.SMOOTHSTEP="smoothstep",I.FACEFORWARD="faceforward",I.prototype=Object.create(o.prototype),I.prototype.constructor=I,I.prototype.nodeType="Math",I.prototype.getNumInputs=function(){switch(this.method){case I.MIX:case I.CLAMP:case I.REFRACT:case I.SMOOTHSTEP:case I.FACEFORWARD:return 3;case I.MIN:case I.MAX:case I.MOD:case I.STEP:case I.REFLECT:case I.DISTANCE:case I.DOT:case I.CROSS:case I.POW:return 2;default:return 1}},I.prototype.getInputType=function(e){var t=e.getTypeLength(this.a.getType(e)),n=this.b?e.getTypeLength(this.b.getType(e)):0,i=this.c?e.getTypeLength(this.c.getType(e)):0;return t>n&&t>i?this.a.getType(e):n>i?this.b.getType(e):this.c.getType(e)},I.prototype.getType=function(e){switch(this.method){case I.LENGTH:case I.DISTANCE:case I.DOT:return"f";case I.CROSS:return"v3"}return this.getInputType(e)},I.prototype.generate=function(e,t){var n,i,r,o=this.a?e.getTypeLength(this.a.getType(e)):0,a=this.b?e.getTypeLength(this.b.getType(e)):0,s=this.c?e.getTypeLength(this.c.getType(e)):0,c=this.getInputType(e),u=this.getType(e);switch(this.method){case I.NEGATE:return e.format("( -"+this.a.build(e,c)+" )",c,t);case I.INVERT:return e.format("( 1.0 - "+this.a.build(e,c)+" )",c,t);case I.CROSS:n=this.a.build(e,"v3"),i=this.b.build(e,"v3");break;case I.STEP:n=this.a.build(e,1===o?"f":c),i=this.b.build(e,c);break;case I.MIN:case I.MAX:case I.MOD:n=this.a.build(e,c),i=this.b.build(e,1===a?"f":c);break;case I.REFRACT:n=this.a.build(e,c),i=this.b.build(e,c),r=this.c.build(e,"f");break;case I.MIX:n=this.a.build(e,c),i=this.b.build(e,c),r=this.c.build(e,1===s?"f":c);break;default:n=this.a.build(e,c),this.b&&(i=this.b.build(e,c)),this.c&&(r=this.c.build(e,c))}var l=[];l.push(n),i&&l.push(i),r&&l.push(r);var d=this.getNumInputs(e);if(l.length!==d)throw Error(`Arguments not match used in "${this.method}". Require ${d}, currently ${l.length}.`);return e.format(this.method+"( "+l.join(", ")+" )",u,t)},I.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.c=e.c,this.method=e.method,this},I.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,this.b&&(t.b=this.b.toJSON(e).uuid),this.c&&(t.c=this.c.toJSON(e).uuid),t.method=this.method),t},B.Nodes=function(){var e=new h("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new c("float cubeUV_maxMipLevel 8.0",!0),n=new c("float cubeUV_minMipLevel 4.0",!0),i=new c("float cubeUV_maxTileSize 256.0",!0),r=new c("float cubeUV_minTileSize 16.0",!0),o=new g("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");o.useKeywords=!1;var a=new g("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");a.useKeywords=!1;var s=new g("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,o,a,t,n,i,r]);s.useKeywords=!1;var u=new c("float r0 1.0",!0),l=new c("float v0 0.339",!0),d=new c("float m0 -2.0",!0);return{bilinearCubeUV:s,roughnessToMip:new g("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[u,l,d,new c("float r1 0.8",!0),new c("float v1 0.276",!0),new c("float m1 -1.0",!0),new c("float r4 0.4",!0),new c("float v4 0.046",!0),new c("float m4 2.0",!0),new c("float r5 0.305",!0),new c("float v5 0.016",!0),new c("float m5 3.0",!0),new c("float r6 0.21",!0),new c("float v6 0.0038",!0),new c("float m6 4.0",!0)]),m0:d,cubeUV_maxMipLevel:t}}(),B.prototype=Object.create(o.prototype),B.prototype.constructor=B,B.prototype.nodeType="TextureCubeUV",B.prototype.bilinearCubeUV=function(e,t,n,i){var r=new b(B.Nodes.bilinearCubeUV,[t,n,i]);this.colorSpaceTL=this.colorSpaceTL||new A(new y("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(r.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR||new A(new y("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(r.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL||new A(new y("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(r.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR||new A(new y("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(r.build(e)+".br");var o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new y(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new y(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new y(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new y(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();var a=new y("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=r,a},B.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=this.uv,i=this.bias||e.context.roughness,r=new I(new b(B.Nodes.roughnessToMip,[i]),B.Nodes.m0,B.Nodes.cubeUV_maxMipLevel,I.CLAMP),o=new I(r,I.FLOOR),a=new I(r,I.FRACT),s=new I(this.bilinearCubeUV(e,this.value,n,o),this.bilinearCubeUV(e,this.value,n,new k(o,new E(1).setReadonly(!0),k.ADD)),a,I.MIX);return e.format(s.build(e),"v4",t)}return console.warn("THREE.TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},B.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid),t},F.prototype=Object.create(o.prototype),F.prototype.constructor=F,F.prototype.nodeType="TextureCube",F.prototype.generate=function(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("THREE.TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))},F.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.value=e.value,this},F.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t};var z=N.elements,V=["float","vec2","vec3","vec4"],J={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b"},U={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4"};function q(){this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.requires={uv:[],color:[],lights:!1,fog:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:"",fragment:""},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={},this.updaters=[],this.nodes=[],this.analyzing=!1}function H(e){a.call(this,"b"),this.value=Boolean(e)}function G(e){a.call(this,"i"),this.value=Math.floor(e||0)}function W(e,t,n){a.call(this,"c"),this.value=e instanceof i.Color?e:new i.Color(e||0,t,n)}function $(e){a.call(this,"m3"),this.value=e||new i.Matrix3}function X(e){a.call(this,"m4"),this.value=e||new i.Matrix4}function Y(e){L.call(this,void 0,e)}function Z(e){o.call(this,"v4"),e&&this.setMirror(e)}function K(e,t,n){a.call(this,n),this.object=e,this.property=t}function Q(e){r.call(this,"v4"),this.value=e}function ee(e,t){i.ShaderMaterial.call(this);var n=this;this.vertex=e||new Q(new D(D.PROJECTION)),this.fragment=t||new Q(new W(16711680)),this.updaters=[],this.onBeforeCompile=function(e,t){var n=t.properties.get(this);this.version!==n.__version&&(this.build({renderer:t}),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader)},this.onBeforeCompile.toString=function(){return n.needsCompile}}function te(e,t,n,r){r=r||{},this.input=n,this.clear=void 0===r.clear||r.clear,this.renderTarget=new i.WebGLRenderTarget(e,t,r),this.material=new ee,this.camera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new i.Scene,this.quad=new i.Mesh(new i.PlaneBufferGeometry(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.render=!0,L.call(this,this.renderTarget.texture)}q.prototype={constructor:q,build:function(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(var n=0;n<this.requires.uv.length;n++)if(this.requires.uv[n]){var i=n>0?n+1:"";this.addVaryCode("varying vec2 vUv"+i+";"),n>0&&this.addVertexParsCode("attribute vec2 uv"+i+";"),this.addVertexFinalCode("vUv"+i+" = uv"+i+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this},buildShader:function(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")},setMaterial:function(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this},addFlow:function(e,t,n){return this.addSlot(e).addCache(t).addContext(n)},removeFlow:function(){return this.removeSlot().removeCache().removeContext()},addCache:function(e){return this.cache=e||"",this.caches.push(this.cache),this},removeCache:function(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this},addContext:function(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this},removeContext:function(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this},addSlot:function(e){return this.slot=e||"",this.slots.push(this.slot),this},removeSlot:function(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this},addVertexCode:function(e){this.addCode(e,"vertex")},addFragmentCode:function(e){this.addCode(e,"fragment")},addCode:function(e,t){this.code[t||this.shader]+=e+"\n"},addVertexNodeCode:function(e){this.addNodeCode(e,"vertex")},addFragmentNodeCode:function(e){this.addNodeCode(e,"fragment")},addNodeCode:function(e,t){this.nodeCode[t||this.shader]+=e+"\n"},clearNodeCode:function(e){e=e||this.shader;var t=this.nodeCode[e];return this.nodeCode[e]="",t},clearVertexNodeCode:function(){return this.clearNodeCode("vertex")},clearFragmentNodeCode:function(){return this.clearNodeCode("fragment")},addVertexFinalCode:function(e){this.addFinalCode(e,"vertex")},addFragmentFinalCode:function(e){this.addFinalCode(e,"fragment")},addFinalCode:function(e,t){this.finalCode[t||this.shader]+=e+"\n"},addVertexParsCode:function(e){this.addParsCode(e,"vertex")},addFragmentParsCode:function(e){this.addParsCode(e,"fragment")},addParsCode:function(e,t){this.parsCode[t||this.shader]+=e+"\n"},addVaryCode:function(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)},isCache:function(e){return-1!==this.caches.indexOf(e)},isSlot:function(e){return-1!==this.slots.indexOf(e)},define:function(e,t){this.defines[e]=void 0===t?1:t},require:function(e){this.requires[e]=!0},isDefined:function(e){return void 0!==this.defines[e]},getVar:function(e,t,n,i="varying",r="V",o=""){var a=this.getVars(i),s=a[e];if(!s){var c=a.length;s={name:n||"node"+r+c+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s},getTempVar:function(e,t,n,i){return this.getVar(e,t,n,this.shader,"T",i)},getAttribute:function(e,t){if(!this.attributes[e]){var n=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(n.name+" = "+e+";"),this.attributes[e]={varying:n,name:e,type:t}}return this.attributes[e]},getCode:function(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")},getVarListCode:function(e,t){t=t||"";for(var n="",i=0,r=e.length;i<r;++i){var o=e[i],a=o.type,s=o.name,c=this.getFormatByType(a);if(void 0===c)throw new Error("Node pars "+c+" not found.");n+=t+" "+c+" "+s+";\n"}return n},getVars:function(e){return this.inputs.vars[e||this.shader]},getNodeData:function(e){var t=e.isNode?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}},createUniform:function(e,t,n,i,r,o){var a=this.inputs.uniforms,s=a.list.length,c=new T({type:t,name:i||"nodeU"+s+(o?"_"+o:""),node:n,needsUpdate:r});return a.list.push(c),a[e].push(c),a[e][c.name]=c,this.uniforms[c.name]=c,c},createVertexUniform:function(e,t,n,i,r){return this.createUniform("vertex",e,t,n,i,r)},createFragmentUniform:function(e,t,n,i,r){return this.createUniform("fragment",e,t,n,i,r)},include:function(e,t,n){var i;if(e="string"==typeof e?p.get(e):e,!1===this.context.include)return e.name;e instanceof g?i=this.includes.functions:e instanceof c?i=this.includes.consts:e instanceof h&&(i=this.includes.structs);var r=i[this.shader]=i[this.shader]||[];if(e){var o=r[e.name];if(o||(o=r[e.name]={node:e,deps:[]},r.push(o),o.src=e.build(this,"source")),e instanceof g&&t&&r[t.name]&&-1==r[t.name].deps.indexOf(e)&&(r[t.name].deps.push(e),e.includes&&e.includes.length)){var a=0;do{this.include(e.includes[a++],t)}while(a<e.includes.length)}return n&&(o.src=n),e.name}throw new Error("Include not found.")},colorToVectorProperties:function(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")},colorToVector:function(e){return e.replace(/c/g,"v3")},getIncludes:function(e,t){return this.includes[e][t||this.shader]},getIncludesCode:function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,n){if(!(r=this.getIncludes(t,n)))return"";for(var i="",r=r.sort(e),o=0;o<r.length;o++)r[o].src&&(i+=r[o].src+"\n");return i}}(),getConstructorFromLength:function(e){return V[e-1]},isTypeMatrix:function(e){return/^m/.test(e)},getTypeLength:function(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))},getTypeFromLength:function(e){return 1===e?"f":"v"+e},findNode:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t&&t.isNode)return t}},resolve:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t){if(t.isNode)return t;if(t.isTexture)switch(t.mapping){case i.CubeReflectionMapping:case i.CubeRefractionMapping:return new j(t);case i.CubeUVReflectionMapping:case i.CubeUVRefractionMapping:return new F(new L(t));default:return new L(t)}else{if(t.isVector2)return new C(t);if(t.isVector3)return new _(t);if(t.isVector4)return new O(t)}}}},format:function(e,t,n){switch(this.colorToVector(n+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e},getTypeByFormat:function(e){return J[e]||e},getFormatByType:function(e){return U[e]||e},getUuid:function(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e},getElementByIndex:function(e){return z[e]},getIndexByElement:function(e){return z.indexOf(e)},isShader:function(e){return this.shader===e},setShader:function(e){return this.shader=e,this},mergeDefines:function(e){for(var t in e)this.defines[t]=e[t];return this.defines},mergeUniform:function(e){for(var t in e)this.uniforms[t]=e[t];return this.uniforms},getTextureEncodingFromMap:function(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=i.LinearEncoding,t===i.LinearEncoding&&this.context.gamma&&(t=i.GammaEncoding),t}},H.prototype=Object.create(a.prototype),H.prototype.constructor=H,H.prototype.nodeType="Bool",H.prototype.generateReadonly=function(e,t,n,i){return e.format(this.value,i,t)},H.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value=e.value,this},H.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},G.prototype=Object.create(a.prototype),G.prototype.constructor=G,G.prototype.nodeType="Int",G.prototype.generateReadonly=function(e,t,n,i){return e.format(this.value,i,t)},G.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value=e.value,this},G.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},W.prototype=Object.create(a.prototype),W.prototype.constructor=W,W.prototype.nodeType="Color",N.addShortcuts(W.prototype,"value",["r","g","b"]),W.prototype.generateReadonly=function(e,t,n,i){return e.format("vec3( "+this.r+", "+this.g+", "+this.b+" )",i,t)},W.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value.copy(e),this},W.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).r=this.r,t.g=this.g,t.b=this.b,!0===this.readonly&&(t.readonly=!0)),t},$.prototype=Object.create(a.prototype),$.prototype.constructor=$,$.prototype.nodeType="Matrix3",Object.defineProperties($.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),$.prototype.generateReadonly=function(e,t,n,i){return e.format("mat3( "+this.value.elements.join(", ")+" )",i,t)},$.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.value.fromArray(e.elements),this},$.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},X.prototype=Object.create(a.prototype),X.prototype.constructor=X,X.prototype.nodeType="Matrix4",Object.defineProperties(X.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),X.prototype.generateReadonly=function(e,t,n,i){return e.format("mat4( "+this.value.elements.join(", ")+" )",i,t)},X.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.scope.value.fromArray(e.elements),this},X.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},Y.prototype=Object.create(L.prototype),Y.prototype.constructor=Y,Y.prototype.nodeType="Screen",Y.prototype.getUnique=function(){return!0},Y.prototype.getTexture=function(e,t){return a.prototype.generate.call(this,e,t,this.getUuid(),"t","renderTexture")},Z.prototype=Object.create(o.prototype),Z.prototype.constructor=Z,Z.prototype.nodeType="Reflector",Z.prototype.setMirror=function(e){this.mirror=e,this.textureMatrix=new X(this.mirror.material.uniforms.textureMatrix.value),this.localPosition=new D(D.LOCAL),this.uv=new k(this.textureMatrix,this.localPosition,k.MUL),this.uvResult=new k(null,this.uv,k.ADD),this.texture=new L(this.mirror.material.uniforms.tDiffuse.value,this.uv,null,!0)},Z.prototype.generate=function(e,t){return e.isShader("fragment")?(this.uvResult.a=this.offset,this.texture.uv=this.offset?this.uvResult:this.uv,"sampler2D"===t?this.texture.build(e,t):e.format(this.texture.build(e,this.type),this.type,t)):(console.warn("THREE.ReflectorNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.type,t))},Z.prototype.copy=function(e){return a.prototype.copy.call(this,e),this.scope.mirror=e.mirror,this},Z.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).mirror=this.mirror.uuid,this.offset&&(t.offset=this.offset.toJSON(e).uuid)),t},K.prototype=Object.create(a.prototype),K.prototype.constructor=K,K.prototype.nodeType="Property",Object.defineProperties(K.prototype,{value:{get:function(){return this.object[this.property]},set:function(e){this.object[this.property]=e}}}),K.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,t.property=this.property),t},Q.prototype=Object.create(r.prototype),Q.prototype.constructor=Q,Q.prototype.nodeType="Raw",Q.prototype.generate=function(e){var t=this.value.analyzeAndFlow(e,this.type),n=t.code+"\n";return e.isShader("vertex")?n+="gl_Position = "+t.result+";":n+="gl_FragColor = "+t.result+";",n},Q.prototype.copy=function(e){return r.prototype.copy.call(this,e),this.value=e.value,this},Q.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t},ee.prototype=Object.create(i.ShaderMaterial.prototype),ee.prototype.constructor=ee,ee.prototype.type="NodeMaterial",ee.prototype.isNodeMaterial=!0,Object.defineProperties(ee.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){!0===e&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}}),ee.prototype.updateFrame=function(e){for(var t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])},ee.prototype.build=function(e){var t=(e=e||{}).builder||new q;return t.setMaterial(this,e.renderer),t.build(this.vertex,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters,this.fog=t.requires.fog,this.lights=t.requires.lights,this.transparent=t.requires.transparent||this.blending>i.NormalBlending,this},ee.prototype.copy=function(e){var t=this.uuid;for(var n in e)this[n]=e[n];return this.uuid=t,void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},ee.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.materials&&(e.materials={}),!e.materials[this.uuid]){var t={};t.uuid=this.uuid,t.type=this.type,e.materials[t.uuid]=t,""!==this.name&&(t.name=this.name),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==i.NormalBlending&&(t.blending=this.blending),!0===this.flatShading&&(t.flatShading=this.flatShading),this.side!==i.FrontSide&&(t.side=this.side),this.vertexColors!==i.NoColors&&(t.vertexColors=this.vertexColors),this.depthFunc!==i.LessEqualDepth&&(t.depthFunc=this.depthFunc),!1===this.depthTest&&(t.depthTest=this.depthTest),!1===this.depthWrite&&(t.depthWrite=this.depthWrite),1!==this.linewidth&&(t.linewidth=this.linewidth),void 0!==this.dashSize&&(t.dashSize=this.dashSize),void 0!==this.gapSize&&(t.gapSize=this.gapSize),void 0!==this.scale&&(t.scale=this.scale),!0===this.dithering&&(t.dithering=!0),!0===this.wireframe&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(t.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(t.wireframeLinejoin=this.wireframeLinejoin),this.alphaTest>0&&(t.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(t.premultipliedAlpha=this.premultipliedAlpha),!0===this.morphTargets&&(t.morphTargets=!0),!0===this.skinning&&(t.skinning=!0),!1===this.visible&&(t.visible=!1),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.fog=this.fog,t.lights=this.lights,t.vertex=this.vertex.toJSON(e).uuid,t.fragment=this.fragment.toJSON(e).uuid}return e.material=this.uuid,e},te.prototype=Object.create(L.prototype),te.prototype.constructor=te,te.prototype.nodeType="RTT",te.prototype.build=function(e,t,n){var i=new q;return i.nodes=e.nodes,i.updaters=e.updaters,this.material.fragment.value=this.input,this.material.build({builder:i}),L.prototype.build.call(this,e,t,n)},te.prototype.updateFramesaveTo=function(e){if(this.saveTo.render=!1,this.saveTo!==this.saveToCurrent){this.saveToMaterial&&this.saveToMaterial.dispose();var t=new ee;t.fragment.value=this,t.build();var n=new i.Scene,r=new i.Mesh(new i.PlaneBufferGeometry(2,2),t);r.frustumCulled=!1,n.add(r),this.saveToScene=n,this.saveToMaterial=t}this.saveToCurrent=this.saveTo,e.renderer.setRenderTarget(this.saveTo.renderTarget),this.saveTo.clear&&e.renderer.clear(),e.renderer.render(this.saveToScene,this.camera)},te.prototype.updateFrame=function(e){e.renderer?(this.saveTo&&!1===this.saveTo.render&&this.updateFramesaveTo(e),this.render&&(this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=e.renderTexture),e.renderer.setRenderTarget(this.renderTarget),this.clear&&e.renderer.clear(),e.renderer.render(this.scene,this.camera)),this.saveTo&&!0===this.saveTo.render&&this.updateFramesaveTo(e)):console.warn("RTTNode need a renderer in NodeFrame")},te.prototype.copy=function(e){return L.prototype.copy.call(this,e),this.saveTo=e.saveTo,this},te.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=L.prototype.toJSON.call(this,e),this.saveTo&&(t.saveTo=this.saveTo.toJSON(e).uuid)),t};var ne,ie=["color","color2"],re=["vColor","vColor2"];function oe(e){o.call(this,"v4",{shared:!1}),this.index=e||0}function ae(e,t){o.call(this,"v3"),this.setScope(e||ae.POSITION),this.setCamera(t)}function se(e){o.call(this,"v3",{shared:!1}),this.scope=e||se.TOTAL}function ce(){C.call(this),this.size=new i.Vector2}function ue(e){o.call(this,"v2"),this.resolution=e||new ce}function le(e,t,n,i,r){o.call(this),this.a=e,this.b=t,this.op=n,this.ifNode=i,this.elseNode=r}function de(e){o.call(this,"f"),this.uv=e||new M}function he(e){o.call(this,"f"),this.uv=e||new M}function fe(e,t){o.call(this,"v3"),this.value=e,this.scale=t||new C(1,1)}function pe(e,t){o.call(this,"v3"),this.value=e,this.scale=t||new E(1),this.toNormalMap=!1}function ve(e,t){r.call(this),this.code=e,this.value=t}oe.prototype=Object.create(o.prototype),oe.prototype.constructor=oe,oe.prototype.nodeType="Colors",oe.prototype.generate=function(e,t){e.requires.color[this.index]=!0;var n=e.isShader("vertex")?ie[this.index]:re[this.index];return e.format(n,this.getType(e),t)},oe.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.index=e.index,this},oe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},ae.Nodes={depthColor:new g(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n"))},ae.POSITION="position",ae.DEPTH="depth",ae.TO_VERTEX="toVertex",ae.prototype=Object.create(o.prototype),ae.prototype.constructor=ae,ae.prototype.nodeType="Camera",ae.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},ae.prototype.setScope=function(e){switch(this.scope){case ae.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case ae.DEPTH:var t=this.camera;this.near=new E(t?t.near:1),this.far=new E(t?t.far:1200)}},ae.prototype.getType=function(){switch(this.scope){case ae.DEPTH:return"f"}return this.type},ae.prototype.getUnique=function(){switch(this.scope){case ae.DEPTH:case ae.TO_VERTEX:return!0}return!1},ae.prototype.getShared=function(){switch(this.scope){case ae.POSITION:return!1}return!0},ae.prototype.generate=function(e,t){var n;switch(this.scope){case ae.POSITION:n="cameraPosition";break;case ae.DEPTH:n=e.include(ae.Nodes.depthColor)+"( "+this.near.build(e,"f")+", "+this.far.build(e,"f")+" )";break;case ae.TO_VERTEX:n="normalize( "+new D(D.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(n,this.getType(e),t)},ae.prototype.onUpdateFrame=function(){switch(this.scope){case ae.DEPTH:var e=this.camera;this.near.value=e.near,this.far.value=e.far}},ae.prototype.copy=function(e){switch(o.prototype.copy.call(this,e),this.setScope(e.scope),e.camera&&this.setCamera(e.camera),e.scope){case ae.DEPTH:this.near.number=e.near,this.far.number=e.far}return this},ae.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)switch((t=this.createJSONNode(e)).scope=this.scope,this.camera&&(t.camera=this.camera.uuid),this.scope){case ae.DEPTH:t.near=this.near.value,t.far=this.far.value}return t},se.TOTAL="total",se.prototype=Object.create(o.prototype),se.prototype.constructor=se,se.prototype.nodeType="Light",se.prototype.generate=function(e,t){return e.isCache("light")?e.format("reflectedLight.directDiffuse",this.type,t):(console.warn('THREE.LightNode is only compatible in "light" channel.'),e.format("vec3( 0.0 )",this.type,t))},se.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.scope=e.scope,this},se.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},ce.prototype=Object.create(C.prototype),ce.prototype.constructor=ce,ce.prototype.nodeType="Resolution",ce.prototype.updateFrame=function(e){if(e.renderer){e.renderer.getSize(this.size);var t=e.renderer.getPixelRatio();this.x=this.size.width*t,this.y=this.size.height*t}else console.warn("ResolutionNode need a renderer in NodeFrame")},ce.prototype.copy=function(e){return C.prototype.copy.call(this,e),this.renderer=e.renderer,this},ce.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).renderer=this.renderer.uuid),t},ue.prototype=Object.create(o.prototype),ue.prototype.constructor=ue,ue.prototype.nodeType="ScreenUV",ue.prototype.generate=function(e,t){var n;return e.isShader("fragment")?n="( gl_FragCoord.xy / "+this.resolution.build(e,"v2")+")":(console.warn("THREE.ScreenUVNode is not compatible with "+e.shader+" shader."),n="vec2( 0.0 )"),e.format(n,this.getType(e),t)},ue.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.resolution=e.resolution,this},ue.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).resolution=this.resolution.toJSON(e).uuid),t},le.EQUAL="==",le.NOT_EQUAL="!=",le.GREATER=">",le.GREATER_EQUAL=">=",le.LESS="<",le.LESS_EQUAL="<=",le.prototype=Object.create(o.prototype),le.prototype.constructor=le,le.prototype.nodeType="Cond",le.prototype.getType=function(e){if(this.ifNode){var t=this.ifNode.getType(e),n=this.elseNode.getType(e);return e.getTypeLength(n)>e.getTypeLength(t)?n:t}return"b"},le.prototype.getCondType=function(e){return e.getTypeLength(this.b.getType(e))>e.getTypeLength(this.a.getType(e))?this.b.getType(e):this.a.getType(e)},le.prototype.generate=function(e,t){var n,i=this.getType(e),r=this.getCondType(e),o=this.a.build(e,r),a=this.b.build(e,r);if(this.ifNode){var s=this.ifNode.build(e,i),c=this.elseNode.build(e,i);n="( "+[o,this.op,a,"?",s,":",c].join(" ")+" )"}else n="( "+o+" "+this.op+" "+a+" )";return e.format(n,this.getType(e),t)},le.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this.ifNode=e.ifNode,this.elseNode=e.elseNode,this},le.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op,t.ifNode&&(t.ifNode=this.ifNode.toJSON(e).uuid),t.elseNode&&(t.elseNode=this.elseNode.toJSON(e).uuid)),t},de.prototype=Object.create(o.prototype),de.prototype.constructor=de,de.prototype.nodeType="Noise",de.Nodes={snoise:new g(["float snoise(vec2 co) {","\treturn fract( sin( dot( co.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );","}"].join("\n"))},de.prototype.generate=function(e,t){var n=e.include(de.Nodes.snoise);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},de.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.uv=e.uv,this},de.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},he.prototype=Object.create(o.prototype),he.prototype.constructor=he,he.prototype.nodeType="Noise",he.Nodes={checker:new g(["float checker( vec2 uv ) {","\tfloat cx = floor( uv.x );","\tfloat cy = floor( uv.y ); ","\tfloat result = mod( cx + cy, 2.0 );","\treturn sign( result );","}"].join("\n"))},he.prototype.generate=function(e,t){var n=e.include(he.Nodes.checker);return e.format(n+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},he.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.uv=e.uv,this},he.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},fe.Nodes={perturbNormal2Arb:new g("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 vUv, vec2 normalScale ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = map * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\n\t\t\tif ( dot( cross( S, T ), N ) < 0.0 ) mapN.xy *= - 1.0;\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}",null,{derivatives:!0})},fe.prototype=Object.create(o.prototype),fe.prototype.constructor=fe,fe.prototype.nodeType="NormalMap",fe.prototype.generate=function(e,t){if(e.isShader("fragment")){var n=e.include(fe.Nodes.perturbNormal2Arb);this.normal=this.normal||new P,this.position=this.position||new D(D.VIEW),this.uv=this.uv||new M;var r=this.scale.build(e,"v2");return e.material.side===i.BackSide&&(r="-"+r),e.format(n+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+this.value.build(e,"v3")+", "+this.uv.build(e,"v2")+", "+r+" )",this.getType(e),t)}return console.warn("THREE.NormalMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},fe.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},fe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},pe.Nodes={dHdxy_fwd:ne=new g(["vec2 dHdxy_fwd( sampler2D bumpMap, vec2 vUv, float bumpScale ) {","\tvec2 dSTdx = dFdx( vUv );","\tvec2 dSTdy = dFdy( vUv );","\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;","\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","\treturn vec2( dBx, dBy );","}"].join("\n"),null,{derivatives:!0}),perturbNormalArb:new g(["vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );","\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );","\tvec3 vN = surf_norm;","\tvec3 R1 = cross( vSigmaY, vN );","\tvec3 R2 = cross( vN, vSigmaX );","\tfloat fDet = dot( vSigmaX, R1 );","\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );","\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","\treturn normalize( abs( fDet ) * surf_norm - vGrad );","}"].join("\n"),[ne],{derivatives:!0}),bumpToNormal:new g(["vec3 bumpToNormal( sampler2D bumpMap, vec2 uv, float scale ) {","\tvec2 dSTdx = dFdx( uv );","\tvec2 dSTdy = dFdy( uv );","\tfloat Hll = texture2D( bumpMap, uv ).x;","\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;","\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;","\treturn vec3( .5 - ( dBx * scale ), .5 - ( dBy * scale ), 1.0 );","}"].join("\n"),null,{derivatives:!0})},pe.prototype=Object.create(o.prototype),pe.prototype.constructor=pe,pe.prototype.nodeType="BumpMap",pe.prototype.generate=function(e,t){if(e.isShader("fragment")){if(this.toNormalMap){var n=e.include(pe.Nodes.bumpToNormal);return e.format(n+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )",this.getType(e),t)}var i=e.include(pe.Nodes.dHdxy_fwd),r=e.include(pe.Nodes.perturbNormalArb);this.normal=this.normal||new P,this.position=this.position||new D(D.VIEW);var o=i+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )";return e.format(r+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+o+" )",this.getType(e),t)}return console.warn("THREE.BumpMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},pe.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},pe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},ve.prototype=Object.create(r.prototype),ve.prototype.constructor=ve,ve.prototype.nodeType="Bypass",ve.prototype.getType=function(e){return this.value?this.value.getType(e):e.isShader("fragment")?"f":"void"},ve.prototype.generate=function(e,t){var n=this.code.build(e,t)+";";return e.addNodeCode(n),e.isShader("vertex")?this.value?this.value.build(e,t):void 0:this.value?this.value.build(e,t):e.format("0.0","f",t)},ve.prototype.copy=function(e){return r.prototype.copy.call(this,e),this.code=e.code,this.value=e.value,this},ve.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).code=this.code.toJSON(e).uuid,this.value&&(t.value=this.value.toJSON(e).uuid)),t};var me,ge=N.elements;function ye(e,t,n,i){o.call(this,"f"),this.x=e,this.y=t,this.z=n,this.w=i}function be(e,t){r.call(this),this.node=e,this.components=t||"x"}function xe(e,t,n){E.call(this),this.scale=void 0!==e?e:1,this.scope=t||xe.GLOBAL,this.timeScale=void 0!==n?n:void 0!==e}function we(e,t){_.call(this),this.params={},this.velocity=new i.Vector3,this.setTarget(e),this.setParams(t)}function Ne(e,t){y.call(this,"( uvTransform * vec3( uvNode, 1 ) ).xy","vec2"),this.uv=e||new M,this.position=t||new $}function Se(e){E.call(this),this.texture=e,this.maxMIPLevel=0}function Te(e,t){o.call(this,"f"),this.roughness=e,this.texture=t,this.maxMIPLevel=void 0}function Ce(e){o.call(this),this.slots=e||{}}function _e(e,t,n,i){o.call(this,"v4"),this.value=e,this.uv=t||new M,this.radius=n||new C(1,1),this.size=i,this.blurX=!0,this.blurY=!0,this.horizontal=new E(1/64),this.vertical=new E(1/64)}function Oe(e){o.call(this,"f"),this.rgb=e}function Me(e,t,n){o.call(this,"v3"),this.rgb=e,this.adjustment=t,this.method=n||Me.SATURATION}function Ee(){r.call(this),this.color=new W(15658734),this.spherical=!0}function Ae(){r.call(this),this.color=new W(15658734),this.specular=new W(1118481),this.shininess=new E(30)}function Le(){r.call(this),this.color=new W(16777215),this.roughness=new E(1),this.metalness=new E(0)}function De(){Le.call(this),this.properties={color:new i.Color(16777215),roughness:.5,metalness:.5,normalScale:new i.Vector2(1,1)},this.inputs={color:new K(this.properties,"color","c"),roughness:new K(this.properties,"roughness","f"),metalness:new K(this.properties,"metalness","f"),normalScale:new K(this.properties,"normalScale","v2")}}function Pe(){var e=new Ee;ee.call(this,e,e),this.type="SpriteNodeMaterial"}function Re(){var e=new Ae;ee.call(this,e,e),this.type="PhongNodeMaterial"}function je(){var e=new Le;ee.call(this,e,e),this.type="StandardNodeMaterial"}function ke(){var e=new De;ee.call(this,e,e),this.type="MeshStandardNodeMaterial"}function Ie(e,t){if(void 0===t){var n={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,stencilBuffer:!1},r=e.getDrawingBufferSize(new i.Vector2);t=new i.WebGLRenderTarget(r.width,r.height,n)}this.renderer=e,this.renderTarget=t,this.output=new Y,this.material=new ee,this.camera=new i.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new i.Scene,this.quad=new i.Mesh(new i.PlaneBufferGeometry(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.needsUpdate=!0}ye.prototype=Object.create(o.prototype),ye.prototype.constructor=ye,ye.prototype.nodeType="Join",ye.prototype.getNumElements=function(){for(var e=ge.length;e--;)if(void 0!==this[ge[e]]){++e;break}return Math.max(e,2)},ye.prototype.getType=function(e){return e.getTypeFromLength(this.getNumElements())},ye.prototype.generate=function(e,t){for(var n=this.getType(e),i=this.getNumElements(),r=[],o=0;o<i;o++){var a=this[ge[o]];r.push(a?a.build(e,"f"):"0.0")}var s=(i>1?e.getConstructorFromLength(i):"")+"( "+r.join(", ")+" )";return e.format(s,n,t)},ye.prototype.copy=function(e){for(var t in o.prototype.copy.call(this,e),e.inputs)this[t]=e.inputs[t];return this},ye.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){(t=this.createJSONNode(e)).inputs={};for(var n=this.getNumElements(),i=0;i<n;i++){var r=this[ge[i]];r&&(t.inputs[ge[i]]=r.toJSON(e).uuid)}}return t},be.prototype=Object.create(r.prototype),be.prototype.constructor=be,be.prototype.nodeType="Switch",be.prototype.getType=function(e){return e.getTypeFromLength(this.components.length)},be.prototype.generate=function(e,t){var n=this.node.getType(e),i=this.node.build(e,n),r=e.getTypeLength(n)-1;if(r>0){var o,a=0,s=e.colorToVectorProperties(this.components),c=s.length;for(o=0;o<c;o++)a=Math.max(a,e.getIndexByElement(s.charAt(o)));for(a>r&&(a=r),i+=".",o=0;o<c;o++){var u=e.getIndexByElement(s.charAt(o));u>a&&(u=a),i+=e.getElementByIndex(u)}return e.format(i,this.getType(e),t)}return e.format(i,n,t)},be.prototype.copy=function(e){return r.prototype.copy.call(this,e),this.node=e.node,this.components=e.components,this},be.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).node=this.node.toJSON(e).uuid,t.components=this.components),t},xe.GLOBAL="global",xe.LOCAL="local",xe.DELTA="delta",xe.prototype=Object.create(E.prototype),xe.prototype.constructor=xe,xe.prototype.nodeType="Timer",xe.prototype.getReadonly=function(){return!1},xe.prototype.getUnique=function(){return this.timeScale&&(this.scope===xe.GLOBAL||this.scope===xe.DELTA)},xe.prototype.updateFrame=function(e){var t=this.timeScale?this.scale:1;switch(this.scope){case xe.LOCAL:this.value+=e.delta*t;break;case xe.DELTA:this.value=e.delta*t;break;default:this.value=e.time*t}},xe.prototype.copy=function(e){return E.prototype.copy.call(this,e),this.scope=e.scope,this.scale=e.scale,this.timeScale=e.timeScale,this},xe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope,t.scale=this.scale,t.timeScale=this.timeScale),t},p.addKeyword("time",(function(){return new xe})),we.prototype=Object.create(_.prototype),we.prototype.constructor=we,we.prototype.nodeType="Velocity",we.prototype.getReadonly=function(){return!1},we.prototype.setParams=function(e){switch(this.params.type){case"elastic":delete this.moment,delete this.speed,delete this.springVelocity,delete this.lastVelocity}switch(this.params=e||{},this.params.type){case"elastic":this.moment=new i.Vector3,this.speed=new i.Vector3,this.springVelocity=new i.Vector3,this.lastVelocity=new i.Vector3}},we.prototype.setTarget=function(e){this.target&&(delete this.position,delete this.oldPosition),this.target=e,e&&(this.position=e.getWorldPosition(this.position||new i.Vector3),this.oldPosition=this.position.clone())},we.prototype.updateFrameVelocity=function(){this.target&&(this.position=this.target.getWorldPosition(this.position||new i.Vector3),this.velocity.subVectors(this.position,this.oldPosition),this.oldPosition.copy(this.position))},we.prototype.updateFrame=function(e){switch(this.updateFrameVelocity(e),this.params.type){case"elastic":var t=e.delta*(this.params.fps||60),n=Math.pow(this.params.spring,t),i=Math.pow(this.params.damping,t);this.velocity.multiplyScalar(Math.exp(-this.params.damping*t)),this.velocity.add(this.springVelocity),this.velocity.add(this.speed.multiplyScalar(i).multiplyScalar(1-n)),this.speed.subVectors(this.velocity,this.lastVelocity),this.springVelocity.add(this.speed),this.springVelocity.multiplyScalar(n),this.moment.add(this.springVelocity),this.moment.multiplyScalar(i),this.lastVelocity.copy(this.velocity),this.value.copy(this.moment);break;default:this.value.copy(this.velocity)}},we.prototype.copy=function(e){return _.prototype.copy.call(this,e),e.target&&this.setTarget(e.target),this.setParams(e.params),this},we.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.target&&(t.target=this.target.uuid),t.params=JSON.parse(JSON.stringify(this.params))),t},Ne.prototype=Object.create(y.prototype),Ne.prototype.constructor=Ne,Ne.prototype.nodeType="UVTransform",Ne.prototype.generate=function(e,t){return this.keywords.uvNode=this.uv,this.keywords.uvTransform=this.position,y.prototype.generate.call(this,e,t)},Ne.prototype.setUvTransform=function(e,t,n,i,r,o,a){o=void 0!==o?o:.5,a=void 0!==a?a:.5,this.position.value.setUvTransform(e,t,n,i,r,o,a)},Ne.prototype.copy=function(e){return y.prototype.copy.call(this,e),this.uv=e.uv,this.position=e.position,this},Ne.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid,t.position=this.position.toJSON(e).uuid),t},Se.prototype=Object.create(E.prototype),Se.prototype.constructor=Se,Se.prototype.nodeType="MaxMIPLevel",Object.defineProperties(Se.prototype,{value:{get:function(){if(0===this.maxMIPLevel){var e=this.texture.value.image;Array.isArray(e)&&(e=e[0]),this.maxMIPLevel=void 0!==e?Math.log(Math.max(e.width,e.height))*Math.LOG2E:0}return this.maxMIPLevel},set:function(){}}}),Se.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture.uuid),t},Te.Nodes={getSpecularMIPLevel:new g(["float getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {","\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );","\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );","\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );","}"].join("\n"))},Te.prototype=Object.create(o.prototype),Te.prototype.constructor=Te,Te.prototype.nodeType="SpecularMIPLevel",Te.prototype.setTexture=function(e){return this.texture=e,this},Te.prototype.generate=function(e,t){if(e.isShader("fragment")){this.maxMIPLevel=this.maxMIPLevel||new Se,this.maxMIPLevel.texture=this.texture;var n=e.include(Te.Nodes.getSpecularMIPLevel);return e.format(n+"( "+this.roughness.build(e,"f")+", "+this.maxMIPLevel.build(e,"f")+" )",this.type,t)}return console.warn("THREE.SpecularMIPLevelNode is not compatible with "+e.shader+" shader."),e.format("0.0",this.type,t)},Te.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.texture=e.texture,this.roughness=e.roughness,this},Te.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture,t.roughness=this.roughness),t},Ce.prototype=Object.create(o.prototype),Ce.prototype.constructor=Ce,Ce.prototype.nodeType="SubSlot",Ce.prototype.getType=function(e,t){return t},Ce.prototype.generate=function(e,t){return this.slots[e.slot]?this.slots[e.slot].build(e,t):e.format("0.0","f",t)},Ce.prototype.copy=function(e){for(var t in o.prototype.copy.call(this,e),e.slots)this.slots[t]=e.slots[t];return this},Ce.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)for(var n in(t=this.createJSONNode(e)).slots={},this.slots){var i=this.slots[n];i&&(t.slots[n]=i.toJSON(e).uuid)}return t},_e.Nodes={blurX:new g(["vec4 blurX( sampler2D tex, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tex, vec2( uv.x - 4.0 * s, uv.y ) ) * 0.051;","\tsum += texture2D( tex, vec2( uv.x - 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x - 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x - 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( tex, vec2( uv.x + 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x + 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x + 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x + 4.0 * s, uv.y ) ) * 0.051;","\treturn sum * .667;","}"].join("\n")),blurY:new g(["vec4 blurY( sampler2D tex, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tex, vec2( uv.x, uv.y - 4.0 * s ) ) * 0.051;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 3.0 * s ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 2.0 * s ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 1.0 * s ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 1.0 * s ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 2.0 * s ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 3.0 * s ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 4.0 * s ) ) * 0.051;","\treturn sum * .667;","}"].join("\n"))},_e.prototype=Object.create(o.prototype),_e.prototype.constructor=_e,_e.prototype.nodeType="Blur",_e.prototype.updateFrame=function(){if(this.size)this.horizontal.value=this.radius.x/this.size.x,this.vertical.value=this.radius.y/this.size.y;else if(this.value.value&&this.value.value.image){var e=this.value.value.image;this.horizontal.value=this.radius.x/e.width,this.vertical.value=this.radius.y/e.height}},_e.prototype.generate=function(e,t){if(e.isShader("fragment")){var n,i=[],r=e.include(_e.Nodes.blurX),o=e.include(_e.Nodes.blurY);return this.blurX&&i.push(r+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.horizontal.build(e,"f")+" )"),this.blurY&&i.push(o+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.vertical.build(e,"f")+" )"),n=2==i.length?"( "+i.join(" + ")+" / 2.0 )":i.length?"( "+i[0]+" )":"vec4( 0.0 )",e.format(n,this.getType(e),t)}return console.warn("THREE.BlurNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},_e.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.value=e.value,this.uv=e.uv,this.radius=e.radius,void 0!==e.size&&(this.size=new i.Vector2(e.size.x,e.size.y)),this.blurX=e.blurX,this.blurY=e.blurY,this},_e.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.radius=this.radius.toJSON(e).uuid,this.size&&(t.size={x:this.size.x,y:this.size.y}),t.blurX=this.blurX,t.blurY=this.blurY),t},Oe.Nodes={LUMA:me=new c("vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )"),luminance:new g(["float luminance( vec3 rgb ) {","\treturn dot( rgb, LUMA );","}"].join("\n"),[me])},Oe.prototype=Object.create(o.prototype),Oe.prototype.constructor=Oe,Oe.prototype.nodeType="Luminance",Oe.prototype.generate=function(e,t){var n=e.include(Oe.Nodes.luminance);return e.format(n+"( "+this.rgb.build(e,"v3")+" )",this.getType(e),t)},Oe.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.rgb=e.rgb,this},Oe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid),t},Me.Nodes={hue:new g(["vec3 hue(vec3 rgb, float adjustment) {","\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);","\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);","\tvec3 yiq = RGBtoYIQ * rgb;","\tfloat hue = atan(yiq.z, yiq.y) + adjustment;","\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);","\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));","}"].join("\n")),saturation:new g(["vec3 saturation(vec3 rgb, float adjustment) {","\tvec3 intensity = vec3( luminance( rgb ) );","\treturn mix( intensity, rgb, adjustment );","}"].join("\n"),[Oe.Nodes.luminance]),vibrance:new g(["vec3 vibrance(vec3 rgb, float adjustment) {","\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;","\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));","\tfloat amt = (mx - average) * (-3.0 * adjustment);","\treturn mix(rgb.rgb, vec3(mx), amt);","}"].join("\n"))},Me.SATURATION="saturation",Me.HUE="hue",Me.VIBRANCE="vibrance",Me.BRIGHTNESS="brightness",Me.CONTRAST="contrast",Me.prototype=Object.create(o.prototype),Me.prototype.constructor=Me,Me.prototype.nodeType="ColorAdjustment",Me.prototype.generate=function(e,t){var n=this.rgb.build(e,"v3"),i=this.adjustment.build(e,"f");switch(this.method){case Me.BRIGHTNESS:return e.format("( "+n+" + "+i+" )",this.getType(e),t);case Me.CONTRAST:return e.format("( "+n+" * "+i+" )",this.getType(e),t)}var r=e.include(Me.Nodes[this.method]);return e.format(r+"( "+n+", "+i+" )",this.getType(e),t)},Me.prototype.copy=function(e){return o.prototype.copy.call(this,e),this.rgb=e.rgb,this.adjustment=e.adjustment,this.method=e.method,this},Me.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid,t.adjustment=this.adjustment.toJSON(e).uuid,t.method=this.method),t},Ee.prototype=Object.create(r.prototype),Ee.prototype.constructor=Ee,Ee.prototype.nodeType="Sprite",Ee.prototype.build=function(e){if(e.define("SPRITE"),e.requires.lights=!1,e.requires.transparent=void 0!==this.alpha,e.isShader("vertex")){var t=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(i.UniformsUtils.merge([i.UniformsLib.fog])),e.addParsCode(["#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n")),a=["#include <clipping_planes_fragment>","#include <begin_vertex>"],t&&a.push(t.code,t.result?"transformed = "+t.result+";":""),a.push("#include <project_vertex>","#include <fog_vertex>","mat4 modelViewMtx = modelViewMatrix;","mat4 modelMtx = modelMatrix;","modelMtx[3][0] = 0.0;","modelMtx[3][1] = 0.0;","modelMtx[3][2] = 0.0;"),this.spherical||a.push("modelMtx[1][1] = 1.0;"),a.push("modelViewMtx[0][0] = 1.0;","modelViewMtx[0][1] = 0.0;","modelViewMtx[0][2] = 0.0;"),this.spherical&&a.push("modelViewMtx[1][0] = 0.0;","modelViewMtx[1][1] = 1.0;","modelViewMtx[1][2] = 0.0;"),a.push("modelViewMtx[2][0] = 0.0;","modelViewMtx[2][1] = 0.0;","modelViewMtx[2][2] = 1.0;","gl_Position = projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","#include <fog_vertex>")}else{e.addParsCode(["#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>"].join("\n")),e.addCode(["#include <clipping_planes_fragment>","#include <logdepthbuf_fragment>"].join("\n")),this.mask&&this.mask.analyze(e),this.alpha&&this.alpha.analyze(e),this.color.analyze(e,{slot:"color"});var n=this.mask?this.mask.flow(e,"b"):void 0,r=this.alpha?this.alpha.flow(e,"f"):void 0,o=this.color.flow(e,"c",{slot:"color"}),a=[];n&&a.push(n.code,"if ( ! "+n.result+" ) discard;"),r?a.push(r.code,"#ifdef ALPHATEST","if ( "+r.result+" <= ALPHATEST ) discard;","#endif",o.code,"gl_FragColor = vec4( "+o.result+", "+r.result+" );"):a.push(o.code,"gl_FragColor = vec4( "+o.result+", 1.0 );"),a.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>")}return a.join("\n")},Ee.prototype.copy=function(e){return r.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,void 0!==e.spherical&&(this.spherical=e.spherical),e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),this},Ee.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,!1===this.spherical&&(t.spherical=!1),this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid)),t},Ae.prototype=Object.create(r.prototype),Ae.prototype.constructor=Ae,Ae.prototype.nodeType="Phong",Ae.prototype.build=function(e){var t;if(e.define("PHONG"),e.requires.lights=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(i.UniformsUtils.merge([i.UniformsLib.fog,i.UniformsLib.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var r=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&r.push(n.code,n.result?"transformed = "+n.result+";":""),r.push("\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=r.join("\n")}else{this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&this.environment.analyze(e,{slot:"environment"}),this.environmentAlpha&&this.environment&&this.environmentAlpha.analyze(e);var o=this.mask?this.mask.flow(e,"b"):void 0,a=this.color.flow(e,"c",{slot:"color"}),s=this.specular.flow(e,"c"),c=this.shininess.flow(e,"f"),u=this.alpha?this.alpha.flow(e,"f"):void 0,l=this.normal?this.normal.flow(e,"v3"):void 0,d=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,h=this.ao?this.ao.flow(e,"f"):void 0,f=this.ambient?this.ambient.flow(e,"c"):void 0,p=this.shadow?this.shadow.flow(e,"c"):void 0,v=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0,m=this.environment?this.environment.flow(e,"c",{slot:"environment"}):void 0,g=this.environmentAlpha&&this.environment?this.environmentAlpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==u,e.addParsCode(["#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n")),r=["#include <normal_fragment_begin>","\tBlinnPhongMaterial material;"],o&&r.push(o.code,"if ( ! "+o.result+" ) discard;"),r.push(a.code,"\tvec3 diffuseColor = "+a.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",s.code,"\tvec3 specular = "+s.result+";",c.code,"\tfloat shininess = max( 0.0001, "+c.result+" );","\tfloat specularStrength = 1.0;"),u&&r.push(u.code,"#ifdef ALPHATEST","if ( "+u.result+" <= ALPHATEST ) discard;","#endif"),l&&r.push(l.code,"normal = "+l.result+";"),r.push("material.diffuseColor = "+(d?"vec3( 1.0 )":"diffuseColor")+";"),r.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),d&&(r.push(d.code,"reflectedLight.directDiffuse = "+d.result+";"),r.push("reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),h&&r.push(h.code,"reflectedLight.indirectDiffuse *= "+h.result+";"),f&&r.push(f.code,"reflectedLight.indirectDiffuse += "+f.result+";"),p&&r.push(p.code,"reflectedLight.directDiffuse *= "+p.result+";","reflectedLight.directSpecular *= "+p.result+";"),v&&r.push(v.code,"reflectedLight.directDiffuse += "+v.result+";"),r.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),m&&(r.push(m.code),g?r.push(g.code,"outgoingLight = mix( outgoingLight, "+m.result+", "+g.result+" );"):r.push("outgoingLight = "+m.result+";")),u?r.push("gl_FragColor = vec4( outgoingLight, "+u.result+" );"):r.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),r.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>"),t=r.join("\n")}return t},Ae.prototype.copy=function(e){return r.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.specular=e.specular,this.shininess=e.shininess,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.environmentAlpha&&(this.environmentAlpha=e.environmentAlpha),this},Ae.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.environmentAlpha&&(t.environmentAlpha=this.environmentAlpha.toJSON(e).uuid)),t},Le.prototype=Object.create(r.prototype),Le.prototype.constructor=Le,Le.prototype.nodeType="Standard",Le.prototype.build=function(e){var t;e.define("STANDARD");var n=this.clearcoat||this.clearcoatRoughness||this.clearCoatNormal;if(n&&e.define("CLEARCOAT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){var r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(i.UniformsUtils.merge([i.UniformsLib.fog,i.UniformsLib.lights])),i.UniformsLib.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var o=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];r&&o.push(r.code,r.result?"transformed = "+r.result+";":""),o.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <fog_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=o.join("\n")}else{var a=new y("material.specularRoughness","f"),s=new y("material.clearcoatRoughness","f"),c={roughness:a,bias:new Te(a),viewNormal:new y("normal","v3"),worldNormal:new y("inverseTransformDirection( geometry.normal, viewMatrix )","v3"),gamma:!0},u={gamma:!0},l={roughness:s,bias:new Te(s),viewNormal:new y("clearcoatNormal","v3"),worldNormal:new y("inverseTransformDirection( geometry.clearcoatNormal, viewMatrix )","v3"),gamma:!0};this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color",context:u}),this.roughness.analyze(e),this.metalness.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.clearcoat&&this.clearcoat.analyze(e),this.clearcoatRoughness&&this.clearcoatRoughness.analyze(e),this.clearcoatNormal&&this.clearcoatNormal.analyze(e),this.reflectivity&&this.reflectivity.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&(this.environment.analyze(e,{cache:"radiance",context:c,slot:"radiance"}),e.requires.irradiance&&this.environment.analyze(e,{cache:"irradiance",context:c,slot:"irradiance"})),this.sheen&&this.sheen.analyze(e);var d,h=this.mask?this.mask.flow(e,"b"):void 0,f=this.color.flow(e,"c",{slot:"color",context:u}),p=this.roughness.flow(e,"f"),v=this.metalness.flow(e,"f"),m=this.alpha?this.alpha.flow(e,"f"):void 0,g=this.normal?this.normal.flow(e,"v3"):void 0,b=this.clearcoat?this.clearcoat.flow(e,"f"):void 0,x=(s=this.clearcoatRoughness?this.clearcoatRoughness.flow(e,"f"):void 0,this.clearcoatNormal?this.clearcoatNormal.flow(e,"v3"):void 0),w=this.reflectivity?this.reflectivity.flow(e,"f"):void 0,N=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,S=this.ao?this.ao.flow(e,"f"):void 0,T=this.ambient?this.ambient.flow(e,"c"):void 0,C=this.shadow?this.shadow.flow(e,"c"):void 0,_=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0;this.environment&&(d={radiance:this.environment.flow(e,"c",{cache:"radiance",context:c,slot:"radiance"})},e.requires.irradiance&&(d.irradiance=this.environment.flow(e,"c",{cache:"irradiance",context:c,slot:"irradiance"})));var O=n&&d?this.environment.flow(e,"c",{cache:"clearcoat",context:l,slot:"environment"}):void 0,M=this.sheen?this.sheen.flow(e,"c"):void 0;e.requires.transparent=void 0!==m,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n")),o=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\t#include <clearcoat_normal_fragment_begin>","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"],h&&o.push(h.code,"if ( ! "+h.result+" ) discard;"),o.push(f.code,"\tvec3 diffuseColor = "+f.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",p.code,"\tfloat roughnessFactor = "+p.result+";",v.code,"\tfloat metalnessFactor = "+v.result+";"),m&&o.push(m.code,"#ifdef ALPHATEST","\tif ( "+m.result+" <= ALPHATEST ) discard;","#endif"),g&&o.push(g.code,"normal = "+g.result+";"),x&&o.push(x.code,"clearcoatNormal = "+x.result+";"),o.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),o.push("material.diffuseColor = "+(N?"vec3( 1.0 )":"diffuseColor * ( 1.0 - metalnessFactor )")+";","material.specularRoughness = max( roughnessFactor, 0.0525 );","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );"),b?o.push(b.code,"material.clearcoat = saturate( "+b.result+" );"):n&&o.push("material.clearcoat = 0.0;"),s?o.push(s.code,"material.clearcoatRoughness = max( "+s.result+", 0.0525 );","material.clearcoatRoughness += geometryRoughness;","material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );"):n&&o.push("material.clearcoatRoughness = 0.0;"),M&&o.push("material.sheenColor = "+M.result+";"),w?o.push(w.code,"material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+w.result+" ) ), diffuseColor, metalnessFactor );"):o.push("material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),o.push("#include <lights_fragment_begin>"),N&&(o.push(N.code,"reflectedLight.directDiffuse = "+N.result+";"),o.push("diffuseColor *= 1.0 - metalnessFactor;","reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),S&&o.push(S.code,"reflectedLight.indirectDiffuse *= "+S.result+";","float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );","reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, "+S.result+", material.specularRoughness );"),T&&o.push(T.code,"reflectedLight.indirectDiffuse += "+T.result+";"),C&&o.push(C.code,"reflectedLight.directDiffuse *= "+C.result+";","reflectedLight.directSpecular *= "+C.result+";"),_&&o.push(_.code,"reflectedLight.directDiffuse += "+_.result+";"),d&&(o.push(d.radiance.code),e.requires.irradiance&&o.push(d.irradiance.code),O&&o.push(O.code,"clearcoatRadiance += "+O.result+";"),o.push("radiance += "+d.radiance.result+";"),e.requires.irradiance&&o.push("iblIrradiance += PI * "+d.irradiance.result+";")),o.push("#include <lights_fragment_end>"),o.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),m?o.push("gl_FragColor = vec4( outgoingLight, "+m.result+" );"):o.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),o.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>"),t=o.join("\n")}return t},Le.prototype.copy=function(e){return r.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.roughness=e.roughness,this.metalness=e.metalness,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.clearcoat&&(this.clearcoat=e.clearcoat),e.clearcoatRoughness&&(this.clearcoatRoughness=e.clearcoatRoughness),e.clearcoatNormal&&(this.clearcoatNormal=e.clearcoatNormal),e.reflectivity&&(this.reflectivity=e.reflectivity),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.sheen&&(this.sheen=e.sheen),this},Le.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.roughness=this.roughness.toJSON(e).uuid,t.metalness=this.metalness.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.clearcoat&&(t.clearcoat=this.clearcoat.toJSON(e).uuid),this.clearcoatRoughness&&(t.clearcoatRoughness=this.clearcoatRoughness.toJSON(e).uuid),this.clearcoatNormal&&(t.clearcoatNormal=this.clearcoatNormal.toJSON(e).uuid),this.reflectivity&&(t.reflectivity=this.reflectivity.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.sheen&&(t.sheen=this.sheen.toJSON(e).uuid)),t},De.prototype=Object.create(Le.prototype),De.prototype.constructor=De,De.prototype.nodeType="MeshStandard",De.prototype.build=function(e){var t=this.properties,n=this.inputs;if(e.isShader("fragment")){var i=e.findNode(t.color,n.color),r=e.resolve(t.map);this.color=r?new k(i,r,k.MUL):i;var o=e.findNode(t.roughness,n.roughness),a=e.resolve(t.roughnessMap);this.roughness=a?new k(o,new be(a,"g"),k.MUL):o;var s=e.findNode(t.metalness,n.metalness),c=e.resolve(t.metalnessMap);this.metalness=c?new k(s,new be(c,"b"),k.MUL):s,t.normalMap?(this.normal=new fe(e.resolve(t.normalMap)),this.normal.scale=e.findNode(t.normalScale,n.normalScale)):this.normal=void 0,this.environment=e.resolve(t.envMap)}return Le.prototype.build.call(this,e)},De.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),console.warn(".toJSON not implemented in",this)),t},Pe.prototype=Object.create(ee.prototype),Pe.prototype.constructor=Pe,N.addShortcuts(Pe.prototype,"fragment",["color","alpha","mask","position","spherical"]),Re.prototype=Object.create(ee.prototype),Re.prototype.constructor=Re,N.addShortcuts(Re.prototype,"fragment",["color","alpha","specular","shininess","normal","emissive","ambient","light","shadow","ao","environment","environmentAlpha","mask","position"]),je.prototype=Object.create(ee.prototype),je.prototype.constructor=je,N.addShortcuts(je.prototype,"fragment",["color","alpha","roughness","metalness","reflectivity","clearcoat","clearcoatRoughness","clearcoatNormal","normal","emissive","ambient","light","shadow","ao","environment","mask","position","sheen"]),ke.prototype=Object.create(ee.prototype),ke.prototype.constructor=ke,N.addShortcuts(ke.prototype,"properties",["color","roughness","metalness","map","normalMap","normalScale","metalnessMap","roughnessMap","envMap"]),Ie.prototype={constructor:Ie,render:function(e,t,n){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.output,this.material.build(),this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=this.renderTarget.texture),this.needsUpdate=!1),n.setRenderer(this.renderer).setRenderTexture(this.renderTarget.texture),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(e,t),n.updateNode(this.material),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)},setPixelRatio:function(e){this.renderer.setPixelRatio(e);var t=this.renderer.getSize(new i.Vector2);this.setSize(t.width,t.height)},setSize:function(e,t){var n=this.renderer.getPixelRatio();this.renderTarget.setSize(e*n,t*n),this.renderer.setSize(e,t)},copy:function(e){return this.output=e.output,this},toJSON:function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.post&&(e.post={}),!e.post[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePostProcessing",e.post[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.output=this.output.toJSON(e).uuid}return e.post=this.uuid,e}}},7963:(e,t,n)=>{"use strict";n.r(t),n.d(t,{VERSION:()=>r,after:()=>Pt,all:()=>Qt,allKeys:()=>me,any:()=>en,assign:()=>Re,before:()=>Rt,bind:()=>wt,bindAll:()=>Tt,chain:()=>gt,chunk:()=>In,clone:()=>Be,collect:()=>Wt,compact:()=>_n,compose:()=>Dt,constant:()=>K,contains:()=>tn,countBy:()=>pn,create:()=>Ie,debounce:()=>Et,default:()=>Jn,defaults:()=>je,defer:()=>Ot,delay:()=>_t,detect:()=>qt,difference:()=>Mn,drop:()=>Tn,each:()=>Gt,escape:()=>at,every:()=>Qt,extend:()=>Pe,extendOwn:()=>Re,filter:()=>Zt,find:()=>qt,findIndex:()=>Bt,findKey:()=>kt,findLastIndex:()=>Ft,findWhere:()=>Ht,first:()=>Sn,flatten:()=>On,foldl:()=>Xt,foldr:()=>Yt,forEach:()=>Gt,functions:()=>Le,get:()=>Ue,groupBy:()=>hn,has:()=>qe,head:()=>Sn,identity:()=>He,include:()=>tn,includes:()=>tn,indexBy:()=>fn,indexOf:()=>Jt,initial:()=>Nn,inject:()=>Xt,intersection:()=>Dn,invert:()=>Ae,invoke:()=>nn,isArguments:()=>X,isArray:()=>G,isArrayBuffer:()=>I,isBoolean:()=>M,isDataView:()=>H,isDate:()=>P,isElement:()=>E,isEmpty:()=>ce,isEqual:()=>ve,isError:()=>j,isFinite:()=>Y,isFunction:()=>z,isMap:()=>Te,isMatch:()=>ue,isNaN:()=>Z,isNull:()=>_,isNumber:()=>D,isObject:()=>C,isRegExp:()=>R,isSet:()=>_e,isString:()=>L,isSymbol:()=>k,isTypedArray:()=>re,isUndefined:()=>O,isWeakMap:()=>Ce,isWeakSet:()=>Oe,iteratee:()=>Ye,keys:()=>se,last:()=>Cn,lastIndexOf:()=>Ut,map:()=>Wt,mapObject:()=>Ke,matcher:()=>Ge,matches:()=>Ge,max:()=>an,memoize:()=>Ct,methods:()=>Le,min:()=>sn,mixin:()=>Fn,negate:()=>Lt,noop:()=>Qe,now:()=>it,object:()=>jn,omit:()=>wn,once:()=>jt,pairs:()=>Ee,partial:()=>xt,partition:()=>vn,pick:()=>xn,pluck:()=>rn,property:()=>We,propertyOf:()=>et,random:()=>nt,range:()=>kn,reduce:()=>Xt,reduceRight:()=>Yt,reject:()=>Kt,rest:()=>Tn,restArguments:()=>T,result:()=>pt,sample:()=>cn,select:()=>Zt,shuffle:()=>un,size:()=>yn,some:()=>en,sortBy:()=>ln,sortedIndex:()=>zt,tail:()=>Tn,take:()=>Sn,tap:()=>Fe,template:()=>ft,templateSettings:()=>ct,throttle:()=>Mt,times:()=>tt,toArray:()=>gn,toPath:()=>ze,transpose:()=>Pn,unescape:()=>st,union:()=>Ln,uniq:()=>An,unique:()=>An,uniqueId:()=>mt,unzip:()=>Pn,values:()=>Me,where:()=>on,without:()=>En,wrap:()=>At,zip:()=>Rn});var i={};n.r(i),n.d(i,{VERSION:()=>r,after:()=>Pt,all:()=>Qt,allKeys:()=>me,any:()=>en,assign:()=>Re,before:()=>Rt,bind:()=>wt,bindAll:()=>Tt,chain:()=>gt,chunk:()=>In,clone:()=>Be,collect:()=>Wt,compact:()=>_n,compose:()=>Dt,constant:()=>K,contains:()=>tn,countBy:()=>pn,create:()=>Ie,debounce:()=>Et,default:()=>zn,defaults:()=>je,defer:()=>Ot,delay:()=>_t,detect:()=>qt,difference:()=>Mn,drop:()=>Tn,each:()=>Gt,escape:()=>at,every:()=>Qt,extend:()=>Pe,extendOwn:()=>Re,filter:()=>Zt,find:()=>qt,findIndex:()=>Bt,findKey:()=>kt,findLastIndex:()=>Ft,findWhere:()=>Ht,first:()=>Sn,flatten:()=>On,foldl:()=>Xt,foldr:()=>Yt,forEach:()=>Gt,functions:()=>Le,get:()=>Ue,groupBy:()=>hn,has:()=>qe,head:()=>Sn,identity:()=>He,include:()=>tn,includes:()=>tn,indexBy:()=>fn,indexOf:()=>Jt,initial:()=>Nn,inject:()=>Xt,intersection:()=>Dn,invert:()=>Ae,invoke:()=>nn,isArguments:()=>X,isArray:()=>G,isArrayBuffer:()=>I,isBoolean:()=>M,isDataView:()=>H,isDate:()=>P,isElement:()=>E,isEmpty:()=>ce,isEqual:()=>ve,isError:()=>j,isFinite:()=>Y,isFunction:()=>z,isMap:()=>Te,isMatch:()=>ue,isNaN:()=>Z,isNull:()=>_,isNumber:()=>D,isObject:()=>C,isRegExp:()=>R,isSet:()=>_e,isString:()=>L,isSymbol:()=>k,isTypedArray:()=>re,isUndefined:()=>O,isWeakMap:()=>Ce,isWeakSet:()=>Oe,iteratee:()=>Ye,keys:()=>se,last:()=>Cn,lastIndexOf:()=>Ut,map:()=>Wt,mapObject:()=>Ke,matcher:()=>Ge,matches:()=>Ge,max:()=>an,memoize:()=>Ct,methods:()=>Le,min:()=>sn,mixin:()=>Fn,negate:()=>Lt,noop:()=>Qe,now:()=>it,object:()=>jn,omit:()=>wn,once:()=>jt,pairs:()=>Ee,partial:()=>xt,partition:()=>vn,pick:()=>xn,pluck:()=>rn,property:()=>We,propertyOf:()=>et,random:()=>nt,range:()=>kn,reduce:()=>Xt,reduceRight:()=>Yt,reject:()=>Kt,rest:()=>Tn,restArguments:()=>T,result:()=>pt,sample:()=>cn,select:()=>Zt,shuffle:()=>un,size:()=>yn,some:()=>en,sortBy:()=>ln,sortedIndex:()=>zt,tail:()=>Tn,take:()=>Sn,tap:()=>Fe,template:()=>ft,templateSettings:()=>ct,throttle:()=>Mt,times:()=>tt,toArray:()=>gn,toPath:()=>ze,transpose:()=>Pn,unescape:()=>st,union:()=>Ln,uniq:()=>An,unique:()=>An,uniqueId:()=>mt,unzip:()=>Pn,values:()=>Me,where:()=>on,without:()=>En,wrap:()=>At,zip:()=>Rn});var r="1.12.0",o="object"==typeof self&&self.self===self&&self||"object"==typeof n.g&&n.g.global===n.g&&n.g||Function("return this")()||{},a=Array.prototype,s=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,u=a.push,l=a.slice,d=s.toString,h=s.hasOwnProperty,f="undefined"!=typeof ArrayBuffer,p="undefined"!=typeof DataView,v=Array.isArray,m=Object.keys,g=Object.create,y=f&&ArrayBuffer.isView,b=isNaN,x=isFinite,w=!{toString:null}.propertyIsEnumerable("toString"),N=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],S=Math.pow(2,53)-1;function T(e,t){return t=null==t?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=arguments[r+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var o=Array(t+1);for(r=0;r<t;r++)o[r]=arguments[r];return o[t]=i,e.apply(this,o)}}function C(e){var t=typeof e;return"function"===t||"object"===t&&!!e}function _(e){return null===e}function O(e){return void 0===e}function M(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)}function E(e){return!(!e||1!==e.nodeType)}function A(e){var t="[object "+e+"]";return function(e){return d.call(e)===t}}const L=A("String"),D=A("Number"),P=A("Date"),R=A("RegExp"),j=A("Error"),k=A("Symbol"),I=A("ArrayBuffer");var B=A("Function"),F=o.document&&o.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof F&&(B=function(e){return"function"==typeof e||!1});const z=B,V=A("Object");var J=p&&V(new DataView(new ArrayBuffer(8))),U="undefined"!=typeof Map&&V(new Map),q=A("DataView");const H=J?function(e){return null!=e&&z(e.getInt8)&&I(e.buffer)}:q,G=v||A("Array");function W(e,t){return null!=e&&h.call(e,t)}var $=A("Arguments");!function(){$(arguments)||($=function(e){return W(e,"callee")})}();const X=$;function Y(e){return!k(e)&&x(e)&&!isNaN(parseFloat(e))}function Z(e){return D(e)&&b(e)}function K(e){return function(){return e}}function Q(e){return function(t){var n=e(t);return"number"==typeof n&&n>=0&&n<=S}}function ee(e){return function(t){return null==t?void 0:t[e]}}const te=ee("byteLength"),ne=Q(te);var ie=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;const re=f?function(e){return y?y(e)&&!H(e):ne(e)&&ie.test(d.call(e))}:K(!1),oe=ee("length");function ae(e,t){t=function(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(e){return t[e]},push:function(n){return t[n]=!0,e.push(n)}}}(t);var n=N.length,i=e.constructor,r=z(i)&&i.prototype||s,o="constructor";for(W(e,o)&&!t.contains(o)&&t.push(o);n--;)(o=N[n])in e&&e[o]!==r[o]&&!t.contains(o)&&t.push(o)}function se(e){if(!C(e))return[];if(m)return m(e);var t=[];for(var n in e)W(e,n)&&t.push(n);return w&&ae(e,t),t}function ce(e){if(null==e)return!0;var t=oe(e);return"number"==typeof t&&(G(e)||L(e)||X(e))?0===t:0===oe(se(e))}function ue(e,t){var n=se(t),i=n.length;if(null==e)return!i;for(var r=Object(e),o=0;o<i;o++){var a=n[o];if(t[a]!==r[a]||!(a in r))return!1}return!0}function le(e){return e instanceof le?e:this instanceof le?void(this._wrapped=e):new le(e)}function de(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,te(e))}le.VERSION=r,le.prototype.value=function(){return this._wrapped},le.prototype.valueOf=le.prototype.toJSON=le.prototype.value,le.prototype.toString=function(){return String(this._wrapped)};var he="[object DataView]";function fe(e,t,n,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var r=typeof e;return("function"===r||"object"===r||"object"==typeof t)&&pe(e,t,n,i)}function pe(e,t,n,i){e instanceof le&&(e=e._wrapped),t instanceof le&&(t=t._wrapped);var r=d.call(e);if(r!==d.call(t))return!1;if(J&&"[object Object]"==r&&H(e)){if(!H(t))return!1;r=he}switch(r){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(t);case"[object ArrayBuffer]":case he:return pe(de(e),de(t),n,i)}var o="[object Array]"===r;if(!o&&re(e)){if(te(e)!==te(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;o=!0}if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var a=e.constructor,s=t.constructor;if(a!==s&&!(z(a)&&a instanceof a&&z(s)&&s instanceof s)&&"constructor"in e&&"constructor"in t)return!1}i=i||[];for(var u=(n=n||[]).length;u--;)if(n[u]===e)return i[u]===t;if(n.push(e),i.push(t),o){if((u=e.length)!==t.length)return!1;for(;u--;)if(!fe(e[u],t[u],n,i))return!1}else{var l,h=se(e);if(u=h.length,se(t).length!==u)return!1;for(;u--;)if(!W(t,l=h[u])||!fe(e[l],t[l],n,i))return!1}return n.pop(),i.pop(),!0}function ve(e,t){return fe(e,t)}function me(e){if(!C(e))return[];var t=[];for(var n in e)t.push(n);return w&&ae(e,t),t}function ge(e){var t=oe(e);return function(n){if(null==n)return!1;var i=me(n);if(oe(i))return!1;for(var r=0;r<t;r++)if(!z(n[e[r]]))return!1;return e!==Ne||!z(n[ye])}}var ye="forEach",be=["clear","delete"],xe=["get","has","set"],we=be.concat(ye,xe),Ne=be.concat(xe),Se=["add"].concat(be,ye,"has");const Te=U?ge(we):A("Map"),Ce=U?ge(Ne):A("WeakMap"),_e=U?ge(Se):A("Set"),Oe=A("WeakSet");function Me(e){for(var t=se(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=e[t[r]];return i}function Ee(e){for(var t=se(e),n=t.length,i=Array(n),r=0;r<n;r++)i[r]=[t[r],e[t[r]]];return i}function Ae(e){for(var t={},n=se(e),i=0,r=n.length;i<r;i++)t[e[n[i]]]=n[i];return t}function Le(e){var t=[];for(var n in e)z(e[n])&&t.push(n);return t.sort()}function De(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||null==n)return n;for(var r=1;r<i;r++)for(var o=arguments[r],a=e(o),s=a.length,c=0;c<s;c++){var u=a[c];t&&void 0!==n[u]||(n[u]=o[u])}return n}}const Pe=De(me),Re=De(se),je=De(me,!0);function ke(e){if(!C(e))return{};if(g)return g(e);var t=function(){};t.prototype=e;var n=new t;return t.prototype=null,n}function Ie(e,t){var n=ke(e);return t&&Re(n,t),n}function Be(e){return C(e)?G(e)?e.slice():Pe({},e):e}function Fe(e,t){return t(e),e}function ze(e){return G(e)?e:[e]}function Ve(e){return le.toPath(e)}function Je(e,t){for(var n=t.length,i=0;i<n;i++){if(null==e)return;e=e[t[i]]}return n?e:void 0}function Ue(e,t,n){var i=Je(e,Ve(t));return O(i)?n:i}function qe(e,t){for(var n=(t=Ve(t)).length,i=0;i<n;i++){var r=t[i];if(!W(e,r))return!1;e=e[r]}return!!n}function He(e){return e}function Ge(e){return e=Re({},e),function(t){return ue(t,e)}}function We(e){return e=Ve(e),function(t){return Je(t,e)}}function $e(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,i,r){return e.call(t,n,i,r)};case 4:return function(n,i,r,o){return e.call(t,n,i,r,o)}}return function(){return e.apply(t,arguments)}}function Xe(e,t,n){return null==e?He:z(e)?$e(e,t,n):C(e)&&!G(e)?Ge(e):We(e)}function Ye(e,t){return Xe(e,t,1/0)}function Ze(e,t,n){return le.iteratee!==Ye?le.iteratee(e,t):Xe(e,t,n)}function Ke(e,t,n){t=Ze(t,n);for(var i=se(e),r=i.length,o={},a=0;a<r;a++){var s=i[a];o[s]=t(e[s],s,e)}return o}function Qe(){}function et(e){return null==e?Qe:function(t){return Ue(e,t)}}function tt(e,t,n){var i=Array(Math.max(0,e));t=$e(t,n,1);for(var r=0;r<e;r++)i[r]=t(r);return i}function nt(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}le.toPath=ze,le.iteratee=Ye;const it=Date.now||function(){return(new Date).getTime()};function rt(e){var t=function(t){return e[t]},n="(?:"+se(e).join("|")+")",i=RegExp(n),r=RegExp(n,"g");return function(e){return e=null==e?"":""+e,i.test(e)?e.replace(r,t):e}}const ot={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},at=rt(ot),st=rt(Ae(ot)),ct=le.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ut=/(.)^/,lt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},dt=/\\|'|\r|\n|\u2028|\u2029/g;function ht(e){return"\\"+lt[e]}function ft(e,t,n){!t&&n&&(t=n),t=je({},t,le.templateSettings);var i,r=RegExp([(t.escape||ut).source,(t.interpolate||ut).source,(t.evaluate||ut).source].join("|")+"|$","g"),o=0,a="__p+='";e.replace(r,(function(t,n,i,r,s){return a+=e.slice(o,s).replace(dt,ht),o=s+t.length,n?a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":i?a+="'+\n((__t=("+i+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),t})),a+="';\n",t.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(t.variable||"obj","_",a)}catch(e){throw e.source=a,e}var s=function(e){return i.call(this,e,le)},c=t.variable||"obj";return s.source="function("+c+"){\n"+a+"}",s}function pt(e,t,n){var i=(t=Ve(t)).length;if(!i)return z(n)?n.call(e):n;for(var r=0;r<i;r++){var o=null==e?void 0:e[t[r]];void 0===o&&(o=n,r=i),e=z(o)?o.call(e):o}return e}var vt=0;function mt(e){var t=++vt+"";return e?e+t:t}function gt(e){var t=le(e);return t._chain=!0,t}function yt(e,t,n,i,r){if(!(i instanceof t))return e.apply(n,r);var o=ke(e.prototype),a=e.apply(o,r);return C(a)?a:o}var bt=T((function(e,t){var n=bt.placeholder,i=function(){for(var r=0,o=t.length,a=Array(o),s=0;s<o;s++)a[s]=t[s]===n?arguments[r++]:t[s];for(;r<arguments.length;)a.push(arguments[r++]);return yt(e,i,this,this,a)};return i}));bt.placeholder=le;const xt=bt,wt=T((function(e,t,n){if(!z(e))throw new TypeError("Bind must be called on a function");var i=T((function(r){return yt(e,i,t,this,n.concat(r))}));return i})),Nt=Q(oe);function St(e,t,n,i){if(i=i||[],t||0===t){if(t<=0)return i.concat(e)}else t=1/0;for(var r=i.length,o=0,a=oe(e);o<a;o++){var s=e[o];if(Nt(s)&&(G(s)||X(s)))if(t>1)St(s,t-1,n,i),r=i.length;else for(var c=0,u=s.length;c<u;)i[r++]=s[c++];else n||(i[r++]=s)}return i}const Tt=T((function(e,t){var n=(t=St(t,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=wt(e[i],e)}return e}));function Ct(e,t){var n=function(i){var r=n.cache,o=""+(t?t.apply(this,arguments):i);return W(r,o)||(r[o]=e.apply(this,arguments)),r[o]};return n.cache={},n}const _t=T((function(e,t,n){return setTimeout((function(){return e.apply(null,n)}),t)})),Ot=xt(_t,le,1);function Mt(e,t,n){var i,r,o,a,s=0;n||(n={});var c=function(){s=!1===n.leading?0:it(),i=null,a=e.apply(r,o),i||(r=o=null)},u=function(){var u=it();s||!1!==n.leading||(s=u);var l=t-(u-s);return r=this,o=arguments,l<=0||l>t?(i&&(clearTimeout(i),i=null),s=u,a=e.apply(r,o),i||(r=o=null)):i||!1===n.trailing||(i=setTimeout(c,l)),a};return u.cancel=function(){clearTimeout(i),s=0,i=r=o=null},u}function Et(e,t,n){var i,r,o=function(t,n){i=null,n&&(r=e.apply(t,n))},a=T((function(a){if(i&&clearTimeout(i),n){var s=!i;i=setTimeout(o,t),s&&(r=e.apply(this,a))}else i=_t(o,t,this,a);return r}));return a.cancel=function(){clearTimeout(i),i=null},a}function At(e,t){return xt(t,e)}function Lt(e){return function(){return!e.apply(this,arguments)}}function Dt(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function Pt(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function Rt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}const jt=xt(Rt,2);function kt(e,t,n){t=Ze(t,n);for(var i,r=se(e),o=0,a=r.length;o<a;o++)if(t(e[i=r[o]],i,e))return i}function It(e){return function(t,n,i){n=Ze(n,i);for(var r=oe(t),o=e>0?0:r-1;o>=0&&o<r;o+=e)if(n(t[o],o,t))return o;return-1}}const Bt=It(1),Ft=It(-1);function zt(e,t,n,i){for(var r=(n=Ze(n,i,1))(t),o=0,a=oe(e);o<a;){var s=Math.floor((o+a)/2);n(e[s])<r?o=s+1:a=s}return o}function Vt(e,t,n){return function(i,r,o){var a=0,s=oe(i);if("number"==typeof o)e>0?a=o>=0?o:Math.max(o+s,a):s=o>=0?Math.min(o+1,s):o+s+1;else if(n&&o&&s)return i[o=n(i,r)]===r?o:-1;if(r!=r)return(o=t(l.call(i,a,s),Z))>=0?o+a:-1;for(o=e>0?a:s-1;o>=0&&o<s;o+=e)if(i[o]===r)return o;return-1}}const Jt=Vt(1,Bt,zt),Ut=Vt(-1,Ft);function qt(e,t,n){var i=(Nt(e)?Bt:kt)(e,t,n);if(void 0!==i&&-1!==i)return e[i]}function Ht(e,t){return qt(e,Ge(t))}function Gt(e,t,n){var i,r;if(t=$e(t,n),Nt(e))for(i=0,r=e.length;i<r;i++)t(e[i],i,e);else{var o=se(e);for(i=0,r=o.length;i<r;i++)t(e[o[i]],o[i],e)}return e}function Wt(e,t,n){t=Ze(t,n);for(var i=!Nt(e)&&se(e),r=(i||e).length,o=Array(r),a=0;a<r;a++){var s=i?i[a]:a;o[a]=t(e[s],s,e)}return o}function $t(e){var t=function(t,n,i,r){var o=!Nt(t)&&se(t),a=(o||t).length,s=e>0?0:a-1;for(r||(i=t[o?o[s]:s],s+=e);s>=0&&s<a;s+=e){var c=o?o[s]:s;i=n(i,t[c],c,t)}return i};return function(e,n,i,r){var o=arguments.length>=3;return t(e,$e(n,r,4),i,o)}}const Xt=$t(1),Yt=$t(-1);function Zt(e,t,n){var i=[];return t=Ze(t,n),Gt(e,(function(e,n,r){t(e,n,r)&&i.push(e)})),i}function Kt(e,t,n){return Zt(e,Lt(Ze(t)),n)}function Qt(e,t,n){t=Ze(t,n);for(var i=!Nt(e)&&se(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(!t(e[a],a,e))return!1}return!0}function en(e,t,n){t=Ze(t,n);for(var i=!Nt(e)&&se(e),r=(i||e).length,o=0;o<r;o++){var a=i?i[o]:o;if(t(e[a],a,e))return!0}return!1}function tn(e,t,n,i){return Nt(e)||(e=Me(e)),("number"!=typeof n||i)&&(n=0),Jt(e,t,n)>=0}const nn=T((function(e,t,n){var i,r;return z(t)?r=t:(t=Ve(t),i=t.slice(0,-1),t=t[t.length-1]),Wt(e,(function(e){var o=r;if(!o){if(i&&i.length&&(e=Je(e,i)),null==e)return;o=e[t]}return null==o?o:o.apply(e,n)}))}));function rn(e,t){return Wt(e,We(t))}function on(e,t){return Zt(e,Ge(t))}function an(e,t,n){var i,r,o=-1/0,a=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=Nt(e)?e:Me(e)).length;s<c;s++)null!=(i=e[s])&&i>o&&(o=i);else t=Ze(t,n),Gt(e,(function(e,n,i){((r=t(e,n,i))>a||r===-1/0&&o===-1/0)&&(o=e,a=r)}));return o}function sn(e,t,n){var i,r,o=1/0,a=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var s=0,c=(e=Nt(e)?e:Me(e)).length;s<c;s++)null!=(i=e[s])&&i<o&&(o=i);else t=Ze(t,n),Gt(e,(function(e,n,i){((r=t(e,n,i))<a||r===1/0&&o===1/0)&&(o=e,a=r)}));return o}function cn(e,t,n){if(null==t||n)return Nt(e)||(e=Me(e)),e[nt(e.length-1)];var i=Nt(e)?Be(e):Me(e),r=oe(i);t=Math.max(Math.min(t,r),0);for(var o=r-1,a=0;a<t;a++){var s=nt(a,o),c=i[a];i[a]=i[s],i[s]=c}return i.slice(0,t)}function un(e){return cn(e,1/0)}function ln(e,t,n){var i=0;return t=Ze(t,n),rn(Wt(e,(function(e,n,r){return{value:e,index:i++,criteria:t(e,n,r)}})).sort((function(e,t){var n=e.criteria,i=t.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(n<i||void 0===i)return-1}return e.index-t.index})),"value")}function dn(e,t){return function(n,i,r){var o=t?[[],[]]:{};return i=Ze(i,r),Gt(n,(function(t,r){var a=i(t,r,n);e(o,t,a)})),o}}const hn=dn((function(e,t,n){W(e,n)?e[n].push(t):e[n]=[t]})),fn=dn((function(e,t,n){e[n]=t})),pn=dn((function(e,t,n){W(e,n)?e[n]++:e[n]=1})),vn=dn((function(e,t,n){e[n?0:1].push(t)}),!0);var mn=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function gn(e){return e?G(e)?l.call(e):L(e)?e.match(mn):Nt(e)?Wt(e,He):Me(e):[]}function yn(e){return null==e?0:Nt(e)?e.length:se(e).length}function bn(e,t,n){return t in n}const xn=T((function(e,t){var n={},i=t[0];if(null==e)return n;z(i)?(t.length>1&&(i=$e(i,t[1])),t=me(e)):(i=bn,t=St(t,!1,!1),e=Object(e));for(var r=0,o=t.length;r<o;r++){var a=t[r],s=e[a];i(s,a,e)&&(n[a]=s)}return n})),wn=T((function(e,t){var n,i=t[0];return z(i)?(i=Lt(i),t.length>1&&(n=t[1])):(t=Wt(St(t,!1,!1),String),i=function(e,n){return!tn(t,n)}),xn(e,i,n)}));function Nn(e,t,n){return l.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))}function Sn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[0]:Nn(e,e.length-t)}function Tn(e,t,n){return l.call(e,null==t||n?1:t)}function Cn(e,t,n){return null==e||e.length<1?null==t||n?void 0:[]:null==t||n?e[e.length-1]:Tn(e,Math.max(0,e.length-t))}function _n(e){return Zt(e,Boolean)}function On(e,t){return St(e,t,!1)}const Mn=T((function(e,t){return t=St(t,!0,!0),Zt(e,(function(e){return!tn(t,e)}))})),En=T((function(e,t){return Mn(e,t)}));function An(e,t,n,i){M(t)||(i=n,n=t,t=!1),null!=n&&(n=Ze(n,i));for(var r=[],o=[],a=0,s=oe(e);a<s;a++){var c=e[a],u=n?n(c,a,e):c;t&&!n?(a&&o===u||r.push(c),o=u):n?tn(o,u)||(o.push(u),r.push(c)):tn(r,c)||r.push(c)}return r}const Ln=T((function(e){return An(St(e,!0,!0))}));function Dn(e){for(var t=[],n=arguments.length,i=0,r=oe(e);i<r;i++){var o=e[i];if(!tn(t,o)){var a;for(a=1;a<n&&tn(arguments[a],o);a++);a===n&&t.push(o)}}return t}function Pn(e){for(var t=e&&an(e,oe).length||0,n=Array(t),i=0;i<t;i++)n[i]=rn(e,i);return n}const Rn=T(Pn);function jn(e,t){for(var n={},i=0,r=oe(e);i<r;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function kn(e,t,n){null==t&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),r=Array(i),o=0;o<i;o++,e+=n)r[o]=e;return r}function In(e,t){if(null==t||t<1)return[];for(var n=[],i=0,r=e.length;i<r;)n.push(l.call(e,i,i+=t));return n}function Bn(e,t){return e._chain?le(t).chain():t}function Fn(e){return Gt(Le(e),(function(t){var n=le[t]=e[t];le.prototype[t]=function(){var e=[this._wrapped];return u.apply(e,arguments),Bn(this,n.apply(le,e))}})),le}Gt(["pop","push","reverse","shift","sort","splice","unshift"],(function(e){var t=a[e];le.prototype[e]=function(){var n=this._wrapped;return null!=n&&(t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0]),Bn(this,n)}})),Gt(["concat","join","slice"],(function(e){var t=a[e];le.prototype[e]=function(){var e=this._wrapped;return null!=e&&(e=t.apply(e,arguments)),Bn(this,e)}}));const zn=le;var Vn=Fn(i);Vn._=Vn;const Jn=Vn}}]);