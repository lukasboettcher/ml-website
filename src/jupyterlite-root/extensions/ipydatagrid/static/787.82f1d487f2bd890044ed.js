(self.webpackChunkipydatagrid=self.webpackChunkipydatagrid||[]).push([[787],{2509:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HyperlinkRendererView=t.HyperlinkRendererModel=t.BarRendererView=t.BarRendererModel=t.TextRendererView=t.TextRendererModel=t.CellRendererView=t.CellRendererModel=void 0;const r=i(5058),n=i(7831),o=i(4706),a=i(2492),s=i(8657),l=i(26),d=i(2584),h=i(6988);class c extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:c.model_name,_model_module:c.model_module,_model_module_version:c.model_module_version,_view_name:c.view_name,_view_module:c.view_module,_view_module_version:c.view_module_version})}}t.CellRendererModel=c,c.model_name="CellRendererModel",c.model_module=s.MODULE_NAME,c.model_module_version=s.MODULE_VERSION,c.view_name="CellRendererView",c.view_module=s.MODULE_NAME,c.view_module_version=s.MODULE_VERSION;class u extends a.WidgetView{constructor(){super(...arguments),this.processors={}}render(){return this.initializeRenderer().then((()=>{this.updateRenderer(),this.on("renderer-needs-update",this.updateRenderer.bind(this))}))}onThemeChanged(){return this.initializeRenderer().then((()=>{this.updateRenderer()}))}initializeRenderer(){const e={},t=this.model.get_attrs().map((e=>e.name));this.model.on_some_change(t,this._on_some_processors_change,this);for(const i of t)e[i]=this.updateProcessor(i);return a.resolvePromisesDict(e).then((e=>{this.processors=e}))}_on_some_processors_change(e){const t={};for(const i in e.changed)t[i]=this.updateProcessor(i);a.resolvePromisesDict(t).then((e=>{this.processors=Object.assign(Object.assign({},this.processors),e),this.trigger("renderer-needs-update")}))}updateRenderer(){const e={};for(const t of this.model.get_attrs())t.phosphorName&&(e[t.phosphorName]=e=>this.process(t.name,e,t.defaultValue));this.renderer=this.createRenderer(e),this.trigger("renderer-changed")}updateProcessor(e){const t=this.model.get(e);return h.Scalar.isScalar(t)?t:(this.listenTo(t,"change",(()=>{this.trigger("renderer-needs-update")})),this.create_child_view(t))}process(e,t,i){const r=this.processors[e];return h.Scalar.isScalar(r)?"font"===e&&"string"==typeof r&&("number"==typeof t.value&&!Number.isFinite(t.value)||t.value instanceof Date&&Number.isNaN(t.value.getTime()))?`italic ${r}`:r:r instanceof d.VegaExprView?r.process(t,i):"date"==r.model.type||"date_color_linear"==r.model.type?r.scale(new Date(t.value)):r.scale(t.value)}}t.CellRendererView=u;class g extends c{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:g.model_name,_view_name:g.view_name,font:"12px sans-serif",text_color:null,text_wrap:!1,text_elide_direction:"right",text_value:null,background_color:null,vertical_alignment:"center",horizontal_alignment:"left",format:null,format_type:"number",missing:""})}get_attrs(){return[{name:"font",phosphorName:"font",defaultValue:"12px sans-serif"},{name:"text_wrap",phosphorName:"wrapText",defaultValue:!1},{name:"text_elide_direction",phosphorName:"elideDirection",defaultValue:"right"},{name:"text_color",phosphorName:"textColor",defaultValue:h.Theme.getFontColor()},{name:"text_value",phosphorName:null,defaultValue:null},{name:"background_color",phosphorName:"backgroundColor",defaultValue:h.Theme.getBackgroundColor()},{name:"vertical_alignment",phosphorName:"verticalAlignment",defaultValue:"center"},{name:"horizontal_alignment",phosphorName:"horizontalAlignment",defaultValue:"left"},{name:"format",phosphorName:null,defaultValue:null}]}}t.TextRendererModel=g,g.serializers=Object.assign(Object.assign({},c.serializers),{font:{deserialize:a.unpack_models},text_color:{deserialize:a.unpack_models},text_wrap:{deserialize:a.unpack_models},text_elide_direction:{deserialize:a.unpack_models},text_value:{deserialize:a.unpack_models},background_color:{deserialize:a.unpack_models},vertical_alignment:{deserialize:a.unpack_models},horizontal_alignment:{deserialize:a.unpack_models},format:{deserialize:a.unpack_models}}),g.model_name="TextRendererModel",g.view_name="TextRendererView";class m extends u{render(){return super.render().then((()=>{this.model.on_some_change(["missing","format_type"],(()=>{this.trigger("renderer-needs-update")}),this)}))}createRenderer(e){return new o.TextRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}getFormatter(e={}){return e=>{let t;if(null===e.value)t=this.model.get("missing");else{const i=this.process("format",e,null);t=null===i?String(e.value):"time"==this.model.get("format_type")?String(n.timeFormat(i)(new Date(e.value))):String(r.format(i)(e.value))}return this.process("text_value",e,t)||t}}}t.TextRendererView=m;class p extends g{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:p.model_name,_view_name:p.view_name,bar_color:"#4682b4",bar_value:0,orientation:"horizontal",bar_vertical_alignment:"bottom",bar_horizontal_alignment:"left",show_text:!0})}get_attrs(){return super.get_attrs().concat([{name:"bar_color",phosphorName:"barColor",defaultValue:"#4682b4"},{name:"bar_value",phosphorName:"barValue",defaultValue:0},{name:"orientation",phosphorName:"orientation",defaultValue:"horizontal"},{name:"bar_vertical_alignment",phosphorName:"barVerticalAlignment",defaultValue:"bottom"},{name:"bar_horizontal_alignment",phosphorName:"barHorizontalAlignment",defaultValue:"left"},{name:"show_text",phosphorName:"showText",defaultValue:!0}])}}t.BarRendererModel=p,p.serializers=Object.assign(Object.assign({},g.serializers),{bar_color:{deserialize:a.unpack_models},bar_value:{deserialize:a.unpack_models},orientation:{deserialize:a.unpack_models},bar_vertical_alignment:{deserialize:a.unpack_models},bar_horizontal_alignment:{deserialize:a.unpack_models},show_text:{deserialize:a.unpack_models}}),p.model_name="BarRendererModel",p.view_name="BarRendererView",t.BarRendererView=class extends m{createRenderer(e){return new l.BarRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}};class _ extends g{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:p.model_name,_view_name:p.view_name,url:{},url_name:{}})}get_attrs(){return super.get_attrs().concat([{name:"url",phosphorName:"url",defaultValue:null},{name:"url_name",phosphorName:"urlName",defaultValue:null}])}}t.HyperlinkRendererModel=_,_.serializers=Object.assign(Object.assign({},g.serializers),{url:{deserialize:a.unpack_models},url_name:{deserialize:a.unpack_models}}),_.model_name="HyperlinkRendererModel",_.view_name="HyperlinkRendererView",t.HyperlinkRendererView=class extends m{createRenderer(e){return new o.HyperlinkRenderer(Object.assign(Object.assign({},e),{format:this.getFormatter()}))}}},26:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BarRenderer=void 0;const r=i(4706);class n extends r.TextRenderer{constructor(e={}){super(e),this.barColor=e.barColor||"#4682b4",this.barValue=e.barValue||0,this.orientation=e.orientation||"horizontal",this.barVerticalAlignment=e.barVerticalAlignment||"bottom",this.barHorizontalAlignment=e.barHorizontalAlignment||"left",this.showText=e.showText||!0}paint(e,t){const i=r.CellRenderer.resolveOption(this.showText,t);this.drawBackground(e,t),this.drawBar(e,t),i&&this.drawText(e,t)}prepare(e,t){const{font:i,textColor:r,barColor:n,backgroundColor:o,horizontalAlignment:a}=this;i&&"string"==typeof i&&(e.font=i),o&&"string"==typeof o?e.fillStyle=o:n&&"string"==typeof n?e.fillStyle=n:r&&"string"==typeof r&&(e.fillStyle=r),e.textAlign="string"==typeof a?a:"left",e.textBaseline="bottom"}drawBar(e,t){const i=r.CellRenderer.resolveOption(this.barColor,t);let n=r.CellRenderer.resolveOption(this.barValue,t);const o=r.CellRenderer.resolveOption(this.barVerticalAlignment,t),a=r.CellRenderer.resolveOption(this.barHorizontalAlignment,t),s=r.CellRenderer.resolveOption(this.orientation,t);if(!i)return;n>1&&(n=1),n<0&&(n=0);let l=t.x,d=t.y;if(e.fillStyle=i,"horizontal"===s){const i=n*t.width;"center"===a&&(l+=(t.width-i)/2),"right"===a&&(l+=t.width-i),e.fillRect(l,d,i,t.height)}else{const i=n*t.height;"center"===o?d+=(t.height-i)/2:"bottom"===o&&(d+=t.height-i),e.fillRect(l,d,t.width,i)}}}t.BarRenderer=n},8126:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.UniqueValueStateManager=t.InteractiveFilterDialog=void 0;const n=i(8785),o=i(4706),a=i(1840),s=i(2720),l=i(4706),d=i(3992),h=i(6227),c=i(4080),u=i(6988);class g extends d.BoxPanel{constructor(e){super(),this._columnDType="number",this._columnIndex=0,this._region="column-header",this._mode="value",this._filterOperator="<",this.hasFilter=!1,this.userInteractedWithDialog=!1,this.addClass("ipydatagrid-filterMenu"),this.node.style.position="absolute",this._model=e.model,this._filterByConditionWidget=new d.Widget,this._filterByConditionWidget.addClass("ipydatagrid-filter-condition-select"),this._uniqueValueGrid=new o.DataGrid({headerVisibility:"none",stretchLastColumn:!0}),this._uniqueValueGrid.addClass("ipydatagrid-unique-value-grid"),this._uniqueValueStateManager=new _({grid:this._uniqueValueGrid});const t=new f({stateManager:this._uniqueValueStateManager,dialog:this});this._uniqueValueGrid.mouseHandler=t,this._titleWidget=new d.Widget,this._titleWidget.addClass("ipydatagrid-filter-title"),this._applyWidget=new d.Widget,this._applyWidget.addClass("ipydatagrid-filter-apply"),this._textInputWidget=new m,this._selectAllCheckbox=new p,this._connectToCheckbox(),this.addWidget(this._titleWidget),this.addWidget(this._textInputWidget),this.addWidget(this._selectAllCheckbox),this.addWidget(this._filterByConditionWidget),this.addWidget(this._uniqueValueGrid),this.addWidget(this._applyWidget)}_connectToCheckbox(){this._selectAllCheckbox.checkChanged.connect(((e,t)=>{this.userInteractedWithDialog=!0,this.addRemoveAllUniqueValuesToState(t)}))}hasValidFilterValue(){return""!==this._filterValue&&void 0!==this._filterValue&&(!Array.isArray(this._filterValue)||""!==this._filterValue[0]&&void 0!==this._filterValue[0]&&""!==this._filterValue[1]&&void 0!==this._filterValue[1])}applyFilter(){if(!this.hasValidFilterValue)return;if(!this.hasFilter&&!this.userInteractedWithDialog&&"value"===this._mode)return void this.close();const e="condition"===this._mode?this._filterValue:this._uniqueValueStateManager.getValues(this.region,this._columnIndex),t={type:"filter",columnIndex:this.model.getSchemaIndex(this._region,this._columnIndex),operator:this._filterOperator,value:e};this._model.addTransform(t),this.close()}updateDialog(){const e=this.model.getSchemaIndex(this._region,this._columnIndex),t=this._model.transformMetadata(e);t&&t.filter?(this._filterOperator=t.filter.operator,this._filterValue=t.filter.value):(this._filterOperator="<",this._filterValue=void 0),"value"===this._mode&&(this._filterOperator="in"),this._render()}_render(){if("condition"===this._mode)this._applyWidget.node.style.minHeight="65px",this._selectAllCheckbox.setHidden(!0),this._uniqueValueGrid.setHidden(!0),this._textInputWidget.setHidden(!0),this._filterByConditionWidget.setHidden(!1),h.VirtualDOM.render([this.createOperatorList()],this._filterByConditionWidget.node),h.VirtualDOM.render([this.createTitleNode()],this._titleWidget.node),h.VirtualDOM.render(["between"===this._filterOperator?this.createDualValueNode():this.createSingleValueNode()],this._applyWidget.node);else{if("value"!==this._mode)throw"unreachable";this._applyWidget.node.style.minHeight="30px",this._selectAllCheckbox.setHidden(!1),this._uniqueValueGrid.setHidden(!1),this._textInputWidget.setHidden(!1),this._filterByConditionWidget.setHidden(!0),h.VirtualDOM.render([this.createTitleNode()],this._titleWidget.node),h.VirtualDOM.render([this.createTextInputDialog()],this._textInputWidget.node),h.VirtualDOM.render([this.createApplyButtonNode()],this._applyWidget.node),this._renderUniqueVals()}}_renderUniqueVals(){return r(this,void 0,void 0,(function*(){this._model.uniqueValues(this._region,this._columnIndex).then((e=>{const t={schema:{fields:[{name:"index",type:"integer",rows:[]},{name:"uniqueVals",type:"number",rows:[]}],primaryKey:["index"],primaryKeyUuid:"index"},data:e.map(((e,t)=>({index:t,uniqueVals:e})))};this._uniqueValueGrid.dataModel=new n.ViewBasedJSONModel(t);const i={type:"sort",columnIndex:this.model.getSchemaIndex(this._region,0),desc:!1};this._uniqueValueGrid.dataModel.addTransform(i)}))}))}updateSelectAllCheckboxState(){this.userInteractedWithDialog||this.hasFilter?this._model.uniqueValues(this._region,this._columnIndex).then((e=>{let t=!0;for(const i of e)if(!this._uniqueValueStateManager.has(this._region,this._columnIndex,i)){t=!1;break}this._selectAllCheckbox.checked=t})):this._selectAllCheckbox.checked=!0}open(e){this._columnIndex=e.columnIndex,this._columnDType=this._model.metadata(e.region,0,e.columnIndex).type,this._region=e.region,this._mode=e.mode,this.hasFilter=void 0!==this._model.getFilterTransform(this.model.getSchemaIndex(this._region,this._columnIndex)),this.userInteractedWithDialog=!1,this.updateSelectAllCheckboxState(),this._uniqueValueGrid.style={voidColor:u.Theme.getBackgroundColor(),backgroundColor:u.Theme.getBackgroundColor(),gridLineColor:u.Theme.getBackgroundColor(),headerGridLineColor:u.Theme.getBorderColor(1),selectionFillColor:u.Theme.getBrandColor(2,.4),selectionBorderColor:u.Theme.getBrandColor(1),headerSelectionFillColor:u.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:u.Theme.getBorderColor(1),cursorFillColor:u.Theme.getBrandColor(3,.4),cursorBorderColor:u.Theme.getBrandColor(1)},this._uniqueValueGrid.cellRenderers.update({body:new c.FilterValueRenderer({stateManager:this._uniqueValueStateManager,dialog:this,textColor:u.Theme.getFontColor(),backgroundColor:u.Theme.getBackgroundColor()})}),this.updateDialog();const t=window.pageXOffset,i=window.pageYOffset,r=document.documentElement.clientWidth,n=document.documentElement.clientHeight,o=n-(e.forceY?e.y:0),a=this.node,s=a.style;s.top="",s.left="",s.width="",s.height="",s.visibility="hidden",s.maxHeight=`${o}px`,d.Widget.attach(this,document.body);const{width:l,height:h}=a.getBoundingClientRect();!e.forceX&&e.x+l>t+r&&(e.x=t+r-l),!e.forceY&&e.y+h>i+n&&(e.y>i+n?e.y=i+n-h:e.y=e.y-h),s.top=`${Math.max(0,e.y)}px`,s.left=`${Math.max(0,e.x)}px`,s.visibility=""}handleEvent(e){switch(e.type){case"mousedown":this._evtMouseDown(e);break;case"keydown":this._evtKeyDown(e)}}_evtMouseDown(e){this.node.contains(e.target)||this.close()}_evtKeyDown(e){switch(e.stopPropagation(),e.keyCode){case 13:return void this.applyFilter();case 27:return void this.close()}}onBeforeAttach(e){document.addEventListener("mousedown",this,!0),document.addEventListener("keydown",this,!0)}onAfterDetach(e){document.removeEventListener("mousedown",this,!0),document.removeEventListener("keydown",this,!0)}createTextInputDialog(){return h.h.div({className:"ipydatagrid-text-input-filter"},h.h.input({type:"text",style:{marginRight:"5px",width:"200px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),oninput:e=>{const t=e.srcElement,i=this._uniqueValueGrid.dataModel;if(""===t.value)return i.clearTransforms(),this._textInputFilterValue=void 0,void this._selectAllCheckbox.setHidden(!1);this._textInputFilterValue=t.value;const r={type:"filter",columnIndex:1,operator:"stringContains",value:this._textInputFilterValue};this._selectAllCheckbox.setHidden(!0),i.clearTransforms(),i.addTransform(r)}}))}createTitleNode(){return h.h.div({className:"",style:{paddingLeft:"5px",color:"var(--ipydatagrid-filter-dlg-textcolor,black)"}},"condition"===this._mode?"Filter by condition:":"Filter by value:")}createSingleValueNode(){return h.h.div({className:"widget-text",style:{paddingLeft:"5px",minHeight:"60px"}},h.h.input({type:"text",style:{marginRight:"5px",width:"200px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)",visibility:"empty"===this._filterOperator||"notempty"===this._filterOperator||"value"===this._mode?"hidden":"visible"},key:String(Math.random()),oninput:e=>{const t=e.srcElement;this._filterValue="number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value},value:void 0===this._filterValue||Array.isArray(this._filterValue)?"":String(this._filterValue)}),h.h.div({className:"",style:{width:"202px",textAlign:"right",paddingTop:"5px"}},h.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",padding:"1px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply")))}createDualValueNode(){const e=this._filterValue;return h.h.div({className:"widget-text",style:{paddingLeft:"5px",color:"var(--ipydatagrid-filter-dlg-textcolor,black)"}},h.h.input({style:{marginRight:"5px",width:"75px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),type:"text",oninput:e=>{const t=e.srcElement;this._filterValue=["number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value,this._filterValue[1]]},value:void 0!==e[0]?String(e[0]):""}),"and ",h.h.input({style:{marginRight:"5px",width:"75px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),type:"text",oninput:e=>{const t=e.srcElement;this._filterValue=[this._filterValue[0],"number"===this._columnDType||"integer"===this._columnDType?Number(t.value):t.value]},value:void 0!==e[1]?String(e[1]):""}),h.h.div({className:"",style:{width:"202px",textAlign:"right",paddingTop:"5px"}},h.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",padding:"1px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply")))}createLoadingMessageNodes(){return h.h.div({className:"p-Menu-itemLabel widget-text",style:{paddingLeft:"5px"}},"Loading unique values...")}createUniqueValueNodes(){return r(this,void 0,void 0,(function*(){const e=(yield this._model.uniqueValues(this._region,this._columnIndex)).map((e=>h.h.option({value:e},String(e))));return h.h.li({className:"p-Menu-item"},h.h.div({className:"widget-select widget-select-multiple",style:{width:"200px"}},h.h.select({multiple:"",value:"",style:{width:"200px",height:"200px",margin:"5px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},onchange:e=>{const t=e.srcElement,i=[];for(let e=0;e<t.options.length;e++)t.options[e].selected&&i.push("number"===this._columnDType||"integer"===this._columnDType?Number(t.options[e].value):t.options[e].value);this._filterValue=i}},e)))}))}createOperatorList(){let e;return e="number"===this._columnDType||"integer"===this._columnDType?this._createNumericalOperators():["date","time","datetime"].includes(this._columnDType)?this._createDateOperators():"boolean"===this._columnDType?this._createBooleanOperators():this._createCategoricalOperators(),h.h.div({className:"widget-dropdown",style:{paddingLeft:"5px"}},h.h.select({style:{width:"200px",fontSize:"12px",background:"var(--ipydatagrid-filter-dlg-bgcolor,white)"},key:String(Math.random()),onchange:e=>{const t=e.srcElement;this._filterOperator=t.value,"between"===t.value&&(this._filterValue=new Array(2)),this._render()},value:this._filterOperator},...e))}createApplyButtonNode(){return h.h.div({className:"",style:{paddingLeft:"5px",textAlign:"right",minHeight:"30px"}},h.h.button({className:"jupyter-widgets jupyter-button widget-button",style:{width:"60px",border:"1px solid var(--ipydatagrid-menu-border-color, #bdbdbd)"},onclick:this.applyFilter.bind(this)},"Apply"))}_createNumericalOperators(){const e=this._filterOperator;return[h.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),h.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:"),h.h.option({value:"",disabled:"disabled"},"───────────"),h.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Less than:"),h.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Greater than:"),h.h.option(Object.assign({value:"<="},"<="===e&&{selected:""}),"Less than or equal to:"),h.h.option(Object.assign({value:">="},">="===e&&{selected:""}),"Greater than or equal to:"),h.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"In between:"),h.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Is equal to:"),h.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Is not equal to:")]}_createDateOperators(){const e=this._filterOperator;return[h.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),h.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:"),h.h.option({value:"",disabled:"disabled"},"───────────"),h.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Date is before:"),h.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Date is after:"),h.h.option(Object.assign({value:"<="},"<"===e&&{selected:""}),"Date is on or before:"),h.h.option(Object.assign({value:">="},">"===e&&{selected:""}),"Date is on or after:"),h.h.option(Object.assign({value:"isOnSameDay"},"between"===e&&{selected:""}),"Date is exactly:"),h.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"Date is in between:"),h.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Timestamp is exactly equal to:"),h.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Timestamp is not exactly equal to:")]}_createBooleanOperators(){const e=this._filterOperator;return[h.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty:"),h.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty:")]}_createCategoricalOperators(){const e=this._filterOperator;return[h.h.option(Object.assign({value:"empty"},"empty"===e&&{selected:""}),"Is empty"),h.h.option(Object.assign({value:"notempty"},"notempty"===e&&{selected:""}),"Is not empty"),h.h.option({value:"",disabled:"disabled"},"───────────"),h.h.option(Object.assign({value:"contains"},"contains"===e&&{selected:""}),"Contains"),h.h.option(Object.assign({value:"!contains"},"!contains"===e&&{selected:""}),"Does not contain"),h.h.option(Object.assign({value:"startswith"},"startswith"===e&&{selected:""}),"Starts with"),h.h.option(Object.assign({value:"endswith"},"endswith"===e&&{selected:""}),"Ends with"),h.h.option(Object.assign({value:"="},"="===e&&{selected:""}),"Is exactly"),h.h.option(Object.assign({value:"!="},"!="===e&&{selected:""}),"Is not exactly"),h.h.option({value:"",disabled:"disabled"},"───────────"),h.h.option(Object.assign({value:"<"},"<"===e&&{selected:""}),"Is before"),h.h.option(Object.assign({value:">"},">"===e&&{selected:""}),"Is after"),h.h.option(Object.assign({value:"between"},"between"===e&&{selected:""}),"Is in between")]}addRemoveAllUniqueValuesToState(e){return r(this,void 0,void 0,(function*(){return this.model.uniqueValues(this._region,this._columnIndex).then((t=>{for(const i of t)e?this._uniqueValueStateManager.add(this._region,this._columnIndex,i):this._uniqueValueStateManager.remove(this._region,this._columnIndex,i)}))}))}get model(){return this._model}set model(e){this._model=e}get value(){return this._filterValue}get operator(){return this._filterOperator}get region(){return this._region}get columnIndex(){return this._columnIndex}get columnDType(){return this._columnDType}}t.InteractiveFilterDialog=g;class m extends d.Widget{constructor(){super(),this.node.style.minHeight="16px",this.node.style.overflow="visible"}}class p extends d.Widget{constructor(){super(),this.toggleCheckMark=()=>{this._checked=!this._checked,this.renderCheckbox(),this._checkedChanged.emit(this._checked)},this._checked=!1,this._checkedChanged=new a.Signal(this),this.canvas=document.createElement("canvas"),this.node.style.minHeight="16px",this.node.style.overflow="visible",this.node.appendChild(this.canvas)}get checked(){return this._checked}set checked(e){this._checked=e,this.renderCheckbox()}get checkChanged(){return this._checkedChanged}addCheckMark(){const e=this.canvas.getContext("2d");e.lineWidth=1,e.beginPath(),e.strokeStyle="#000000",e.moveTo(11,13),e.lineTo(12,16),e.lineTo(16,10),e.lineWidth=2,e.stroke()}renderCheckbox(){const e=this.canvas.getContext("2d");this.canvas.style.width="100px",this.canvas.style.height="100px";const t=window.devicePixelRatio;this.canvas.width=Math.floor(100*t),this.canvas.height=Math.floor(100*t),e.scale(t,t),e.lineWidth=1,e.fillStyle="#ffffff",e.fillRect(8,8,10,10),e.strokeStyle="black",e.strokeRect(8,8,10,10),e.font="12px sans-serif",e.fillStyle=u.Theme.getFontColor(0),e.fillText("(Select All)",30,17),this._checked&&this.addCheckMark()}onAfterAttach(){this.renderCheckbox(),this.canvas.addEventListener("click",this.toggleCheckMark,!0)}onAfterDetach(e){this.canvas.removeEventListener("click",this.toggleCheckMark,!0)}}class _{constructor(e){this._state={},this._grid=e.grid}has(e,t,i){const r=this.getKeyName(e,t);return this._state.hasOwnProperty(r)&&this._state[r].has(i)}getKeyName(e,t){return`${e}:${t}`}add(e,t,i){const r=this.getKeyName(e,t);this._state.hasOwnProperty(r)||(this._state[r]=new Set),this._state[r].add(i);const n=new y("all",0,0,0,0);s.MessageLoop.postMessage(this._grid.viewport,n)}remove(e,t,i){const r=this.getKeyName(e,t);this._state.hasOwnProperty(r)&&this._state[r].delete(i);const n=new y("all",0,0,0,0);s.MessageLoop.postMessage(this._grid.viewport,n)}getValues(e,t){const i=this.getKeyName(e,t);return this._state.hasOwnProperty(i)?Array.from(this._state[i]):[]}}t.UniqueValueStateManager=_;class f extends l.BasicMouseHandler{constructor(e){super(),this._uniqueValuesSelectionState=e.stateManager,this._filterDialog=e.dialog}onMouseDown(e,t){const i=e.hitTest(t.clientX,t.clientY);if("void"===i.region)return;const r=i.row,n=this._filterDialog.columnIndex,o=this._filterDialog.region,a=e.dataModel.data("body",r,0),s=()=>{this._uniqueValuesSelectionState.has(o,n,a)?this._uniqueValuesSelectionState.remove(o,n,a):this._uniqueValuesSelectionState.add(o,n,a),this._filterDialog.updateSelectAllCheckboxState()};this._filterDialog.hasFilter||this._filterDialog.userInteractedWithDialog?s():this._filterDialog.addRemoveAllUniqueValuesToState(!0).then((()=>{this._filterDialog.userInteractedWithDialog=!0,s()}))}}class y extends s.ConflatableMessage{constructor(e,t,i,r,n){super("paint-request"),this._region=e,this._r1=t,this._c1=i,this._r2=r,this._c2=n}get region(){return this._region}get r1(){return this._r1}get c1(){return this._c1}get r2(){return this._r2}get c2(){return this._c2}conflate(e){return"all"===this._region||("all"===e._region?(this._region="all",!0):this._region===e._region&&(this._r1=Math.min(this._r1,e._r1),this._c1=Math.min(this._c1,e._c1),this._r2=Math.max(this._r2,e._r2),this._c2=Math.max(this._c2,e._c2),!0))}}},6175:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatherGridContextMenu=t.GridContextMenu=void 0;const r=i(3992);class n{constructor(e){this._menu=new r.Menu({commands:e.commands}),this._menu.addClass("ipydatagrid-context-menu")}}t.GridContextMenu=n;class o extends n{open(e,t){this._menu.clearItems();const i={region:t.region,rowIndex:t.row,columnIndex:t.column,clientX:t.x,clientY:t.y};switch(t.region){case"column-header":case"corner-header":this._menu.addItem({command:o.CommandID.SortAscending,args:i}),this._menu.addItem({command:o.CommandID.SortDescending,args:i}),this._menu.addItem({command:o.CommandID.OpenFilterByConditionDialog,args:i}),this._menu.addItem({command:o.CommandID.OpenFilterByValueDialog,args:i}),this._menu.addItem({command:o.CommandID.ClearThisFilter,args:i}),this._menu.addItem({command:o.CommandID.ClearFiltersInAllColumns,args:i});break;case"body":this._menu.addItem({command:o.CommandID.RevertGrid,args:i});break;default:throw"unreachable"}this._menu.open(t.x,t.y)}}t.FeatherGridContextMenu=o,function(e){let t;!function(e){e.SortAscending="sort:Asc",e.SortDescending="sort:Desc",e.OpenFilterByConditionDialog="filterCondition:openDialog",e.OpenFilterByValueDialog="filterValue:openDialog",e.RevertGrid="grid:reset",e.ClearThisFilter="filter:clearCurrentColumn",e.ClearFiltersInAllColumns="filter:clearAllColumns"}(t=e.CommandID||(e.CommandID={}))}(o=t.FeatherGridContextMenu||(t.FeatherGridContextMenu={}))},2320:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderRenderer=void 0;const r=i(4706),n=i(6988);class o extends r.TextRenderer{constructor(e){super(e.textOptions),this._isLightTheme=e.isLightTheme,this._grid=e.grid}get model(){return this._grid.dataModel}drawText(e,t){const i=r.CellRenderer.resolveOption(this.font,t);if(!i)return;const a=r.CellRenderer.resolveOption(this.textColor,t);if(!a)return;let s=(0,this.format)(t);if(!s)return;const l=r.CellRenderer.resolveOption(this.verticalAlignment,t),d=r.CellRenderer.resolveOption(this.horizontalAlignment,t),h=r.CellRenderer.resolveOption(this.elideDirection,t),c=r.CellRenderer.resolveOption(this.wrapText,t),u=t.height-("center"===l?1:2);if(u<=0)return;const g=r.TextRenderer.measureFontHeight(i);let m,p,_;switch(l){case"top":p=t.y+2+g;break;case"center":p=t.y+t.height/2+g/2;break;case"bottom":p=t.y+t.height-2;break;default:throw"unreachable"}switch(d){case"left":m=t.x+8,_=t.width-14;break;case"center":m=t.x+t.width/2,_=t.width;break;case"right":m=t.x+t.width-8,_=t.width-14;break;default:throw"unreachable"}g>u&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=i,e.fillStyle=a,e.textAlign=d,e.textBaseline="bottom";let f=e.measureText(s).width;if(c&&f>_){e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip();const i=s.split(/\s(?=\b)/);let r=p,n=i.shift();if(0===i.length){let t=e.measureText(n).width;for(;t>_&&""!==n;)for(let i=n.length;i>0;i--){const o=n.substring(0,i);if(e.measureText(o).width<_||1===o.length){const a=n.substring(i,n.length);n=a,t=e.measureText(n).width,e.fillText(o,m,r),r+=g;break}}}else for(;0!==i.length;){const t=i.shift(),o=[n,t].join(" ");e.measureText(o).width>_?(e.fillText(n,m,r),r+=g,n=t):n=o}return void e.fillText(n,m,r)}const y="…";if("right"===h)for(;f>_&&s.length>1;)s=s.length>4&&f>=2*_?s.substring(0,s.length/2+1)+y:s.substring(0,s.length-2)+y,f=e.measureText(s).width;else for(;f>_&&s.length>1;)s=s.length>4&&f>=2*_?y+s.substring(s.length/2):y+s.substring(2),f=e.measureText(s).width;if(e.fillText(s,m,p),"column-header"===t.region&&t.row!==this._grid.dataModel.rowCount("column-header")-1)return;const b=o.iconWidth+o.iconWidth+o.iconSpacing+2*o.buttonPadding;e.fillStyle=r.CellRenderer.resolveOption(this.backgroundColor,t),e.fillRect(t.x+t.width-b,t.y+t.height-b,b,b);const w=t.x+t.width-o.iconWidth-o.buttonPadding;if(this.drawFilterIcon(e,t),e.fillStyle=n.Theme.getBorderColor(1),e.fill(),this.model){const i=this.model.getSchemaIndex(t.region,t.column),r=this.model.transformMetadata(i);r&&r.filter&&(e.fillStyle=n.Theme.getBrandColor(this._isLightTheme?8:6),e.fill()),r&&r.sort&&(r.sort.desc?this.drawSortArrow(e,t,w,!1):this.drawSortArrow(e,t,w,!0),e.fillStyle=n.Theme.getBrandColor(this._isLightTheme?7:5),e.fill())}}drawFilterIcon(e,t){const i=t.x+t.width-o.iconWidth-o.buttonPadding,r=o.iconWidth/2+1,n=o.iconWidth/2-1,a=t.height-o.iconHeight-1+t.y;e.beginPath(),e.moveTo(i,a),e.lineTo(i+o.iconWidth,a),e.lineTo(i+r,t.y+t.height-o.iconHeight+2),e.lineTo(i+r,t.y+t.height-1.5*o.buttonPadding),e.lineTo(i+n,t.y+t.height-2*o.buttonPadding),e.lineTo(i+n,t.y+t.height-o.iconHeight+2),e.closePath()}drawSortArrow(e,t,i,r){const n=o.iconWidth-2,a=i-o.iconSpacing,s=a-n/2+.5,l=a-n/2-.5,d=t.height+t.y-o.buttonPadding-o.iconHeight+4,h=a-n/2,c=t.height+t.y-o.iconHeight-1,u=t.height-8+t.y+o.buttonPadding;e.beginPath(),r?(e.moveTo(h,c),e.lineTo(a,d),e.lineTo(a,d+1),e.lineTo(s,d+1),e.lineTo(h+.5,u),e.lineTo(h-.5,u),e.lineTo(h-.5,d+1),e.lineTo(a-n,d+1),e.lineTo(a-n,d)):(e.moveTo(h,u),e.lineTo(a-n,d+4.5),e.lineTo(a-n,d+3.5),e.lineTo(l,d+3.5),e.lineTo(l,c),e.lineTo(h+.5,c),e.lineTo(h+.5,d+3.5),e.lineTo(a,d+3.5),e.lineTo(a,d+4.5)),e.closePath()}}t.HeaderRenderer=o,o.buttonSize=11,o.iconHeight=12,o.iconWidth=7,o.buttonPadding=3,o.iconSpacing=1.5},5091:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.SortExecutor=t.FilterExecutor=t.TransformExecutor=void 0;const a=i(8918),s=o(i(4031));class l{}t.TransformExecutor=l,t.FilterExecutor=class extends l{constructor(e){super(),this._options=e}apply(e){let t;switch(this._options.operator){case">":t=e=>{if(["date","datetime","time"].includes(this._options.dType)){const t=s.default.utc(e[this._options.field]),i=s.default.utc(this._options.value);return t.isAfter(i,"day")}return e[this._options.field]>this._options.value};break;case"<":t=e=>{if(["date","datetime","time"].includes(this._options.dType)){const t=s.default.utc(e[this._options.field]),i=s.default.utc(this._options.value);return t.isBefore(i,"day")}return e[this._options.field]<this._options.value};break;case"<=":t=e=>{if(["date","datetime","time"].includes(this._options.dType)){const t=s.default.utc(e[this._options.field]),i=s.default.utc(this._options.value);return t.isSameOrBefore(i,"day")}return e[this._options.field]<=this._options.value};break;case">=":t=e=>{if(["date","datetime","time"].includes(this._options.dType)){const t=s.default.utc(e[this._options.field]),i=s.default.utc(this._options.value);return t.isSameOrAfter(i,"day")}return e[this._options.field]>=this._options.value};break;case"=":t=e=>{if(["date","datetime","time"].includes(this._options.dType)){const t=s.default.utc(e[this._options.field]),i=s.default.utc(this._options.value);return t.isSame(i)}return e[this._options.field]==this._options.value};break;case"!=":t=e=>{if(["date","datetime","time"].includes(this._options.dType)){const t=s.default.utc(e[this._options.field]),i=s.default.utc(this._options.value);return!t.isSame(i)}return e[this._options.field]!==this._options.value};break;case"empty":t=e=>null===e[this._options.field];break;case"notempty":t=e=>null!==e[this._options.field];break;case"in":t=e=>this._options.value.includes(e[this._options.field]);break;case"between":t=e=>{const t=this._options.value;if(["date","datetime","time"].includes(this._options.dType)){const i=s.default.utc(e[this._options.field]),r=s.default.utc(t[0]),n=s.default.utc(t[1]);return i.isBetween(r,n,"day")}return e[this._options.field]>t[0]&&e[this._options.field]<t[1]};break;case"startswith":t=e=>e[this._options.field].startsWith(this._options.value);break;case"endswith":t=e=>e[this._options.field].endsWith(this._options.value);break;case"stringContains":t=e=>String(e[this._options.field]).toLowerCase().includes(String(this._options.value).toLowerCase());break;case"contains":t=e=>e[this._options.field].includes(this._options.value);break;case"!contains":t=e=>!e[this._options.field].includes(this._options.value);break;case"isOnSameDay":t=e=>{const t=s.default.utc(e[this._options.field]),i=s.default.utc(this._options.value);return t.isSame(i,"day")};break;default:throw"unreachable"}return{schema:e.schema,data:a.toArray(a.filter(e.data,t))}}},t.SortExecutor=class extends l{constructor(e){super(),this._options=e}apply(e){let t;const i=this._options.field,r=this._options.dType,n=e=>"string"!=typeof e?String(e):e;t="string"==r?this._options.desc?(e,t)=>n(e[i])<n(t[i])?1:-1:(e,t)=>n(e[i])>n(t[i])?1:-1:this._options.desc?(e,t)=>e[i]<t[i]?1:-1:(e,t)=>e[i]>t[i]?1:-1;const o=e.data.slice(0),a=[],s=[];return o.forEach((e=>{const t=e[i];null===t||"number"==typeof t&&Number.isNaN(t)||t instanceof Date&&Number.isNaN(t.getTime())?s.push(e):a.push(e)})),{schema:e.schema,data:a.sort(t).concat(s)}}}},8405:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransformStateManager=void 0;const r=i(2679),n=i(5091),o=i(8918),a=i(1526),s=i(1840);t.TransformStateManager=class{constructor(){this._state={},this._changed=new s.Signal(this)}_add(e){switch(this._state.hasOwnProperty(e.columnIndex)||(this._state[e.columnIndex]={sort:void 0,filter:void 0}),e.type){case"sort":for(const e of Object.keys(this._state))this._state[e].sort=void 0;this._state[e.columnIndex].sort=e;break;case"filter":this._state[e.columnIndex].filter=e;break;default:throw"unreachable"}}add(e){try{this._add(e),this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}replace(e){if(!a.JSONExt.deepEqual(e,this.activeTransforms))try{this._state={},o.each(e,(e=>{this._add(e)})),this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}createView(e){const t=this._createExecutors(e);let i=e;return o.each(t,(e=>{i=e.apply(i)})),new r.View(i)}_createExecutors(e){const t=[],i=[];return Object.keys(this._state).forEach((r=>{const o=this._state[r];if(o.sort){const i=new n.SortExecutor({field:e.schema.fields[o.sort.columnIndex].name,dType:e.schema.fields[o.sort.columnIndex].type,desc:o.sort.desc});t.push(i)}if(o.filter){const t=new n.FilterExecutor({field:e.schema.fields[o.filter.columnIndex].name,dType:e.schema.fields[o.filter.columnIndex].type,operator:o.filter.operator,value:o.filter.value});i.push(t)}})),[...i,...t]}remove(e,t){if(this._state.hasOwnProperty(e))try{const i=this._state[e];if("sort"===t)i.sort=void 0;else{if("filter"!==t)throw"unreachable";i.filter=void 0}i.sort||i.filter||delete this._state[e],this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}catch(e){this.clear()}}metadata(e){return this._state.hasOwnProperty(e)?this._state[e]:void 0}clear(){this._state={},this._changed.emit({type:"transforms-updated",transforms:this.activeTransforms})}get changed(){return this._changed}get activeTransforms(){const e=[];return o.each(Object.keys(this._state),(t=>{this._state[t].sort&&e.push(this._state[t].sort),this._state[t].filter&&e.push(this._state[t].filter)})),e}getFilterTransform(e){if(this._state.hasOwnProperty(e))return this._state[e].filter}}},4080:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FilterValueRenderer=void 0;const r=i(4706),n=i(6988);class o extends r.TextRenderer{constructor(e){super({textColor:e.textColor,backgroundColor:e.backgroundColor}),this._stateManager=e.stateManager,this._dialog=e.dialog}drawText(e,t){const i=r.CellRenderer.resolveOption(this.font,t);if(!i)return;const o=r.CellRenderer.resolveOption(this.textColor,t);if(!o)return;const a=(0,this.format)(t);if(!a)return;const s=r.CellRenderer.resolveOption(this.verticalAlignment,t),l=r.CellRenderer.resolveOption(this.horizontalAlignment,t),d=t.height-("center"===s?1:2);if(d<=0)return;const h=r.TextRenderer.measureFontHeight(i);let c,u;switch(s){case"top":u=t.y+2+h;break;case"center":u=t.y+t.height/2+h/2;break;case"bottom":u=t.y+t.height-2;break;default:throw"unreachable"}switch(l){case"left":c=t.x+2;break;case"center":c=t.x+t.width/2;break;case"right":c=t.x+t.width-3;break;default:throw"unreachable"}h>d&&(e.beginPath(),e.rect(t.x,t.y,t.width,t.height-1),e.clip()),e.font=i,e.fillStyle=o,e.textAlign=l,e.textBaseline="bottom",e.fillText(a,c+25,u),e.fillStyle=n.Theme.getBorderColor(1),e.fillStyle="#ffffff",e.fillRect(t.x+5,t.y+5,10,10),e.fillStyle="#000000",e.strokeRect(t.x+5,t.y+5,10,10),this._getCheckedState(t)&&(e.beginPath(),e.strokeStyle="#000000",e.moveTo(t.x+5+3,t.y+5+5),e.lineTo(t.x+5+4,t.y+5+8),e.lineTo(t.x+5+8,t.y+5+2),e.lineWidth=2,e.stroke())}_getCheckedState(e){return this._stateManager.has(this._dialog.region,this._dialog.columnIndex,e.value)||!this._dialog.hasFilter&&!this._dialog.userInteractedWithDialog}}t.FilterValueRenderer=o},2679:function(e,t){"use strict";var i,r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.View=void 0,t.View=class{constructor(e){const t=i.splitFields(e.schema);this._data=e.data,this._bodyFields=t.bodyFields,this._headerFields=t.headerFields,this._missingValues=i.createMissingMap(e.schema)}rowCount(e){return"body"===e?this._data.length:this._bodyFields[0].rows.length}columnCount(e){return"body"===e?this._bodyFields.length:this._headerFields.length}metadata(e,t,i){return"body"===e||"column-header"===e?Object.assign({row:t,column:i},this._bodyFields[i]):Object.assign({row:t,column:i},this._headerFields[i])}data(e,t,i){let r,n;switch(e){case"body":r=this._bodyFields[i],n=this._data[t][r.name];break;case"column-header":r=this._bodyFields[i],n=r.rows[t];break;case"row-header":r=this._headerFields[i],n=this._data[t][r.name];break;case"corner-header":r=this._headerFields[i],n=r.rows[t];break;default:throw"unreachable"}return null!==this._missingValues&&"string"==typeof n&&!0===this._missingValues[n]?null:n}get dataset(){return this._data}getSchemaIndex(e,t){return"corner-header"===e?t:this._headerFields.length+t}uniqueValues(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((i,r)=>{const n=this.metadata(e,0,t).name,o=new Set;for(const e of this.dataset)o.add(e[n]);i(Array.from(o))}))}))}},function(e){e.splitFields=function(e){let t;t=void 0===e.primaryKey?[]:"string"==typeof e.primaryKey?[e.primaryKey]:e.primaryKey;const i=[],r=[];for(const n of e.fields)n.rows[0]!=e.primaryKeyUuid&&(-1===t.indexOf(n.name)?i.push(n):r.push(n));return{bodyFields:i,headerFields:r}},e.createMissingMap=function(e){if(!e.missingValues||0===e.missingValues.length)return null;const t=Object.create(null);for(const i of e.missingValues)t[i]=!0;return t}}(i||(i={}))},8785:function(e,t,i){"use strict";var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.ViewBasedJSONModel=void 0;const n=i(4706),o=i(8918),a=i(1526),s=i(1840),l=i(2679),d=i(8405),h=i(6988);class c extends n.MutableDataModel{constructor(e){super(),this._transformSignal=new s.Signal(this),this._dataSyncSignal=new s.Signal(this),this._primaryKeyMap=new Map,this.updateDataset(e),this._transformState=new d.TransformStateManager,this._transformState.changed.connect(((e,t)=>{this.currentView=this._transformState.createView(this._dataset),this._transformSignal.emit(t)}));const t=h.ArrayUtils.generateMultiIndexArrayLocations(this);let i=h.ArrayUtils.generateColMergedCellLocations(this,t);h.ArrayUtils.validateMergingHierarchy(i)||(i=[]),this._mergedColumnCellLocations=i,this._columnCellGroups=h.ArrayUtils.generateColumnCellGroups(this._mergedColumnCellLocations);let r=h.ArrayUtils.generateRowMergedCellLocations(this);h.ArrayUtils.validateMergingHierarchy(i)||(r=[]),this._rowCellGroups=h.ArrayUtils.generateRowCellGroups(r)}updateDataset(e){this._dataset=e,this._updatePrimaryKeyMap();const t=new l.View(this._dataset);this.currentView=t}_updatePrimaryKeyMap(){this._primaryKeyMap.clear();const e=this._dataset.schema.primaryKey;o.each(this._dataset.data,((t,i)=>{const r=e.map((e=>t[e]));this._primaryKeyMap.set(JSON.stringify(r),i)}))}areCellsMerged(e,t){const[i,r]=t,n=this.getMergedSiblingCells(e);for(const e of n)if(i===e[0]&&r===e[1])return!0;return!1}getMergedSiblingCells(e){const[t,i]=e;if(t<0||i<0||t>=this._mergedColumnCellLocations.length)return[];for(const e of this._mergedColumnCellLocations[t])for(const r of e){const[n,o]=r;if(t===n&&i==o)return e}return[]}rowCount(e){return this.currentView.rowCount(e)}columnCount(e){return this.currentView.columnCount(e)}groupCount(e){return"body"===e?0:"column-header"===e?this._columnCellGroups.length:"row-header"===e?this._rowCellGroups.length:0}group(e,t){return"column-header"===e?this._columnCellGroups[t]:"row-header"===e?this._rowCellGroups[t]:null}metadata(e,t,i){const r=this.currentView.metadata(e,t,i);return"body"==e&&(r.row=t,r.column=i,r.data=(e,t)=>{const i=this.columnNameToIndex(t.toString());return this.data("body",e,i)}),r}data(e,t,i){return this.currentView.data(e,t,i)}setData(e,t,i,r){const n=this.getDatasetRowFromView(e,t);return this.updateCellValue({region:e,row:n,column:i,value:r}),this.emitChanged({type:"cells-changed",region:e,row:t,column:i,rowSpan:1,columnSpan:1}),!0}setModelData(e,t,i,r){return this.updateCellValue({region:e,row:t,column:i,value:r}),this.emitChanged({type:"cells-changed",region:e,row:t,column:i,rowSpan:1,columnSpan:1}),!0}columnNameToIndex(e){const t=this.dataset.schema,i=t.primaryKey.length-1;let r=-1;return t.primaryKey.includes(e)?r=t.primaryKey.indexOf(e):t.fields.forEach(((t,n)=>{t.name==e&&(r=n-i)})),r}columnIndexToName(e,t){const i=this.dataset.schema;return"row-header"==t?i.primaryKey[e]:i.fields[i.primaryKey.length+e-1].name}columnNameToRegion(e){return this.dataset.schema.primaryKey.includes(e)?"row-header":"body"}get currentView(){return this._currentView}set currentView(e){this._currentView=e,this.emitChanged({type:"model-reset"});const t=Array.isArray(this._dataset.schema.primaryKey)?this._dataset.schema.primaryKey:[this._dataset.schema.primaryKey],i=e.dataset.map(((e,i)=>{const r=JSON.stringify(t.map((t=>e[t]))),n=this._primaryKeyMap.get(r);return void 0===n?i:n}));this.dataSync.emit({type:"row-indices-updated",indices:i})}addTransform(e){this._transformState.add(e)}removeTransform(e,t){this._transformState.remove(e,t)}replaceTransforms(e){this._transformState.replace(e)}clearTransforms(){this._transformState.clear()}transformMetadata(e){return this._transformState.metadata(e)}uniqueValues(e,t){return r(this,void 0,void 0,(function*(){return new Promise(((i,r)=>{const n=this.metadata(e,0,t).name,o=new Set;for(const e of this.dataset.data)o.add(e[n]);i(Array.from(o))}))}))}uniqueValuesVisible(e,t){return r(this,void 0,void 0,(function*(){return this._currentView.uniqueValues(e,t)}))}get transformStateChanged(){return this._transformSignal}get activeTransforms(){return this._transformState.activeTransforms}getFilterTransform(e){return this._transformState.getFilterTransform(e)}getDatasetRowFromView(e,t){if("column-header"==e||"corner-header"==e)return t;const i=(Array.isArray(this._dataset.schema.primaryKey)?this._dataset.schema.primaryKey:[this._dataset.schema.primaryKey]).map((e=>this._currentView.dataset[t][e]));return this._primaryKeyMap.get(JSON.stringify(i))}updateCellValue(e){if("body"!==e.region)return;const t=Object.assign({},this._dataset.data[e.row]);t[this.metadata("body",0,e.column).name]=e.value;const i=Array.from(this._dataset.data);i[e.row]=t,this._dataset={data:i,schema:this._dataset.schema},e.syncData&&this.dataSync.emit({type:"cell-updated"}),this.dataSync.emit({type:"cell-edit-event",columnIndex:e.column,row:e.row,region:e.region,value:e.value}),this.currentView=this._transformState.createView(this._dataset)}get dataSync(){return this._dataSyncSignal}get dataset(){return this._dataset}getSchemaIndex(e,t){return this.currentView.getSchemaIndex(e,t)}static fromJsonData(e){const t=a.JSONExt.deepCopy(e);t.schema.primaryKeyUuid="ipydguuid";for(const e of t.schema.fields)e.rows=[e.name];let i=0;for(const e of t.data)e.ipydguuid=i++;return new c(t)}}t.ViewBasedJSONModel=c},5787:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&r(t,e,i);return n(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.VegaExprView=t.VegaExprModel=t.TextRendererView=t.TextRendererModel=t.HyperlinkRendererView=t.HyperlinkRendererModel=t.BarRendererView=t.BarRendererModel=t.DataGridView=t.DataGridModel=void 0;const a=o(i(7794)),s=i(4706),l=i(1526),d=i(2720),h=i(3992),c=i(2492),u=i(8785),g=i(8657),m=i(9453),p=i(6988);i(3613);class _ extends c.DOMWidgetModel{constructor(){super(...arguments),this.synchingWithKernel=!1}defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_module:_.model_module,_model_module_version:_.model_module_version,_view_name:_.view_name,_view_module:_.view_module,_view_module_version:_.view_module_version,_visible_rows:[],_transforms:[],baseRowSize:20,baseColumnSize:64,baseRowHeaderSize:64,baseColumnHeaderSize:20,headerVisibility:"all",_data:{},renderers:{},corner_renderer:null,default_renderer:null,header_renderer:null,selection_mode:"none",selections:[],grid_style:{},editable:!1,column_widths:{}})}initialize(e,t){super.initialize(e,t),this.updateDataSync=this.updateDataSync.bind(this),this.syncTransformState=this.syncTransformState.bind(this),this.on("change:_data",this.updateData.bind(this)),this.on("change:_transforms",this.updateTransforms.bind(this)),this.on("change:selection_mode",this.updateSelectionModel,this),this.on("change:selections",this.updateSelections,this),this.updateData(),this.updateTransforms(),this.updateSelectionModel(),this.on("msg:custom",(e=>{"cell-changed"===e.event_type&&this.data_model.setModelData("body",e.row,e.column_index,e.value)}))}updateDataSync(e,t){switch(t.type){case"row-indices-updated":this.set("_visible_rows",t.indices),this.save_changes();break;case"cell-updated":this.set("_data",this.data_model.dataset),this.save_changes();break;case"cell-edit-event":const e=this.get("_data");e.data[t.row][t.columnIndex]=t.value,this.set("_data",e),this.send({event_type:"cell-changed",region:t.region,row:t.row,column_index:t.columnIndex,value:t.value},Object.assign({},this._view_callbacks));break;default:throw"unreachable"}}syncTransformState(e,t){this.set("_transforms",t.transforms),this.save_changes()}updateData(){const e=this.data,t=b.createSchema(e);this.data_model&&(this.data_model.updateDataset({data:e.data,schema:t}),this.data_model.transformStateChanged.disconnect(this.syncTransformState),this.data_model.dataSync.disconnect(this.updateDataSync)),this.data_model=new u.ViewBasedJSONModel({data:e.data,schema:t}),this.data_model.transformStateChanged.connect(this.syncTransformState),this.data_model.dataSync.connect(this.updateDataSync),this.updateTransforms(),this.trigger("data-model-changed"),this.updateSelectionModel()}updateTransforms(){this.selectionModel&&this.selectionModel.clear(),this.data_model.replaceTransforms(this.get("_transforms"))}updateSelectionModel(){this.selectionModel&&this.selectionModel.clear();const e=this.get("selection_mode");"none"!==e?(this.selectionModel=new s.BasicSelectionModel({dataModel:this.data_model}),this.selectionModel.selectionMode=e,this.trigger("selection-model-changed"),this.selectionModel.changed.connect(((e,t)=>{if(this.synchingWithKernel)return;this.synchingWithKernel=!0;const i=e.selections().iter(),r=[];let n=null;for(;n=i.next();)r.push({r1:Math.min(n.r1,n.r2),r2:Math.max(n.r1,n.r2),c1:Math.min(n.c1,n.c2),c2:Math.max(n.c1,n.c2)});this.set("selections",r),this.save_changes(),this.synchingWithKernel=!1}),this)):this.selectionModel=null}updateSelections(){if(!this.selectionModel||this.synchingWithKernel)return;this.synchingWithKernel=!0;const e=this.get("selections");this.selectionModel.clear();for(const t of e)this.selectionModel.select({r1:t.r1,c1:t.c1,r2:t.r2,c2:t.c2,cursorRow:t.r1,cursorColumn:t.c1,clear:"none"});this.synchingWithKernel=!1}get data(){return this.get("_data")}}t.DataGridModel=_,_.serializers=Object.assign(Object.assign({},c.DOMWidgetModel.serializers),{transforms:{deserialize:c.unpack_models},renderers:{deserialize:c.unpack_models},corner_renderer:{deserialize:c.unpack_models},default_renderer:{deserialize:c.unpack_models},header_renderer:{deserialize:c.unpack_models},_data:{deserialize:function e(t,i){if(Array.isArray(t)){const r=[];return t.forEach(((t,n)=>{r.push(e(t,i))})),Promise.all(r)}if(t instanceof Object&&"string"!=typeof t){const r={};return Object.keys(t).forEach((n=>{r[n]=e(t[n],i)})),c.resolvePromisesDict(r)}return"$NaN$"===t?Promise.resolve(Number.NaN):"$Infinity$"===t?Promise.resolve(Number.POSITIVE_INFINITY):"$NegInfinity$"===t?Promise.resolve(Number.NEGATIVE_INFINITY):"$NaT$"===t?Promise.resolve(new Date("INVALID")):Promise.resolve(t)}},grid_style:{deserialize:function e(t,i){if(t instanceof Object&&"string"!=typeof t){const r={};return Object.keys(t).forEach((n=>{r[function(e){e=e.toLowerCase();const t=[];for(let i=0;i<e.length;i++){const r=e.charAt(i);"_"!==r?t.push(r):(i++,t.push(e.charAt(i).toUpperCase()))}return t.join("")}(n)]=e(t[n],i)})),c.resolvePromisesDict(r)}return"string"==typeof t&&"IPY_MODEL_"===t.slice(0,10)?Promise.resolve(i.get_model(t.slice(10,t.length))).then((e=>e._function)):Promise.resolve(t)}}}),_.model_name="DataGridModel",_.model_module=g.MODULE_NAME,_.model_module_version=g.MODULE_VERSION,_.view_name="DataGridView",_.view_module=g.MODULE_NAME,_.view_module_version=g.MODULE_VERSION;class f extends c.DOMWidgetView{constructor(){super(...arguments),this.manageResizeEvent=()=>{d.MessageLoop.postMessage(this.luminoWidget,h.Widget.ResizeMessage.UnknownSize)}}_createElement(e){const t=b.getWidgetPanel();return this.luminoWidget=new t({view:this}),this._initializeTheme(),this.luminoWidget.node}get pWidget(){return this.luminoWidget}_setElement(e){if(this.el||e!==this.luminoWidget.node)throw new Error("Cannot reset the DOM element.");this.el=this.luminoWidget.node}_processLuminoMessage(e,t){t.call(this,e),"after-show"===e.type&&this.luminoWidget.isVisible&&this.manageResizeEvent()}processLuminoMessage(e){this._processLuminoMessage(e,super.processLuminoMessage)}processPhosphorMessage(e){this._processLuminoMessage(e,super.processPhosphorMessage)}render(){return this.el.classList.add("datagrid-container"),window.addEventListener("resize",this.manageResizeEvent),this.once("remove",(()=>{window.removeEventListener("resize",this.manageResizeEvent)})),this.grid=new m.FeatherGrid({defaultSizes:{rowHeight:this.model.get("base_row_size"),columnWidth:this.model.get("base_column_size"),rowHeaderWidth:this.model.get("base_row_header_size"),columnHeaderHeight:this.model.get("base_column_header_size")},headerVisibility:this.model.get("header_visibility"),style:this.model.get("grid_style")}),this.grid.columnWidths=this.model.get("column_widths"),this.grid.editable=this.model.get("editable"),this.grid.isLightTheme=this._isLightTheme,this.grid.dataModel=this.model.data_model,this.grid.selectionModel=this.model.selectionModel,this.grid.backboneModel=this.model,this.grid.cellClicked.connect(((e,t)=>{this.model.comm&&this.send({event_type:"cell-click",region:t.region,column:t.column,column_index:t.columnIndex,row:t.row,primary_key_row:t.primaryKeyRow,cell_value:t.cellValue})})),this.grid.columnsResized.connect(((e,t)=>{this.model.set("column_widths",l.JSONExt.deepCopy(this.grid.columnWidths)),this.model.save_changes()})),this.model._view_callbacks=this.callbacks(),this.model.on("data-model-changed",(()=>{this.grid.dataModel=this.model.data_model})),this.model.on("change:base_row_size",(()=>{this.grid.baseRowSize=this.model.get("base_row_size")})),this.model.on("change:base_column_size",(()=>{this.grid.baseColumnSize=this.model.get("base_column_size")})),this.model.on("change:column_widths",(()=>{this.grid.columnWidths=this.model.get("column_widths")})),this.model.on("change:base_row_header_size",(()=>{this.grid.baseRowHeaderSize=this.model.get("base_row_header_size")})),this.model.on("change:base_column_header_size",(()=>{this.grid.baseColumnHeaderSize=this.model.get("base_column_header_size")})),this.model.on("change:header_visibility",(()=>{this.grid.headerVisibility=this.model.get("header_visibility")})),this.model.on_some_change(["corner_renderer","header_renderer","default_renderer","renderers","grid_style"],(()=>{this.updateRenderers().then(this.updateGridStyle.bind(this)).then(this.updateGridRenderers.bind(this))}),this),this.model.on("selection-model-changed",(()=>{this.grid.selectionModel=this.model.selectionModel})),this.model.on("change:editable",(()=>{this.grid.editable=this.model.get("editable")})),this.model.on_some_change(["auto_fit_columns","auto_fit_params"],(()=>{this.handleColumnAutoFit()}),this),this.model.get("auto_fit_columns")&&this.handleColumnAutoFit(),this.updateRenderers().then((()=>{this.updateGridStyle(),this.updateGridRenderers(),this.luminoWidget.addWidget(this.grid)}))}handleColumnAutoFit(){if(!this.model.get("auto_fit_columns"))return void(this.grid.baseColumnSize=this.model.get("base_column_size"));let{area:e,padding:t,numCols:i}=this.model.get("auto_fit_params");e=null!=e?e:"all",t=null!=t?t:30,i=null!=i?i:void 0,this.grid.grid.fitColumnNames(e,t,i)}updateRenderers(){this.default_renderer&&this.stopListening(this.default_renderer,"renderer-changed"),this.header_renderer&&this.stopListening(this.header_renderer,"renderer-changed"),this.corner_renderer&&this.stopListening(this.corner_renderer,"renderer-changed");for(const e in this.renderers)this.stopListening(this.renderers[e],"renderer-changed");const e=[],t=this.model.get("default_renderer");e.push(this.create_child_view(t).then((e=>{this.default_renderer=e,this.listenTo(this.default_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const i=this.model.get("corner_renderer");i&&e.push(this.create_child_view(i).then((e=>{this.corner_renderer=e,this.listenTo(this.corner_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const r=this.model.get("header_renderer");r&&e.push(this.create_child_view(r).then((e=>{this.header_renderer=e,this.listenTo(this.header_renderer,"renderer-changed",this.updateGridRenderers.bind(this))})));const n={};return a.each(this.model.get("renderers"),((e,t)=>{n[t]=this.create_child_view(e)})),e.push(c.resolvePromisesDict(n).then((e=>{this.renderers=e;for(const t in e)this.listenTo(e[t],"renderer-changed",this.updateGridRenderers.bind(this))}))),Promise.all(e)}updateGridStyle(){this.grid.updateGridStyle()}set isLightTheme(e){this._isLightTheme=e,this.grid&&(this.grid.isLightTheme=e)}get isLightTheme(){return this._isLightTheme}updateGridRenderers(){let e=this.default_renderer.renderer;(this.grid.grid.style.backgroundColor!==p.Theme.getBackgroundColor()||this.grid.grid.style.rowBackgroundColor||this.grid.grid.style.columnBackgroundColor)&&(e=new s.TextRenderer(Object.assign(Object.assign({},this.default_renderer.renderer),{backgroundColor:void 0})));const t=null!==this.model.get("header_renderer");let i=null;i=this.header_renderer&&t?this.header_renderer.renderer:new s.TextRenderer({font:"12px sans-serif",textColor:p.Theme.getFontColor(),backgroundColor:p.Theme.getBackgroundColor(2)});let r=null;this.corner_renderer&&(r=this.corner_renderer.renderer);const n={};Object.entries(this.renderers).forEach((([e,t])=>{n[e]=t.renderer})),this.grid.defaultRenderer=e,this.grid.columnHeaderRenderer=i,r&&(this.grid.cornerHeaderRenderer=r),this.grid.renderers=n}_initializeTheme(){void 0===this._isLightTheme&&(this._isLightTheme=!(document.body.classList.contains("theme-dark")||"false"===document.body.dataset.jpThemeLight))}}t.DataGridView=f;var y=i(2509);Object.defineProperty(t,"BarRendererModel",{enumerable:!0,get:function(){return y.BarRendererModel}}),Object.defineProperty(t,"BarRendererView",{enumerable:!0,get:function(){return y.BarRendererView}}),Object.defineProperty(t,"HyperlinkRendererModel",{enumerable:!0,get:function(){return y.HyperlinkRendererModel}}),Object.defineProperty(t,"HyperlinkRendererView",{enumerable:!0,get:function(){return y.HyperlinkRendererView}}),Object.defineProperty(t,"TextRendererModel",{enumerable:!0,get:function(){return y.TextRendererModel}}),Object.defineProperty(t,"TextRendererView",{enumerable:!0,get:function(){return y.TextRendererView}});var b,w=i(2584);Object.defineProperty(t,"VegaExprModel",{enumerable:!0,get:function(){return w.VegaExprModel}}),Object.defineProperty(t,"VegaExprView",{enumerable:!0,get:function(){return w.VegaExprView}}),function(e){e.getWidgetPanel=function(){return null!==c.JupyterLuminoPanelWidget&&void 0!==c.JupyterLuminoPanelWidget?c.JupyterLuminoPanelWidget:c.JupyterPhosphorPanelWidget},e.createSchema=function(e){const t=[];return e.fields.forEach(((i,r)=>{const n=Array.isArray(e.schema.fields[r].name)?e.schema.fields[r].name:[e.schema.fields[r].name],o={name:Object.keys(i)[0],type:e.schema.fields[r].type,rows:n};t.push(o)})),{primaryKey:e.schema.primaryKey.map((t=>{for(let i=0;i<e.schema.fields.length;i++)if((Array.isArray(t)?e.schema.fields[i].name[0]:e.schema.fields[i].name)==(Array.isArray(t)?t[0]:t))return Object.keys(e.fields[i])[0];return"unreachable"})),primaryKeyUuid:e.schema.primaryKeyUuid,fields:t}}}(b||(b={}))},9453:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatherGrid=void 0;const r=i(8918),n=i(6057),o=i(4706),a=i(2720),s=i(1840),l=i(3992),d=i(8126),h=i(6175),c=i(2320),u=i(4377),g=i(591),m=i(6988);i(795),i(9485);const p=new Map([["--ipydatagrid-filter-icon",["var(--ipydatagrid-filter-icon-light)","var(--ipydatagrid-filter-icon-dark)"]],["--ipydatagrid-sort-asc-icon",["var(--ipydatagrid-sort-asc-icon-light)","var(--ipydatagrid-sort-asc-icon-dark)"]],["--ipydatagrid-sort-desc-icon",["var(--ipydatagrid-sort-desc-icon-light)","var(--ipydatagrid-sort-desc-icon-dark)"]],["--ipydatagrid-layout-color0",["white","#111111"]],["--ipydatagrid-layout-color1",["white","#212121"]],["--ipydatagrid-layout-color2",["#eeeeee","#424242"]],["--ipydatagrid-layout-color3",["#bdbdbd","#616161"]],["--ipydatagrid-layout-color4",["#757575","#757575"]],["--ipydatagrid-ui-font-color0",["rgba(0, 0, 0, 1)","rgba(255, 255, 255, 1)"]],["--ipydatagrid-ui-font-color1",["rgba(0, 0, 0, 0.87)","rgba(255, 255, 255, 0.87)"]],["--ipydatagrid-ui-font-color2",["rgba(0, 0, 0, 0.54)","rgba(255, 255, 255, 0.54)"]],["--ipydatagrid-ui-font-color3",["rgba(0, 0, 0, 0.38)","rgba(255, 255, 255, 0.38)"]],["--ipydatagrid-border-color0",["#bdbdbd","#616161"]],["--ipydatagrid-border-color1",["#bdbdbd","#616161"]],["--ipydatagrid-border-color2",["#e0e0e0","#424242"]],["--ipydatagrid-border-color3",["#eeeeee","#212121"]],["--ipydatagrid-brand-color0",["#1976d2","#1976d2"]],["--ipydatagrid-brand-color1",["#2196f3","#2196f3"]],["--ipydatagrid-brand-color2",["#64b5f6","#64b5f6"]],["--ipydatagrid-brand-color3",["#bbdefb","#bbdefb"]],["--ipydatagrid-brand-color4",["#e3f2fd","#e3f2fd"]],["--ipydatagrid-brand-color5",["#00e6ff","#00e6ff"]],["--ipydatagrid-brand-color6",["#ffe100","#ffe100"]],["--ipydatagrid-brand-color7",["#009eb0","#009eb0"]],["--ipydatagrid-brand-color8",["#b09b00","#b09b00"]],["--ipydatagrid-menu-bgcolor",["white","black"]],["--ipydatagrid-menu-border-color",["#bdbdbd","#616161"]],["--ipydatagrid-filter-dlg-textcolor",["black","white"]],["--ipydatagrid-filter-dlg-bgcolor",["white","black"]]]);class _ extends l.Widget{constructor(e={}){super(),this._baseRowSize=20,this._baseColumnSize=64,this._baseRowHeaderSize=64,this._baseColumnHeaderSize=20,this._columnWidths={},this._headerVisibility="all",this._renderers={},this._defaultRendererSet=!1,this._cellClicked=new s.Signal(this),this._columnsResized=new s.Signal(this),this._isLightTheme=!0,this.addClass("ipydatagrid-widget"),e.defaultSizes&&(this._baseRowSize=e.defaultSizes.rowHeight||this._baseRowSize,this._baseColumnSize=e.defaultSizes.columnWidth||this._baseColumnSize,this._baseRowHeaderSize=e.defaultSizes.rowHeaderWidth||this._baseRowHeaderSize,this._baseColumnHeaderSize=e.defaultSizes.columnHeaderHeight||this._baseColumnHeaderSize),this._headerVisibility=e.headerVisibility||this._headerVisibility,this._createGrid(e),this._defaultRenderer=new o.TextRenderer({font:"12px sans-serif",textColor:m.Theme.getFontColor(),backgroundColor:this.grid.style.backgroundColor||m.Theme.getBackgroundColor(),horizontalAlignment:"center",verticalAlignment:"center"}),this._rowHeaderRenderer=new o.TextRenderer({textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"center",verticalAlignment:"center"}),(this.layout=new l.PanelLayout).addWidget(this.grid)}messageHook(e,t){if(e===this.grid.viewport){const e=this.grid.mouseHandler;if("column-resize-request"===t.type&&e.mouseIsDown){const e=t,i=this.dataModel.columnIndexToName(e.index,e.region);return this._columnWidths[i]=e.size,this._columnsResized.emit(),!0}}return!0}set dataModel(e){this._dataModel=e,this.grid&&(this.grid.dataModel=this._dataModel,this._updateHeaderRenderer(),this._filterDialog.model=this._dataModel,this._updateColumnWidths())}get dataModel(){return this._dataModel}set baseRowSize(e){this._baseRowSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{rowHeight:e}))}get baseRowSize(){return this._baseRowSize}set baseColumnSize(e){this._baseColumnSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{columnWidth:e}),this._updateColumnWidths())}get baseColumnSize(){return this._baseColumnSize}set columnWidths(e){this._columnWidths=e,this.grid&&this._updateColumnWidths()}get columnWidths(){return this._columnWidths}set baseRowHeaderSize(e){this._baseRowHeaderSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{rowHeaderWidth:e}),this._updateColumnWidths())}get baseRowHeaderSize(){return this._baseRowHeaderSize}set baseColumnHeaderSize(e){this._baseColumnHeaderSize=e,this.grid&&(this.grid.defaultSizes=Object.assign(Object.assign({},this.grid.defaultSizes),{columnHeaderHeight:e}))}get baseColumnHeaderSize(){return this._baseColumnHeaderSize}set headerVisibility(e){this._headerVisibility=e,this.grid&&(this.grid.headerVisibility=e,this._updateColumnWidths())}get headerVisibility(){return this._headerVisibility}set defaultRenderer(e){this._defaultRenderer=e,this._defaultRendererSet=!0,this.grid&&this._updateGridRenderers()}get defaultRenderer(){return this._defaultRenderer}set columnHeaderRenderer(e){const t=e;this._columnHeaderRenderer=new c.HeaderRenderer({textOptions:{font:t.font,wrapText:t.wrapText,elideDirection:t.elideDirection,textColor:t.textColor,backgroundColor:this.grid.style.headerBackgroundColor||t.backgroundColor||m.Theme.getBackgroundColor(),verticalAlignment:t.verticalAlignment,horizontalAlignment:t.horizontalAlignment,format:t.format},isLightTheme:this._isLightTheme,grid:this.grid}),this.grid&&this._updateHeaderRenderer()}get columnHeaderRenderer(){return this._columnHeaderRenderer}set cornerHeaderRenderer(e){const t=e;this._cornerHeaderRenderer=new c.HeaderRenderer({textOptions:{font:t.font,wrapText:t.wrapText,elideDirection:t.elideDirection,textColor:t.textColor,backgroundColor:this.grid.style.headerBackgroundColor||t.backgroundColor||m.Theme.getBackgroundColor(),verticalAlignment:t.verticalAlignment,horizontalAlignment:t.horizontalAlignment,format:t.format},isLightTheme:this._isLightTheme,grid:this.grid}),this.grid&&this._updateHeaderRenderer()}get cornerHeaderRenderer(){return this._cornerHeaderRenderer}set renderers(e){this._renderers=e,this.grid&&this._updateGridRenderers()}get renderers(){return this._renderers}set selectionModel(e){this._selectionModel=e,this.grid&&(this.grid.selectionModel=this._selectionModel)}set editable(e){this._editable=e,this.grid&&(this.grid.editingEnabled=e)}get editable(){return this._editable}get cellRenderers(){return this.grid.cellRenderers}_createGrid(e={}){this.grid=new o.DataGrid(Object.assign(Object.assign({},e),{defaultSizes:{rowHeight:this._baseRowSize,columnWidth:this._baseColumnSize,rowHeaderWidth:this._baseRowHeaderSize,columnHeaderHeight:this._baseColumnHeaderSize},headerVisibility:this._headerVisibility})),a.MessageLoop.installMessageHook(this.grid.viewport,this),this._filterDialog=new d.InteractiveFilterDialog({model:this._dataModel}),this.contextMenu=new h.FeatherGridContextMenu({grid:this.grid,commands:this._createCommandRegistry()}),this.grid.copyToClipboard=this.copyToClipboard.bind(this.grid),this.grid.dataModel=this._dataModel,this.grid.keyHandler=new u.KeyHandler;const t=new g.MouseHandler(this);t.cellClicked.connect(((e,t)=>{if(!this.grid.dataModel)return;const i=this.grid.dataModel,r=t.region;this._cellClicked.emit({region:r,column:i.metadata(r,t.row,t.column).name,columnIndex:t.column,row:t.row,primaryKeyRow:i.getDatasetRowFromView(r,t.row),cellValue:i.data(r,t.row,t.column)})})),this.grid.mouseHandler=t,this.grid.selectionModel=this._selectionModel,this.grid.editingEnabled=this._editable,this.updateGridStyle(),this._updateGridRenderers(),this._updateColumnWidths()}setGridStyle(){const e={size:4,color1:m.Theme.getBorderColor(1,1),color2:m.Theme.getBorderColor(1,.5),color3:m.Theme.getBorderColor(1,0)};this.backboneModel?(this.grid.style=this.backboneModel.get("grid_style"),this.grid.style={voidColor:this.grid.style.voidColor||m.Theme.getBackgroundColor(),backgroundColor:this.grid.style.backgroundColor||m.Theme.getBackgroundColor(),rowBackgroundColor:this.grid.style.rowBackgroundColor||void 0,columnBackgroundColor:this.grid.style.columnBackgroundColor||void 0,gridLineColor:this.grid.style.gridLineColor||m.Theme.getBorderColor(),verticalGridLineColor:this.grid.style.verticalGridLineColor||void 0,horizontalGridLineColor:this.grid.style.horizontalGridLineColor||void 0,headerBackgroundColor:this.grid.style.headerBackgroundColor||void 0,headerGridLineColor:this.grid.style.headerGridLineColor||m.Theme.getBorderColor(1),headerVerticalGridLineColor:this.grid.style.headerVerticalGridLineColor||void 0,headerHorizontalGridLineColor:this.grid.style.headerHorizontalGridLineColor||void 0,selectionFillColor:this.grid.style.selectionFillColor||m.Theme.getBrandColor(2,.4),selectionBorderColor:this.grid.style.selectionBorderColor||m.Theme.getBrandColor(1),headerSelectionFillColor:this.grid.style.headerSelectionFillColor||m.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:this.grid.style.headerSelectionBorderColor||m.Theme.getBorderColor(1),cursorFillColor:this.grid.style.cursorFillColor||m.Theme.getBrandColor(3,.4),cursorBorderColor:this.grid.style.cursorBorderColor||m.Theme.getBrandColor(1),scrollShadow:this.grid.style.scrollShadow||e}):this.grid.style={voidColor:m.Theme.getBackgroundColor(),backgroundColor:m.Theme.getBackgroundColor(),gridLineColor:m.Theme.getBorderColor(),headerGridLineColor:m.Theme.getBorderColor(1),selectionFillColor:m.Theme.getBrandColor(2,.4),selectionBorderColor:m.Theme.getBrandColor(1),headerSelectionFillColor:m.Theme.getBackgroundColor(3,.4),headerSelectionBorderColor:m.Theme.getBorderColor(1),cursorFillColor:m.Theme.getBrandColor(3,.4),cursorBorderColor:m.Theme.getBrandColor(1),scrollShadow:e}}updateGridStyle(){this.setGridStyle(),this._defaultRendererSet&&this.backboneModel||(this.defaultRenderer=new o.TextRenderer({font:"12px sans-serif",textColor:m.Theme.getFontColor(),backgroundColor:this.grid.style.backgroundColor||m.Theme.getBackgroundColor(),horizontalAlignment:"left",verticalAlignment:"center"})),this._rowHeaderRenderer=new o.TextRenderer({textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"center",verticalAlignment:"center"}),this._columnHeaderRenderer=new c.HeaderRenderer({textOptions:{textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"left",verticalAlignment:"center"},isLightTheme:this._isLightTheme,grid:this.grid}),this._cornerHeaderRenderer=new c.HeaderRenderer({textOptions:{textColor:m.Theme.getFontColor(1),backgroundColor:this.grid.style.headerBackgroundColor||m.Theme.getBackgroundColor(2),horizontalAlignment:"left",verticalAlignment:"center"},isLightTheme:this._isLightTheme,grid:this.grid}),this._updateHeaderRenderer()}copyToClipboard(){const e=this,t=e.dataModel;if(!t)return;const i=e.selectionModel;if(!i)return;const n=r.toArray(i.selections());if(0===n.length)return;if(n.length>1)return void alert("Cannot copy multiple grid selections.");const o=t.rowCount("body"),a=t.columnCount("body");if(0===o||0===a)return;let{r1:s,c1:l,r2:d,c2:h}=n[0];s=Math.max(0,Math.min(s,o-1)),l=Math.max(0,Math.min(l,a-1)),d=Math.max(0,Math.min(d,o-1)),h=Math.max(0,Math.min(h,a-1)),d<s&&([s,d]=[d,s]),h<l&&([l,h]=[h,l]);let c=t.columnCount("row-header"),u=t.rowCount("column-header");const g=e.copyConfig.separator,m=e.copyConfig.format,p=e.copyConfig.headers,_=e.copyConfig.warningThreshold;let f=d-s+1,y=h-l+1;switch(p){case"none":c=0,u=0;break;case"row":u=0,y+=c;break;case"column":c=0,f+=u;break;case"all":f+=u,y+=c;break;default:throw"unreachable"}const b=f*y;if(b>_){const e=`Copying ${b} cells may take a while. Continue?`;if(!window.confirm(e))return}const w={region:"body",row:0,column:0,value:null,metadata:{}},v=new Array(f);for(let e=0;e<f;++e){const i=new Array(y);for(let r=0;r<y;++r){let n,o,a;e<u&&r<c?(n="corner-header",o=e,a=r):e<u?(n="column-header",o=e,a=r-c+l):r<c?(n="row-header",o=e-u+s,a=r):(n="body",o=e-u+s,a=r-c+l),w.region=n,w.row=o,w.column=a,w.value=t.data(n,o,a),w.metadata=t.metadata(n,o,a),i[r]=m(w)}v[e]=i}const x=v.map((e=>e.join(g))).join("\n"),C=document.createElement("textarea");C.innerHTML=x,C.style.height="0px",C.style.width="0px",C.style.overflow="hidden",C.id="ipydatagrid-textarea",C.style.position="absolute",document.body.appendChild(C),C.select(),document.execCommand("copy"),document.body.removeChild(C)}get cellClicked(){return this._cellClicked}get columnsResized(){return this._columnsResized}set isLightTheme(e){this._isLightTheme=e;let t=0;e?this.removeClass("dark"):(this.addClass("dark"),t=1);const i=document.documentElement;p.forEach(((e,r)=>{i.style.setProperty(r,e[t])})),this.updateGridStyle()}get isLightTheme(){return this._isLightTheme}_rendererResolver(e){const t=e.metadata.name,i=e.region;return this._renderers.hasOwnProperty(t)?this._renderers[t]:"row-header"===i?this._rowHeaderRenderer:this._defaultRenderer}_updateGridRenderers(){this.grid.cellRenderers.update({body:this._rendererResolver.bind(this)}),this.grid.cellRenderers.update({"row-header":this._rendererResolver.bind(this)})}_updateColumnWidths(){const e=this._columnWidths,t=this.grid.mouseHandler;if(t&&t.isResizing)return;if("row"===this._headerVisibility||"all"===this._headerVisibility){const t=this._baseRowHeaderSize,i=this.grid.columnCount("row-header");for(let r=0;r<i;r++){const i=this.dataModel.columnIndexToName(r,"row-header"),n=e.hasOwnProperty(i)?e[i]:t;this.grid.resizeColumn("row-header",r,n)}}const i=this._baseColumnSize,r=this.grid.columnCount("body");for(let t=0;t<r;t++){const r=this.dataModel.columnIndexToName(t,"body"),n=e.hasOwnProperty(r)?e[r]:i;this.grid.resizeColumn("body",t,n)}}_updateHeaderRenderer(){this.grid.cellRenderers.update({"column-header":this._columnHeaderRenderer});let e=!1;this.backboneModel&&(e=null!==this.backboneModel.get("corner_renderer")),this.grid.cellRenderers.update({"corner-header":e?this._cornerHeaderRenderer:this._columnHeaderRenderer})}_createCommandRegistry(){const e=new n.CommandRegistry;return e.addCommand(h.FeatherGridContextMenu.CommandID.SortAscending,{label:"Sort Ascending",mnemonic:1,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-sortAsc",execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex);this._dataModel.addTransform({type:"sort",columnIndex:i,desc:!1})}}),e.addCommand(h.FeatherGridContextMenu.CommandID.SortDescending,{label:"Sort Descending",mnemonic:1,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-sortDesc",execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex);this._dataModel.addTransform({type:"sort",columnIndex:i,desc:!0})}}),e.addCommand(h.FeatherGridContextMenu.CommandID.ClearThisFilter,{label:"Clear This Filter",mnemonic:-1,execute:e=>{const t=e,i=this._dataModel.getSchemaIndex(t.region,t.columnIndex);this._dataModel.removeTransform(i,"filter")}}),e.addCommand(h.FeatherGridContextMenu.CommandID.ClearFiltersInAllColumns,{label:"Clear Filters in All Columns",mnemonic:-1,execute:e=>{const t=this._dataModel.activeTransforms.filter((e=>"filter"!==e.type));this._dataModel.replaceTransforms(t)}}),e.addCommand(h.FeatherGridContextMenu.CommandID.OpenFilterByConditionDialog,{label:"Filter by condition...",mnemonic:4,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-filter",execute:e=>{const t=e;this._filterDialog.open({x:t.clientX,y:t.clientY,region:t.region,columnIndex:t.columnIndex,forceX:!1,forceY:!1,mode:"condition"})}}),e.addCommand(h.FeatherGridContextMenu.CommandID.OpenFilterByValueDialog,{label:"Filter by value...",mnemonic:4,iconClass:"ipydatagrid-filterMenuIcon ipydatagrid-filterMenuIcon-filter",execute:e=>{const t=e;this._filterDialog.open({x:t.clientX,y:t.clientY,region:t.region,columnIndex:t.columnIndex,forceX:!1,forceY:!1,mode:"value"})}}),e}}t.FeatherGrid=_},4377:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeyHandler=void 0;const r=i(4706);class n extends r.BasicKeyHandler{constructor(){super()}onEscape(e,t){e.selectionModel&&(e.selectionModel.selections().next()?e.selectionModel.clear():(-1===document.body.tabIndex&&(document.body.tabIndex=0),document.body.focus()))}}t.KeyHandler=n},591:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseHandler=void 0;const r=i(4706),n=i(9520),o=i(1840),a=i(2320);class s extends r.BasicMouseHandler{constructor(e){super(),this._mouseIsDown=!1,this._cellClicked=new o.Signal(this),this._grid=e}onMouseDown(e,t){const i=e.hitTest(t.clientX,t.clientY),o=i.region,s=1.5*a.HeaderRenderer.iconWidth,l=a.HeaderRenderer.buttonPadding,d=n.Platform.accelKey(t);if(this._mouseIsDown=!0,"void"!==i.region&&this._cellClicked.emit(i),"corner-header"===o||"column-header"===o){const r=e.columnSize("corner-header"===o?"row-header":"body",i.column),n=e.rowSize("column-header",i.row),a="column-header"===i.region&&i.row==this._grid.grid.dataModel.rowCount("column-header")-1||"corner-header"===i.region&&0===i.row;if(i.x>r-s-l&&i.x<r-l&&i.y>n-s-l&&i.y<n-l&&a)return void this._grid.contextMenu.open(e,Object.assign(Object.assign({},i),{x:t.clientX+window.scrollX,y:t.clientY+window.scrollY}))}if(e){const t=r.Private.createCellConfigObject(e,i);if(!t)return;const n=e.cellRenderers.get(t);if(n instanceof r.HyperlinkRenderer){let i=r.CellRenderer.resolveOption(n.url,t);if(i||(i=r.TextRenderer.formatGeneric()(t)),d){window.postMessage({id:"ipydatagrid::hyperlinkclick",url:i},"*");const t=this.cursorForHandle("none");e.viewport.node.style.cursor=t}}}super.onMouseDown(e,t)}onMouseUp(e,t){this._mouseIsDown=!1,super.onMouseUp(e,t)}get mouseIsDown(){return this._mouseIsDown}get isResizing(){return null!==this.pressData&&("column-resize"==this.pressData.type||"row-resize"==this.pressData.type)}get cellClicked(){return this._cellClicked}}t.MouseHandler=s},6988:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Theme=t.Scalar=t.ArrayUtils=void 0;const r=i(6886);var n;(n=t.ArrayUtils||(t.ArrayUtils={})).generateMultiIndexArrayLocations=function(e){const t=e._dataset.schema.primaryKey.slice(0,e._dataset.schema.primaryKey.length-1),i=e._dataset.schema.fields,r=[];for(let e=0;e<i.length-1;e++)t.includes(i[e].name)||r.push(e);return r},n.generateColMergedCellLocations=function(e,t){if(0===t.length)return[];const i=e._dataset.schema.fields,r=e._dataset.schema.primaryKey.length-1,n=[];let o=[];const a=t[0];let s;for(let e=0;e<i[a].rows.length;e++){let a=[];for(const n of t){const t=i[n].rows[e];0==a.length||s==t?a.push([e,n-r]):(o.push(a),a=[[e,n-r]]),s=t}o.push(a),n.push(o),o=[]}return n},n.generateRowMergedCellLocations=function(e){const t=e._dataset.schema.primaryKey.slice(0,e._dataset.schema.primaryKey.length-1);if(!(t.length>1))return[];const i=e._dataset.data,r=[];let n,o=[];for(let e=0;e<t.length;e++){let a=[];for(let r=0;r<i.length;r++){const s=i[r][t[e]];0==a.length||n==s?a.push([r,e]):(o.push(a),a=[[r,e]]),n=s}o.push(a),r.push(o),o=[]}return r},n.validateMergingHierarchy=function(e){let t;for(const i of e)if(void 0!==t){if(i.length<t)return!1;t=i.length}else t=i.length;return!0},n.generateColumnCellGroups=function(e){const t=[];for(let i=0;i<e.length;i++)for(let r=0;r<e[i].length;r++)if(e[i][r].length>1){const n=e[i][r].length,o=e[i][r][0][1],a=e[i][r][n-1][1];t.push({r1:i,c1:o,r2:i,c2:a})}return t},n.generateRowCellGroups=function(e){const t=[];for(let i=0;i<e.length;i++)for(let r=0;r<e[i].length;r++)if(e[i][r].length>1){const n=e[i][r].length,o=e[i][r][0][0],a=e[i][r][n-1][0];t.push({r1:o,c1:i,r2:a,c2:i})}return t},(t.Scalar||(t.Scalar={})).isScalar=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e},function(e){function t(e){const t=document.querySelector(".ipydatagrid-widget")||document.body;return window.getComputedStyle(t).getPropertyValue(e)||"#ffffff"}function i(e,i=1){return function(e,t){const i=r.rgb(e);return i.opacity=t,i.formatRgb()}(t(e),i)}e.getComputedColor=t,e.getCSSColor=i,e.getBackgroundColor=function(e=0,t=1){return i("--ipydatagrid-layout-color"+e,t)},e.getFontColor=function(e=0,t=1){return i("--ipydatagrid-ui-font-color"+e,t)},e.getBorderColor=function(e=0,t=1){return i("--ipydatagrid-border-color"+e,t)},e.getBrandColor=function(e=0,t=1){return i("--ipydatagrid-brand-color"+e,t)}}(t.Theme||(t.Theme={}))},2584:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VegaExprView=t.VegaExprModel=void 0;const r=i(9704),n=i(7400),o=i(8624),a=i(2492),s=i(8657),l=n.defaultLocale(),d={context:{dataflow:{locale:()=>l}}};for(const e in o.functionContext)o.functionContext[e]=o.functionContext[e].bind(d);class h extends a.WidgetModel{defaults(){return Object.assign(Object.assign({},super.defaults()),{_model_name:h.model_name,_model_module:h.model_module,_model_module_version:h.model_module_version,value:"default_value"})}initialize(e,t){super.initialize(e,t);const i={whitelist:["cell","default_value","functions"],globalvar:"cell",functions:e=>{const t=r.functions(e);for(const e in o.functionContext)t[e]="functions."+e;return t}};this._codegen=r.codegen(i),this.updateFunction(),this.on("change:value",this.updateFunction.bind(this))}process(e,t){return this._function(e,t,o.functionContext)}_processRegex(e,t){const i=t.match(/\[(.*?)\]/g),r=i[0].match(/\[(.*?)\]/)[1];return 1===i.length?`cell.metadata.data(cell.row, ${r})`:`cell.metadata.data(cell.row, ${r})${i.splice(1).join("")}`}_augmentExpression(e){let t=e.code;return t=t.replace(/cell.metadata.data(?<data>(\[(.*?)\])+)/g,this._processRegex),e.code=t,e}updateFunction(){let e=this._codegen(r.parse(this.get("value")));e=this._augmentExpression(e),this._function=Function("cell","default_value","functions",'"use strict";return('+e.code+")")}}t.VegaExprModel=h,h.model_name="VegaExprModel",h.model_module=s.MODULE_NAME,h.model_module_version=s.MODULE_VERSION,h.view_name="VegaExprView",h.view_module=s.MODULE_NAME,h.view_module_version=s.MODULE_VERSION;class c extends a.WidgetView{process(e,t){return this.model.process(e,t)}}t.VegaExprView=c},8657:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MODULE_NAME=t.MODULE_VERSION=void 0;const r=i(4147);t.MODULE_VERSION=r.version,t.MODULE_NAME=r.name},8788:(e,t,i)=>{var r=i(3645),n=i(1667),o=i(126),a=i(1537),s=i(884),l=i(890),d=i(1372),h=i(235);t=r(!1);var c=n(o),u=n(a),g=n(s),m=n(l),p=n(d),_=n(h);t.push([e.id,":root {\n  --ipydatagrid-ui-font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica,\n    Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';\n  --ipydatagrid-ui-font-size0: 0.83333em;\n  --ipydatagrid-ui-font-size1: 13px; /* Base font size */\n  --ipydatagrid-ui-font-size2: 1.2em;\n  --ipydatagrid-ui-font-size3: 1.44em;\n  --ipydatagrid-padding: 3px;\n  --ipydatagrid-filter-dialog-width: 220px;\n  --ipydatagrid-filter-icon-light: url("+c+");\n  --ipydatagrid-sort-asc-icon-light: url("+u+");\n  --ipydatagrid-sort-desc-icon-light: url("+g+");\n  --ipydatagrid-filter-icon-dark: url("+m+");\n  --ipydatagrid-sort-asc-icon-dark: url("+p+");\n  --ipydatagrid-sort-desc-icon-dark: url("+_+');\n  --ipydatagrid-filter-icon: var(--ipydatagrid-filter-icon-light);\n  --ipydatagrid-sort-asc-icon: var(--ipydatagrid-sort-asc-icon-light);\n  --ipydatagrid-sort-desc-icon: var(--ipydatagrid-sort-desc-icon-light);\n\n  --ipydatagrid-layout-color0: white;\n  --ipydatagrid-layout-color1: white;\n  --ipydatagrid-layout-color2: #eeeeee;\n  --ipydatagrid-layout-color3: #bdbdbd;\n  --ipydatagrid-layout-color4: #757575;\n\n  --ipydatagrid-ui-font-color0: rgba(0, 0, 0, 1);\n  --ipydatagrid-ui-font-color1: rgba(0, 0, 0, 0.87);\n  --ipydatagrid-ui-font-color2: rgba(0, 0, 0, 0.54);\n  --ipydatagrid-ui-font-color3: rgba(0, 0, 0, 0.38);\n\n  --ipydatagrid-border-color0: #bdbdbd;\n  --ipydatagrid-border-color1: #bdbdbd;\n  --ipydatagrid-border-color2: #e0e0e0;\n  --ipydatagrid-border-color3: #eeeeee;\n\n  --ipydatagrid-brand-color0: #1976d2;\n  --ipydatagrid-brand-color1: #2196f3;\n  --ipydatagrid-brand-color2: #64b5f6;\n  --ipydatagrid-brand-color3: #bbdefb;\n  --ipydatagrid-brand-color4: #e3f2fd;\n  --ipydatagrid-brand-color5: #00e6ff;\n  --ipydatagrid-brand-color6: #ffe100;\n  --ipydatagrid-brand-color7: #009eb0;\n  --ipydatagrid-brand-color8: #b09b00;\n\n  --ipydatagrid-menu-bgcolor: white;\n  --ipydatagrid-menu-border-color: #bdbdbd;\n  --ipydatagrid-filter-dlg-textcolor: black;\n  --ipydatagrid-filter-dlg-bgcolor: white;\n}\n\n.ipydatagrid-widget {\n  width: 100%;\n  height: 100%;\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n}\n\n.p-DataGrid {\n  width: 100%;\n  height: 100%;\n  padding: var(--ipydatagrid-padding);\n  border: none;\n  font-family: "Lato", Helvetica, sans-serif;\n}\n\n.lm-DataGrid-cellEditorOccluder {\n  margin: var(--ipydatagrid-padding);\n}\n\n.ipydatagrid-filterMenu {\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n  border: 1px solid var(--ipydatagrid-menu-border-color, #bdbdbd);\n  box-shadow: 5px 5px 5px rgba(0, 0, 0, .2);\n  background: var(--ipydatagrid-menu-bgcolor, white);\n  z-index: 10;\n  padding: 5px;\n  min-height: 143px;\n}\n\n.ipydatagrid-filterMenu select, .ipydatagrid-filterMenu input, .ipydatagrid-filterMenu button {\n  color: var(--ipydatagrid-ui-font-color0, black) !important;\n  background: var(--ipydatagrid-menu-bgcolor, white);\n  font-size: var(--ipydatagrid-ui-font-size1);\n}\n\n.ipydatagrid-filterMenuIcon {\n  background-size: 21px;\n  background-repeat: no-repeat;\n}\n\n.ipydatagrid-filterMenuIcon-filter {\n  background-image: var(--ipydatagrid-filter-icon);\n}\n\n.ipydatagrid-filterMenuIcon-sortAsc {\n  background-image: var(--ipydatagrid-sort-asc-icon);\n}\n\n.ipydatagrid-filterMenuIcon-sortDesc {\n  background-image: var(--ipydatagrid-sort-desc-icon);\n}\n\n.ipydatagrid-unique-value-grid {\n  min-height: 165px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n  z-index: 1;\n}\n\n.ipydatagrid-filter-title {\n  min-height: 25px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n}\n\n.ipydatagrid-filter-apply {\n  min-height: 20px;\n}\n\n.ipydatagrid-filter-condition-select {\n  min-height: 35px;\n  min-width: var(--ipydatagrid-filter-dialog-width);\n}\n\n.ipydatagrid-context-menu {\n  border: 1px solid var(--ipydatagrid-menu-border-color, #bdbdbd);\n  background-color: var(--ipydatagrid-menu-bgcolor, white) !important;\n  color: var(--ipydatagrid-ui-font-color0, black) !important;\n  font-family: var(--ipydatagrid-ui-font-family);\n  font-size: var(--ipydatagrid-ui-font-size1);\n  padding-top: 7px;\n  padding-bottom: 4px;\n  padding-left: 3px;\n}\n\n.ipydatagrid-context-menu .lm-Menu-item.lm-mod-active, .ipydatagrid-context-menu .p-Menu-item.p-mod-active {\n  background-color: var(--ipydatagrid-layout-color2);\n}\n\n.ipydatagrid-text-input-filter {\n  transform: translate(5px, 0px);\n}\n',""]),e.exports=t},9808:(e,t,i)=>{(t=i(3645)(!1)).push([e.id,".datagrid-container {\n  width: 100%;\n  height: 500px;\n}\n",""]),e.exports=t},9485:(e,t,i)=>{var r=i(8788);"string"==typeof r&&(r=[[e.id,r,""]]);i(6723)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},3613:(e,t,i)=>{var r=i(9808);"string"==typeof r&&(r=[[e.id,r,""]]);i(6723)(r,{hmr:!0,transform:void 0,insertInto:void 0}),r.locals&&(e.exports=r.locals)},235:e=>{e.exports="data:image/svg+xml,%3Csvg class='bi bi-arrow-down-short' width='1em' height='1em' viewBox='0 0 20 20' fill='%23ffffff' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' d='M6.646 9.646a.5.5 0 01.708 0L10 12.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z' clip-rule='evenodd'/%3E %3Cpath fill-rule='evenodd' d='M10 6.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V7a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3E %3C/svg%3E"},884:e=>{e.exports="data:image/svg+xml,%3Csvg class='bi bi-arrow-down-short' width='1em' height='1em' viewBox='0 0 20 20' fill='%23000000' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' d='M6.646 9.646a.5.5 0 01.708 0L10 12.293l2.646-2.647a.5.5 0 01.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z' clip-rule='evenodd'/%3E %3Cpath fill-rule='evenodd' d='M10 6.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V7a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3E %3C/svg%3E"},1372:e=>{e.exports="data:image/svg+xml,%3Csvg class='bi bi-arrow-up-short' width='1em' height='1em' viewBox='0 0 20 20' fill='%23ffffff' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' d='M10 7.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V8a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3E %3Cpath fill-rule='evenodd' d='M9.646 6.646a.5.5 0 01.708 0l3 3a.5.5 0 01-.708.708L10 7.707l-2.646 2.647a.5.5 0 01-.708-.708l3-3z' clip-rule='evenodd'/%3E %3C/svg%3E"},1537:e=>{e.exports="data:image/svg+xml,%3Csvg class='bi bi-arrow-up-short' width='1em' height='1em' viewBox='0 0 20 20' fill='%23000000' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' d='M10 7.5a.5.5 0 01.5.5v5a.5.5 0 01-1 0V8a.5.5 0 01.5-.5z' clip-rule='evenodd'/%3E %3Cpath fill-rule='evenodd' d='M9.646 6.646a.5.5 0 01.708 0l3 3a.5.5 0 01-.708.708L10 7.707l-2.646 2.647a.5.5 0 01-.708-.708l3-3z' clip-rule='evenodd'/%3E %3C/svg%3E"},890:e=>{e.exports="data:image/svg+xml,%3Csvg class='bi bi-filter' width='1em' height='1em' viewBox='0 0 20 20' fill='%23ffffff' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' d='M7.5 13a.5.5 0 01.5-.5h4a.5.5 0 010 1H8a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h8a.5.5 0 010 1H6a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h12a.5.5 0 010 1H4a.5.5 0 01-.5-.5z' clip-rule='evenodd'/%3E %3C/svg%3E"},126:e=>{e.exports="data:image/svg+xml,%3Csvg class='bi bi-filter' width='1em' height='1em' viewBox='0 0 20 20' fill='%23000000' xmlns='http://www.w3.org/2000/svg'%3E %3Cpath fill-rule='evenodd' d='M7.5 13a.5.5 0 01.5-.5h4a.5.5 0 010 1H8a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h8a.5.5 0 010 1H6a.5.5 0 01-.5-.5zm-2-3a.5.5 0 01.5-.5h12a.5.5 0 010 1H4a.5.5 0 01-.5-.5z' clip-rule='evenodd'/%3E %3C/svg%3E"},4147:e=>{"use strict";e.exports=JSON.parse('{"name":"ipydatagrid","version":"1.1.14","description":"Fast Datagrid widget for the Jupyter Notebook and JupyterLab","keywords":["jupyter","jupyterlab","jupyterlab-extension","widgets"],"files":["lib/**/*.js","lib/**/*.js.map","lib/**/*.ts","dist/*.js","dist/*.js.map","dist/*.png","style/**/*.*"],"homepage":"https://github.com/Bloomberg/ipydatagrid","bugs":{"url":"https://github.com/Bloomberg/ipydatagrid/issues"},"license":"BSD-3-Clause","author":{"name":"Bloomberg","email":""},"main":"lib/index.js","types":"./lib/index.d.ts","repository":{"type":"git","url":"https://github.com/Bloomberg/ipydatagrid"},"scripts":{"build":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension","build:dev":"yarn run build:lib && yarn run build:nbextension && yarn run build:labextension:dev","build:labextension":"jupyter labextension build .","build:labextension:dev":"jupyter labextension build --development True .","build:lib":"tsc","build:nbextension":"webpack --mode=production --no-devtool","build:widget-examples":"cd widget-examples/basic && webpack --mode=production","build:all":"yarn run build:labextension && yarn run build:nbextension && yarn run build:widget-examples","clean":"rimraf dist && yarn run clean:lib && yarn run clean:labextension && yarn run clean:nbextension","clean:lib":"rimraf lib","clean:labextension":"rimraf ipydatagrid/labextension","clean:nbextension":"rimraf ipydatagrid/nbextension/index.*","lint":"eslint \'js/**/*.{js,ts}\' --quiet --fix","prepack":"yarn run build:labextension && yarn run build:nbextension","test":"jest --verbose","watch":"npm-run-all -p watch:*","watch:lib":"tsc -w","watch:nbextension":"webpack --watch","watch:labextension":"jupyter labextension watch ."},"dependencies":{"@jupyter-widgets/base":"^2 || ^3 || ^4 || ^6.0.0","@jupyterlab/apputils":"^3.0.2","@lumino/algorithm":"^1.9.0","@lumino/commands":"^1.20.0","@lumino/coreutils":"^1.12.0","@lumino/datagrid":"^0.36.0","@lumino/default-theme":"^0.19.0","@lumino/domutils":"^1.8.0","@lumino/messaging":"^1.9.0","@lumino/virtualdom":"^1.13.0","@lumino/widgets":"^1.28.0","bqplot":"^0.4.6","d3-array":"^2.2.0","d3-color":"^3.1.0","d3-format":"^1.3.2","d3-scale":"^3.0.0","d3-time-format":"^2.1.3","jest-environment-jsdom":"^28.1.3","moment":"^2.24.0","vega-expression":"^2.6.0","vega-functions":"^5.3.0"},"devDependencies":{"@babel/cli":"^7.6.3","@babel/core":"^7.6.3","@babel/preset-env":"^7.6.3","@babel/preset-typescript":"^7.6.0","@jupyterlab/builder":"^3.0.1","@lumino/application":"^1.6.0","@types/jest":"^27.4.1","@types/node":"^10.11.6","@types/webpack-env":"^1.13.6","@typescript-eslint/eslint-plugin":"^3.5.0","@typescript-eslint/parser":"^3.5.0","acorn":"^6.2.0","babel-jest":"^28.1.3","babel-plugin-transform-es2015-modules-commonjs":"^6.26.2","css-loader":"^3.0.0","eslint":"^7.3.1","eslint-config-prettier":"^6.11.0","eslint-plugin-prettier":"^3.1.4","fs-extra":"^7.0.0","jest":"^28.1.3","lint-staged":"^10.2.11","mkdirp":"^0.5.1","npm-run-all":"^4.1.3","prettier":"^2.0.5","rimraf":"^2.6.2","source-map-loader":"^0.2.4","style-loader":"^0.23.1","svg-url-loader":"~3.0.3","ts-jest":"^28.0.8","ts-loader":"^6.0.4","typescript":"~4.2.4","url-loader":"^4.1.0","webpack":"^5","webpack-cli":"^4.4.0"},"jupyterlab":{"extension":"lib/plugin","webpackConfig":"webpack.lab.config.js","outputDir":"./ipydatagrid/labextension","sharedPackages":{"@jupyter-widgets/base":{"bundled":false,"singleton":true}}}}')}}]);