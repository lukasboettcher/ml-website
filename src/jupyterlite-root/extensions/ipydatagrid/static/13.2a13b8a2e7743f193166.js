"use strict";(self.webpackChunkipydatagrid=self.webpackChunkipydatagrid||[]).push([[13],{8122:(t,e,n)=>{n.d(e,{M:()=>s,Z:()=>o});var i=n(1265),r=n(7896);function o(t,e){return((0,r.v)(e)?r.Z:s)(t,e)}function s(t,e){var n,r=e?e.length:0,o=t?Math.min(r,t.length):0,s=new Array(o),a=new Array(r);for(n=0;n<o;++n)s[n]=(0,i.Z)(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<o;++n)a[n]=s[n](t);return a}}},9885:(t,e,n)=>{function i(t,e,n,i,r){var o=t*t,s=o*t;return((1-3*t+3*o-s)*e+(4-6*o+3*s)*n+(1+3*t+3*o-3*s)*i+s*r)/6}function r(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),o=t[r],s=t[r+1],a=r>0?t[r-1]:2*o-s,c=r<e-1?t[r+2]:2*s-o;return i((n-r/e)*e,a,o,s,c)}}n.d(e,{Z:()=>r,t:()=>i})},5692:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(9885);function r(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),o=t[(r+e-1)%e],s=t[r%e],a=t[(r+1)%e],c=t[(r+2)%e];return(0,i.t)((n-r/e)*e,o,s,a,c)}}},5910:(t,e,n)=>{n.d(e,{ZP:()=>a,wx:()=>o,yi:()=>s});var i=n(5302);function r(t,e){return function(n){return t+n*e}}function o(t,e){var n=e-t;return n?r(t,n>180||n<-180?n-360*Math.round(n/360):n):(0,i.Z)(isNaN(t)?e:t)}function s(t){return 1==(t=+t)?a:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(i){return Math.pow(t+i*e,n)}}(e,n,t):(0,i.Z)(isNaN(e)?n:e)}}function a(t,e){var n=e-t;return n?r(t,n):(0,i.Z)(isNaN(t)?e:t)}},5302:(t,e,n)=>{n.d(e,{Z:()=>i});const i=t=>()=>t},88:(t,e,n)=>{function i(t,e){var n=new Date;return t=+t,e=+e,function(i){return n.setTime(t*(1-i)+e*i),n}}n.d(e,{Z:()=>i})},3626:(t,e,n)=>{function i(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}n.d(e,{Z:()=>i})},7896:(t,e,n)=>{function i(t,e){e||(e=[]);var n,i=t?Math.min(e.length,t.length):0,r=e.slice();return function(o){for(n=0;n<i;++n)r[n]=t[n]*(1-o)+e[n]*o;return r}}function r(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}n.d(e,{Z:()=>i,v:()=>r})},8528:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(1265);function r(t,e){var n,r={},o={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=(0,i.Z)(t[n],e[n]):o[n]=e[n];return function(t){for(n in r)o[n]=r[n](t);return o}}},108:(t,e,n)=>{n.d(e,{Z:()=>r});var i=n(1265);function r(t,e){void 0===e&&(e=t,t=i.Z);for(var n=0,r=e.length-1,o=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(o,o=e[++n]);return function(t){var e=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return s[e](t-e)}}},3414:(t,e,n)=>{n.d(e,{YD:()=>u,ZP:()=>a,hD:()=>l});var i=n(3622),r=n(9885),o=n(5692),s=n(5910);const a=function t(e){var n=(0,s.yi)(e);function r(t,e){var r=n((t=(0,i.rgb)(t)).r,(e=(0,i.rgb)(e)).r),o=n(t.g,e.g),a=n(t.b,e.b),c=(0,s.ZP)(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=o(e),t.b=a(e),t.opacity=c(e),t+""}}return r.gamma=t,r}(1);function c(t){return function(e){var n,r,o=e.length,s=new Array(o),a=new Array(o),c=new Array(o);for(n=0;n<o;++n)r=(0,i.rgb)(e[n]),s[n]=r.r||0,a[n]=r.g||0,c[n]=r.b||0;return s=t(s),a=t(a),c=t(c),r.opacity=1,function(t){return r.r=s(t),r.g=a(t),r.b=c(t),r+""}}}var l=c(r.Z),u=c(o.Z)},5720:(t,e,n)=>{function i(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}n.d(e,{Z:()=>i})},9843:(t,e,n)=>{n.d(e,{Z:()=>s});var i=n(3626),r=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,o=new RegExp(r.source,"g");function s(t,e){var n,s,a,c=r.lastIndex=o.lastIndex=0,l=-1,u=[],h=[];for(t+="",e+="";(n=r.exec(t))&&(s=o.exec(e));)(a=s.index)>c&&(a=e.slice(c,a),u[l]?u[l]+=a:u[++l]=a),(n=n[0])===(s=s[0])?u[l]?u[l]+=s:u[++l]=s:(u[++l]=null,h.push({i:l,x:(0,i.Z)(n,s)})),c=o.lastIndex;return c<e.length&&(a=e.slice(c),u[l]?u[l]+=a:u[++l]=a),u.length<2?h[0]?function(t){return function(e){return t(e)+""}}(h[0].x):function(t){return function(){return t}}(e):(e=h.length,function(t){for(var n,i=0;i<e;++i)u[(n=h[i]).i]=n.x(t);return u.join("")})}},1265:(t,e,n)=>{n.d(e,{Z:()=>f});var i=n(3622),r=n(3414),o=n(8122),s=n(88),a=n(3626),c=n(8528),l=n(9843),u=n(5302),h=n(7896);function f(t,e){var n,f=typeof e;return null==e||"boolean"===f?(0,u.Z)(e):("number"===f?a.Z:"string"===f?(n=(0,i.color)(e))?(e=n,r.ZP):l.Z:e instanceof i.color?r.ZP:e instanceof Date?s.Z:(0,h.v)(e)?h.Z:Array.isArray(e)?o.M:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?c.Z:a.Z)(t,e)}},5013:(t,e,n)=>{n.r(e),n.d(e,{DataPrefix:()=>_l,IndexPrefix:()=>pl,ScalePrefix:()=>gl,SignalPrefix:()=>yl,bandspace:()=>$l,bandwidth:()=>Kl,codeGenerator:()=>wu,codegenParams:()=>mu,containerSize:()=>pu,contrast:()=>Dl,copy:()=>tu,data:()=>$c,dataVisitor:()=>bl,dayAbbrevFormat:()=>dl,dayFormat:()=>fl,debug:()=>Rl,domain:()=>eu,encode:()=>el,expressionFunction:()=>ku,format:()=>il,functionContext:()=>yu,geoArea:()=>Ml,geoBounds:()=>Tl,geoCentroid:()=>Al,geoShape:()=>su,inScope:()=>Sl,indata:()=>Kc,indataVisitor:()=>xl,indexof:()=>Gl,info:()=>Nl,invert:()=>nu,join:()=>Jl,lastindexof:()=>Wl,luminance:()=>zl,merge:()=>Fl,modify:()=>ql,monthAbbrevFormat:()=>hl,monthFormat:()=>ul,parseExpression:()=>Mu,pathShape:()=>au,pinchAngle:()=>jl,pinchDistance:()=>Il,pluck:()=>Ul,range:()=>iu,replace:()=>Vl,reverse:()=>Ql,scale:()=>ru,scaleGradient:()=>ou,scaleVisitor:()=>vl,screen:()=>du,setdata:()=>tl,slice:()=>Yl,timeFormat:()=>rl,timeParse:()=>sl,treeAncestors:()=>hu,treePath:()=>uu,utcFormat:()=>ol,utcParse:()=>al,warn:()=>El,windowSize:()=>_u});var i={};n.r(i),n.d(i,{interpolate:()=>Me.Z,interpolateArray:()=>Te.Z,interpolateBasis:()=>Ae.Z,interpolateBasisClosed:()=>Se.Z,interpolateCubehelix:()=>nn,interpolateCubehelixLong:()=>rn,interpolateDate:()=>Pe.Z,interpolateDiscrete:()=>Ee,interpolateHcl:()=>Ke,interpolateHclLong:()=>tn,interpolateHsl:()=>Ye,interpolateHslLong:()=>Ve,interpolateHue:()=>Re,interpolateLab:()=>Qe,interpolateNumber:()=>ze.Z,interpolateNumberArray:()=>De.Z,interpolateObject:()=>Fe.Z,interpolateRgb:()=>Je.ZP,interpolateRgbBasis:()=>Je.hD,interpolateRgbBasisClosed:()=>Je.YD,interpolateRound:()=>Le.Z,interpolateString:()=>Ze.Z,interpolateTransformCss:()=>Xe,interpolateTransformSvg:()=>Ue,interpolateZoom:()=>He,piecewise:()=>ke.Z,quantize:()=>on});var r=n(8823),o=n(2429),s=n(4983),a=1e-6,c=Math.PI,l=c/2,u=c/4,h=2*c,f=180/c,d=c/180,_=Math.abs,p=(Math.atan,Math.atan2),g=Math.cos,y=(Math.ceil,Math.exp,Math.floor,Math.hypot),b=(Math.log,Math.pow,Math.sin),x=(Math.sign,Math.sqrt);function v(t){return t>1?l:t<-1?-l:Math.asin(t)}function m(){}function w(t,e){t&&M.hasOwnProperty(t.type)&&M[t.type](t,e)}Math.tan;var k={Feature:function(t,e){w(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,r=n.length;++i<r;)w(n[i].geometry,e)}},M={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){T(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)T(n[i],e,0)},Polygon:function(t,e){A(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,r=n.length;++i<r;)A(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,r=n.length;++i<r;)w(n[i],e)}};function T(t,e,n){var i,r=-1,o=t.length-n;for(e.lineStart();++r<o;)i=t[r],e.point(i[0],i[1],i[2]);e.lineEnd()}function A(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)T(t[n],e,1);e.polygonEnd()}function S(t,e){t&&k.hasOwnProperty(t.type)?k[t.type](t,e):w(t,e)}var P,E,N,R,C,z,D,F,L,Z,O,q,I,j,X,U,B=new s.Adder,H=new s.Adder,J={point:m,lineStart:m,lineEnd:m,polygonStart:function(){B=new s.Adder,J.lineStart=G,J.lineEnd=W},polygonEnd:function(){var t=+B;H.add(t<0?h+t:t),this.lineStart=this.lineEnd=this.point=m},sphere:function(){H.add(h)}};function G(){J.point=Y}function W(){V(P,E)}function Y(t,e){J.point=V,P=t,E=e,N=t*=d,R=g(e=(e*=d)/2+u),C=b(e)}function V(t,e){var n=(t*=d)-N,i=n>=0?1:-1,r=i*n,o=g(e=(e*=d)/2+u),s=b(e),a=C*s,c=R*o+a*g(r),l=a*i*b(r);B.add(p(l,c)),N=t,R=o,C=s}function Q(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}var $,K,tt,et,nt,it,rt,ot,st,at,ct,lt,ut,ht,ft,dt,_t={point:pt,lineStart:yt,lineEnd:bt,polygonStart:function(){_t.point=xt,_t.lineStart=vt,_t.lineEnd=mt,j=new s.Adder,J.polygonStart()},polygonEnd:function(){J.polygonEnd(),_t.point=pt,_t.lineStart=yt,_t.lineEnd=bt,B<0?(z=-(F=180),D=-(L=90)):j>a?L=90:j<-a&&(D=-90),U[0]=z,U[1]=F},sphere:function(){z=-(F=180),D=-(L=90)}};function pt(t,e){X.push(U=[z=t,F=t]),e<D&&(D=e),e>L&&(L=e)}function gt(t,e){var n,i,r,o=function(t){var e=t[0],n=t[1],i=g(n);return[i*g(e),i*b(e),b(n)]}([t*d,e*d]);if(I){var s=Q(I,o),a=Q([s[1],-s[0],0],s);i=x((n=a)[0]*n[0]+n[1]*n[1]+n[2]*n[2]),n[0]/=i,n[1]/=i,n[2]/=i,a=[p((r=a)[1],r[0]),v(r[2])];var c,l=t-Z,u=l>0?1:-1,h=a[0]*f*u,y=_(l)>180;y^(u*Z<h&&h<u*t)?(c=a[1]*f)>L&&(L=c):y^(u*Z<(h=(h+360)%360-180)&&h<u*t)?(c=-a[1]*f)<D&&(D=c):(e<D&&(D=e),e>L&&(L=e)),y?t<Z?wt(z,t)>wt(z,F)&&(F=t):wt(t,F)>wt(z,F)&&(z=t):F>=z?(t<z&&(z=t),t>F&&(F=t)):t>Z?wt(z,t)>wt(z,F)&&(F=t):wt(t,F)>wt(z,F)&&(z=t)}else X.push(U=[z=t,F=t]);e<D&&(D=e),e>L&&(L=e),I=o,Z=t}function yt(){_t.point=gt}function bt(){U[0]=z,U[1]=F,_t.point=pt,I=null}function xt(t,e){if(I){var n=t-Z;j.add(_(n)>180?n+(n>0?360:-360):n)}else O=t,q=e;J.point(t,e),gt(t,e)}function vt(){J.lineStart()}function mt(){xt(O,q),J.lineEnd(),_(j)>a&&(z=-(F=180)),U[0]=z,U[1]=F,I=null}function wt(t,e){return(e-=t)<0?e+360:e}function kt(t,e){return t[0]-e[0]}function Mt(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Tt={sphere:m,point:At,lineStart:Pt,lineEnd:Rt,polygonStart:function(){Tt.lineStart=Ct,Tt.lineEnd=zt},polygonEnd:function(){Tt.lineStart=Pt,Tt.lineEnd=Rt}};function At(t,e){t*=d;var n=g(e*=d);St(n*g(t),n*b(t),b(e))}function St(t,e,n){++$,tt+=(t-tt)/$,et+=(e-et)/$,nt+=(n-nt)/$}function Pt(){Tt.point=Et}function Et(t,e){t*=d;var n=g(e*=d);ht=n*g(t),ft=n*b(t),dt=b(e),Tt.point=Nt,St(ht,ft,dt)}function Nt(t,e){t*=d;var n=g(e*=d),i=n*g(t),r=n*b(t),o=b(e),s=p(x((s=ft*o-dt*r)*s+(s=dt*i-ht*o)*s+(s=ht*r-ft*i)*s),ht*i+ft*r+dt*o);K+=s,it+=s*(ht+(ht=i)),rt+=s*(ft+(ft=r)),ot+=s*(dt+(dt=o)),St(ht,ft,dt)}function Rt(){Tt.point=At}function Ct(){Tt.point=Dt}function zt(){Ft(lt,ut),Tt.point=At}function Dt(t,e){lt=t,ut=e,t*=d,e*=d,Tt.point=Ft;var n=g(e);ht=n*g(t),ft=n*b(t),dt=b(e),St(ht,ft,dt)}function Ft(t,e){t*=d;var n=g(e*=d),i=n*g(t),r=n*b(t),o=b(e),s=ft*o-dt*r,a=dt*i-ht*o,c=ht*r-ft*i,l=y(s,a,c),u=v(l),h=l&&-u/l;st.add(h*s),at.add(h*a),ct.add(h*c),K+=u,it+=u*(ht+(ht=i)),rt+=u*(ft+(ft=r)),ot+=u*(dt+(dt=o)),St(ht,ft,dt)}var Lt=n(3524),Zt={},Ot={};function qt(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function It(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function jt(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}function Xt(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function i(t,e){var i,r=[],o=t.length,s=0,a=0,c=o<=0,l=!1;function u(){if(c)return Ot;if(l)return l=!1,Zt;var e,i,r=s;if(34===t.charCodeAt(r)){for(;s++<o&&34!==t.charCodeAt(s)||34===t.charCodeAt(++s););return(e=s)>=o?c=!0:10===(i=t.charCodeAt(s++))?l=!0:13===i&&(l=!0,10===t.charCodeAt(s)&&++s),t.slice(r+1,e-1).replace(/""/g,'"')}for(;s<o;){if(10===(i=t.charCodeAt(e=s++)))l=!0;else if(13===i)l=!0,10===t.charCodeAt(s)&&++s;else if(i!==n)continue;return t.slice(r,e)}return c=!0,t.slice(r,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(i=u())!==Ot;){for(var h=[];i!==Zt&&i!==Ot;)h.push(i),i=u();e&&null==(h=e(h,a++))||r.push(h)}return r}function r(e,n){return e.map((function(e){return n.map((function(t){return s(e[t])})).join(t)}))}function o(e){return e.map(s).join(t)}function s(t){return null==t?"":t instanceof Date?function(t){var e,n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),o=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+jt(-e,6):e>9999?"+"+jt(e,6):jt(e,4))+"-"+jt(t.getUTCMonth()+1,2)+"-"+jt(t.getUTCDate(),2)+(o?"T"+jt(n,2)+":"+jt(i,2)+":"+jt(r,2)+"."+jt(o,3)+"Z":r?"T"+jt(n,2)+":"+jt(i,2)+":"+jt(r,2)+"Z":i||n?"T"+jt(n,2)+":"+jt(i,2)+"Z":"")}(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,r,o=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=qt(t);return function(i,r){return e(n(i),r,t)}}(t,e):qt(t)}));return o.columns=r||[],o},parseRows:i,format:function(e,n){return null==n&&(n=It(e)),[n.map(s).join(t)].concat(r(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=It(t)),r(t,e).join("\n")},formatRows:function(t){return t.map(o).join("\n")},formatRow:o,formatValue:s}}n(7400);const Ut=/^(data:|([A-Za-z]+:)?\/\/)/,Bt=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Ht=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Jt="file://";async function Gt(t,e){const n=await this.sanitize(t,e),i=n.href;return n.localFile?this.file(i):this.http(i,e)}async function Wt(t,e){e=(0,r.l7)({},this.options,e);const n=this.fileAccess,i={href:null};let o,s,a;const c=Bt.test(t.replace(Ht,""));null!=t&&"string"==typeof t&&c||(0,r.vU)("Sanitize failure, invalid URI: "+(0,r.m8)(t));const l=Ut.test(t);return(a=e.baseURL)&&!l&&(t.startsWith("/")||a.endsWith("/")||(t="/"+t),t=a+t),s=(o=t.startsWith(Jt))||"file"===e.mode||"http"!==e.mode&&!l&&n,o?t=t.slice(Jt.length):t.startsWith("//")&&("file"===e.defaultProtocol?(t=t.slice(2),s=!0):t=(e.defaultProtocol||"http")+":"+t),Object.defineProperty(i,"localFile",{value:!!s}),i.href=t,e.target&&(i.target=e.target+""),e.rel&&(i.rel=e.rel+""),"image"===e.context&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin+""),i}function Yt(t){return t?e=>new Promise(((n,i)=>{t.readFile(e,((t,e)=>{t?i(t):n(e)}))})):Vt}async function Vt(){(0,r.vU)("No file system access.")}function Qt(t){return t?async function(e,n){const i=(0,r.l7)({},this.options.http,n),o=n&&n.response,s=await t(e,i);return s.ok?(0,r.mf)(s[o])?s[o]():s.text():(0,r.vU)(s.status+""+s.statusText)}:$t}async function $t(){(0,r.vU)("No HTTP fetch method available.")}function Kt(t){const e=function(e,n){const i={delimiter:t};return te(e,n?(0,r.l7)(n,i):i)};return e.responseType="text",e}function te(t,e){return e.header&&(t=e.header.map(r.m8).join(e.delimiter)+"\n"+t),Xt(e.delimiter).parse(t+"")}function ee(t,e){const n=e&&e.property?(0,r.EP)(e.property):r.yR;return!(0,r.Kn)(t)||(i=t,"function"==typeof Buffer&&(0,r.mf)(Buffer.isBuffer)&&Buffer.isBuffer(i))?n(JSON.parse(t)):function(t,e){return!(0,r.kJ)(t)&&(0,r.TW)(t)&&(t=[...t]),e&&e.copy?JSON.parse(JSON.stringify(t)):t}(n(t),e);var i}r.sw,r.He,r.He,r.ZU,r.BB,r.yR,te.responseType="text",ee.responseType="json";Kt(","),Kt("\t");const ne=function(t,e){return e=>({options:e||{},sanitize:Wt,load:Gt,fileAccess:!1,file:Yt(null),http:Qt(t)})}("undefined"!=typeof fetch&&fetch);function ie(t){const e=t||r.yR,n=[],i={};return n.add=t=>{const r=e(t);return i[r]||(i[r]=1,n.push(t)),n},n.remove=t=>{const r=e(t);if(i[r]){i[r]=0;const e=n.indexOf(t);e>=0&&n.splice(e,1)}return n},n}const re=Symbol("vega_id");function oe(t){return!(!t||!se(t))}function se(t){return t[re]}const ae="_:mod:_";function ce(){Object.defineProperty(this,ae,{writable:!0,value:{}})}ce.prototype={set(t,e,n,i){const o=this,s=o[t],a=o[ae];return null!=e&&e>=0?(s[e]!==n||i)&&(s[e]=n,a[e+":"+t]=-1,a[t]=-1):(s!==n||i)&&(o[t]=n,a[t]=(0,r.kJ)(n)?1+n.length:-1),o},modified(t,e){const n=this[ae];if(!arguments.length){for(const t in n)if(n[t])return!0;return!1}if((0,r.kJ)(t)){for(let e=0;e<t.length;++e)if(n[t[e]])return!0;return!1}return null!=e&&e>=0?e+1<n[t]||!!n[e+":"+t]:!!n[t]},clear(){return this[ae]={},this}};let le=0;const ue=new ce;function he(t,e,n,i){this.id=++le,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,i)}function fe(t){return function(e){const n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}he.prototype={targets(){return this._targets||(this._targets=ie(r.id))},set(t){return this.value!==t?(this.value=t,1):0},skip:fe(1),modified:fe(2),parameters(t,e,n){e=!1!==e;const i=this._argval=this._argval||new ce,o=this._argops=this._argops||[],s=[];let a,c,l,u;const h=(t,n,r)=>{r instanceof he?(r!==this&&(e&&r.targets().add(this),s.push(r)),o.push({op:r,name:t,index:n})):i.set(t,n,r)};for(a in t)if(c=t[a],"pulse"===a)(0,r.IX)(c).forEach((t=>{t instanceof he?t!==this&&(t.targets().add(this),s.push(t)):(0,r.vU)("Pulse parameters must be operator instances.")})),this.source=c;else if((0,r.kJ)(c))for(i.set(a,-1,Array(l=c.length)),u=0;u<l;++u)h(a,u,c[u]);else h(a,-1,c);return this.marshall().clear(),n&&(o.initonly=!0),s},marshall(t){const e=this._argval||ue,n=this._argops;let i,r,o,s;if(n){const a=n.length;for(r=0;r<a;++r)i=n[r],o=i.op,s=o.modified()&&o.stamp===t,e.set(i.name,i.index,o.value,s);if(n.initonly){for(r=0;r<a;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return e},detach(){const t=this._argops;let e,n,i,r;if(t)for(e=0,n=t.length;e<n;++e)i=t[e],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(t){const e=this._update;if(e){const n=this.marshall(t.stamp),i=e.call(this,n,t);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return t.StopPropagation}},run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?(this.skip(!1),e=0):e=this.evaluate(t),this.pulse=e||t}};let de=0;function _e(t,e,n){this.id=++de,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function pe(t,e,n){return new _e(t,e,n)}_e.prototype={_filter:r.yb,_apply:r.yR,targets(){return this._targets||(this._targets=ie(r.id))},consume(t){return arguments.length?(this._consume=!!t,this):!!this._consume},receive(t){if(this._filter(t)){const e=this.value=this._apply(t),n=this._targets,i=n?n.length:0;for(let t=0;t<i;++t)n[t].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},filter(t){const e=pe(t);return this.targets().add(e),e},apply(t){const e=pe(null,t);return this.targets().add(e),e},merge(){const t=pe();this.targets().add(t);for(let e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},throttle(t){let e=-1;return this.filter((()=>{const n=Date.now();return n-e>t?(e=n,1):0}))},debounce(t){const e=pe();return this.targets().add(pe(null,null,(0,r.Ds)(t,(t=>{const n=t.dataflow;e.receive(t),n&&n.run&&n.run()})))),e},between(t,e){let n=!1;return t.targets().add(pe(null,null,(()=>n=!0))),e.targets().add(pe(null,null,(()=>n=!1))),this.filter((()=>n))},detach(){this._filter=r.yb,this._targets=null}};function ge(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function ye(t,e){const n=[];return(0,r.FP)(t,e,(t=>n.push(t))),n}function be(t,e){const n={};return t.visit(e,(t=>{n[se(t)]=1})),t=>n[se(t)]?null:t}function xe(t,e){return t?(n,i)=>t(n,i)&&e(n,i):e}function ve(t){return function(){return this._log[t].apply(this,arguments)}}ge.prototype={StopPropagation:{},ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(t){return new ge(this.dataflow).init(this,t)},clone(){const t=this.fork(7);return t.add=t.add.slice(),t.rem=t.rem.slice(),t.mod=t.mod.slice(),t.source&&(t.source=t.source.slice()),t.materialize(23)},addAll(){let t=this;return!t.source||t.add===t.rem||!t.rem.length&&t.source.length===t.add.length||(t=new ge(this.dataflow).init(this),t.add=t.source,t.rem=[]),t},init(t,e){const n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),1&e?(n.addF=t.addF,n.add=t.add):(n.addF=null,n.add=[]),2&e?(n.remF=t.remF,n.rem=t.rem):(n.remF=null,n.rem=[]),4&e?(n.modF=t.modF,n.mod=t.mod):(n.modF=null,n.mod=[]),32&e?(n.srcF=null,n.source=null):(n.srcF=t.srcF,n.source=t.source,t.cleans&&(n.cleans=t.cleans)),n},runAfter(t){this.dataflow.runAfter(t)},changed(t){const e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},reflow(t){if(t)return this.fork(7).reflow();const e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,be(this,1))),this},clean(t){return arguments.length?(this.cleans=!!t,this):this.cleans},modifies(t){const e=this.fields||(this.fields={});return(0,r.kJ)(t)?t.forEach((t=>e[t]=!0)):e[t]=!0,this},modified(t,e){const n=this.fields;return!(!e&&!this.mod.length||!n)&&(arguments.length?(0,r.kJ)(t)?t.some((t=>n[t])):n[t]:!!n)},filter(t,e){const n=this;return 1&t&&(n.addF=xe(n.addF,e)),2&t&&(n.remF=xe(n.remF,e)),4&t&&(n.modF=xe(n.modF,e)),16&t&&(n.srcF=xe(n.srcF,e)),n},materialize(t){const e=this;return 1&(t=t||7)&&e.addF&&(e.add=ye(e.add,e.addF),e.addF=null),2&t&&e.remF&&(e.rem=ye(e.rem,e.remF),e.remF=null),4&t&&e.modF&&(e.mod=ye(e.mod,e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},visit(t,e){const n=this,i=e;if(16&t)return(0,r.FP)(n.source,n.srcF,i),n;1&t&&(0,r.FP)(n.add,n.addF,i),2&t&&(0,r.FP)(n.rem,n.remF,i),4&t&&(0,r.FP)(n.mod,n.modF,i);const o=n.source;if(8&t&&o){const t=n.add.length+n.mod.length;t===o.length||(t?(0,r.FP)(o,be(n,5),i):(0,r.FP)(o,n.srcF,i))}return n}},(0,r.XW)((function(t,e,n,i){const r=this,o=n.length;let s=0;this.dataflow=t,this.stamp=e,this.fields=null,this.encode=i||null,this.pulses=n;for(let t=0;t<o;++t){const i=n[t];if(i.stamp===e){if(i.fields){const t=r.fields||(r.fields={});for(const e in i.fields)t[e]=1}i.changed(r.ADD)&&(s|=r.ADD),i.changed(r.REM)&&(s|=r.REM),i.changed(r.MOD)&&(s|=r.MOD)}}this.changes=s}),ge,{fork(t){const e=new ge(this.dataflow).init(this,t&this.NO_FIELDS);return void 0!==t&&(t&e.ADD&&this.visit(e.ADD,(t=>e.add.push(t))),t&e.REM&&this.visit(e.REM,(t=>e.rem.push(t))),t&e.MOD&&this.visit(e.MOD,(t=>e.mod.push(t)))),e},changed(t){return this.changes&t},modified(t){const e=this,n=e.fields;return n&&e.changes&e.MOD?(0,r.kJ)(t)?t.some((t=>n[t])):n[t]:0},filter(){(0,r.vU)("MultiPulse does not support filtering.")},materialize(){(0,r.vU)("MultiPulse does not support materialization.")},visit(t,e){const n=this,i=n.pulses,r=i.length;let o=0;if(t&n.SOURCE)for(;o<r;++o)i[o].visit(t,e);else for(;o<r;++o)i[o].stamp===n.stamp&&i[o].visit(t,e);return n}}),ve("error"),ve("warn"),ve("info"),ve("debug"),ve("level"),(0,r.XW)((function(t,e){he.call(this,t,null,e)}),he,{run(t){if(t.stamp<this.stamp)return t.StopPropagation;let e;return this.skip()?this.skip(!1):e=this.evaluate(t),e=e||t,e.then?e=e.then((t=>this.pulse=t)):e!==t.StopPropagation&&(this.pulse=e),e},evaluate(t){const e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},transform(){}});var me=n(1724),we=n(4620),ke=n(108),Me=n(1265),Te=n(8122),Ae=n(9885),Se=n(5692),Pe=n(88);function Ee(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}var Ne=n(5910);function Re(t,e){var n=(0,Ne.wx)(+t,+e);return function(t){var e=n(t);return e-360*Math.floor(e/360)}}var Ce,ze=n(3626),De=n(7896),Fe=n(8528),Le=n(5720),Ze=n(9843),Oe=180/Math.PI,qe={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ie(t,e,n,i,r,o){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*i)&&(n-=t*c,i-=e*c),(a=Math.sqrt(n*n+i*i))&&(n/=a,i/=a,c/=a),t*i<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:r,translateY:o,rotate:Math.atan2(e,t)*Oe,skewX:Math.atan(c)*Oe,scaleX:s,scaleY:a}}function je(t,e,n,i){function r(t){return t.length?t.pop()+" ":""}return function(o,s){var a=[],c=[];return o=t(o),s=t(s),function(t,i,r,o,s,a){if(t!==r||i!==o){var c=s.push("translate(",null,e,null,n);a.push({i:c-4,x:(0,ze.Z)(t,r)},{i:c-2,x:(0,ze.Z)(i,o)})}else(r||o)&&s.push("translate("+r+e+o+n)}(o.translateX,o.translateY,s.translateX,s.translateY,a,c),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(r(n)+"rotate(",null,i)-2,x:(0,ze.Z)(t,e)})):e&&n.push(r(n)+"rotate("+e+i)}(o.rotate,s.rotate,a,c),function(t,e,n,o){t!==e?o.push({i:n.push(r(n)+"skewX(",null,i)-2,x:(0,ze.Z)(t,e)}):e&&n.push(r(n)+"skewX("+e+i)}(o.skewX,s.skewX,a,c),function(t,e,n,i,o,s){if(t!==n||e!==i){var a=o.push(r(o)+"scale(",null,",",null,")");s.push({i:a-4,x:(0,ze.Z)(t,n)},{i:a-2,x:(0,ze.Z)(e,i)})}else 1===n&&1===i||o.push(r(o)+"scale("+n+","+i+")")}(o.scaleX,o.scaleY,s.scaleX,s.scaleY,a,c),o=s=null,function(t){for(var e,n=-1,i=c.length;++n<i;)a[(e=c[n]).i]=e.x(t);return a.join("")}}}var Xe=je((function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?qe:Ie(e.a,e.b,e.c,e.d,e.e,e.f)}),"px, ","px)","deg)"),Ue=je((function(t){return null==t?qe:(Ce||(Ce=document.createElementNS("http://www.w3.org/2000/svg","g")),Ce.setAttribute("transform",t),(t=Ce.transform.baseVal.consolidate())?Ie((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):qe)}),", ",")",")");function Be(t){return((t=Math.exp(t))+1/t)/2}const He=function t(e,n,i){function r(t,r){var o,s,a=t[0],c=t[1],l=t[2],u=r[0],h=r[1],f=r[2],d=u-a,_=h-c,p=d*d+_*_;if(p<1e-12)s=Math.log(f/l)/e,o=function(t){return[a+t*d,c+t*_,l*Math.exp(e*t*s)]};else{var g=Math.sqrt(p),y=(f*f-l*l+i*p)/(2*l*n*g),b=(f*f-l*l-i*p)/(2*f*n*g),x=Math.log(Math.sqrt(y*y+1)-y),v=Math.log(Math.sqrt(b*b+1)-b);s=(v-x)/e,o=function(t){var i,r=t*s,o=Be(x),u=l/(n*g)*(o*(i=e*r+x,((i=Math.exp(2*i))-1)/(i+1))-function(t){return((t=Math.exp(t))-1/t)/2}(x));return[a+u*d,c+u*_,l*o/Be(e*r+x)]}}return o.duration=1e3*s*e/Math.SQRT2,o}return r.rho=function(e){var n=Math.max(.001,+e),i=n*n;return t(n,i,i*i)},r}(Math.SQRT2,2,4);var Je=n(3414),Ge=n(3622);function We(t){return function(e,n){var i=t((e=(0,Ge.hsl)(e)).h,(n=(0,Ge.hsl)(n)).h),r=(0,Ne.ZP)(e.s,n.s),o=(0,Ne.ZP)(e.l,n.l),s=(0,Ne.ZP)(e.opacity,n.opacity);return function(t){return e.h=i(t),e.s=r(t),e.l=o(t),e.opacity=s(t),e+""}}}const Ye=We(Ne.wx);var Ve=We(Ne.ZP);function Qe(t,e){var n=(0,Ne.ZP)((t=(0,Ge.lab)(t)).l,(e=(0,Ge.lab)(e)).l),i=(0,Ne.ZP)(t.a,e.a),r=(0,Ne.ZP)(t.b,e.b),o=(0,Ne.ZP)(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=i(e),t.b=r(e),t.opacity=o(e),t+""}}function $e(t){return function(e,n){var i=t((e=(0,Ge.hcl)(e)).h,(n=(0,Ge.hcl)(n)).h),r=(0,Ne.ZP)(e.c,n.c),o=(0,Ne.ZP)(e.l,n.l),s=(0,Ne.ZP)(e.opacity,n.opacity);return function(t){return e.h=i(t),e.c=r(t),e.l=o(t),e.opacity=s(t),e+""}}}const Ke=$e(Ne.wx);var tn=$e(Ne.ZP);function en(t){return function e(n){function i(e,i){var r=t((e=(0,Ge.cubehelix)(e)).h,(i=(0,Ge.cubehelix)(i)).h),o=(0,Ne.ZP)(e.s,i.s),s=(0,Ne.ZP)(e.l,i.l),a=(0,Ne.ZP)(e.opacity,i.opacity);return function(t){return e.h=r(t),e.s=o(t),e.l=s(Math.pow(t,n)),e.opacity=a(t),e+""}}return n=+n,i.gamma=e,i}(1)}const nn=en(Ne.wx);var rn=en(Ne.ZP);function on(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t(i/(e-1));return n}var sn=n(3093);function an(t,e,n){const i=t-e+2*n;return t?i>0?i:1:0}const cn="linear",ln="log",un="pow",hn="sqrt",fn="symlog",dn="time",_n="utc",pn="sequential",gn="diverging",yn="quantile",bn="quantize",xn="threshold",vn="continuous",mn="discrete",wn="discretizing",kn="interpolating",Mn="temporal";function Tn(){const t=(0,we.scaleOrdinal)().unknown(void 0),e=t.domain,n=t.range;let i,r,o=[0,1],s=!1,a=0,c=0,l=.5;function u(){const t=e().length,u=o[1]<o[0],h=o[1-u],f=an(t,a,c);let d=o[u-0];i=(h-d)/(f||1),s&&(i=Math.floor(i)),d+=(h-d-i*(t-a))*l,r=i*(1-a),s&&(d=Math.round(d),r=Math.round(r));const _=(0,me.range)(t).map((t=>d+i*t));return n(u?_.reverse():_)}return delete t.unknown,t.domain=function(t){return arguments.length?(e(t),u()):e()},t.range=function(t){return arguments.length?(o=[+t[0],+t[1]],u()):o.slice()},t.rangeRound=function(t){return o=[+t[0],+t[1]],s=!0,u()},t.bandwidth=function(){return r},t.step=function(){return i},t.round=function(t){return arguments.length?(s=!!t,u()):s},t.padding=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),a=c,u()):a},t.paddingInner=function(t){return arguments.length?(a=Math.max(0,Math.min(1,t)),u()):a},t.paddingOuter=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),u()):c},t.align=function(t){return arguments.length?(l=Math.max(0,Math.min(1,t)),u()):l},t.invertRange=function(t){if(null==t[0]||null==t[1])return;const i=o[1]<o[0],s=i?n().reverse():n(),a=s.length-1;let c,l,u,h=+t[0],f=+t[1];return h!=h||f!=f||(f<h&&(u=h,h=f,f=u),f<s[0]||h>o[1-i])?void 0:(c=Math.max(0,(0,me.bisectRight)(s,h)-1),l=h===f?c:(0,me.bisectRight)(s,f)-1,h-s[c]>r+1e-10&&++c,i&&(u=c,c=a-l,l=a-u),c>l?void 0:e().slice(c,l+1))},t.invert=function(e){const n=t.invertRange([e,e]);return n?n[0]:n},t.copy=function(){return Tn().domain(e()).range(o).round(s).paddingInner(a).paddingOuter(c).align(l)},u()}function An(t){const e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return An(e())},t}var Sn=Array.prototype.map;function Pn(t){return Sn.call(t,r.He)}const En=Array.prototype.slice,Nn={};function Rn(t,e,n){const i=function(){const n=e();return n.invertRange||(n.invertRange=n.invert?(i=n,function(t){let e,n=t[0],r=t[1];return r<n&&(e=n,n=r,r=e),[i.invert(n),i.invert(r)]}):n.invertExtent?function(t){return function(e){const n=t.range();let i,r,o,s,a=e[0],c=e[1],l=-1;for(c<a&&(r=a,a=c,c=r),o=0,s=n.length;o<s;++o)n[o]>=a&&n[o]<=c&&(l<0&&(l=o),i=o);if(!(l<0))return a=t.invertExtent(n[l]),c=t.invertExtent(n[i]),[void 0===a[0]?a[1]:a[0],void 0===c[1]?c[0]:c[1]]}}(n):void 0),n.type=t,n;var i};return i.metadata=(0,r.Rg)((0,r.IX)(n)),i}function Cn(t,e,n){return arguments.length>1?(Nn[t]=Rn(t,e,n),this):zn(t)?Nn[t]:void 0}function zn(t){return(0,r.nr)(Nn,t)}function Dn(t,e){const n=Nn[t];return n&&n.metadata[e]}function Fn(t){return Dn(t,mn)}Cn("identity",we.scaleIdentity),Cn(cn,we.scaleLinear,vn),Cn(ln,we.scaleLog,[vn,ln]),Cn(un,we.scalePow,vn),Cn(hn,we.scaleSqrt,vn),Cn(fn,we.scaleSymlog,vn),Cn(dn,we.scaleTime,[vn,Mn]),Cn(_n,we.scaleUtc,[vn,Mn]),Cn(pn,we.scaleSequential,[vn,kn]),Cn("".concat(pn,"-").concat(cn),we.scaleSequential,[vn,kn]),Cn("".concat(pn,"-").concat(ln),we.scaleSequentialLog,[vn,kn,ln]),Cn("".concat(pn,"-").concat(un),we.scaleSequentialPow,[vn,kn]),Cn("".concat(pn,"-").concat(hn),we.scaleSequentialSqrt,[vn,kn]),Cn("".concat(pn,"-").concat(fn),we.scaleSequentialSymlog,[vn,kn]),Cn("".concat(gn,"-").concat(cn),we.scaleDiverging,[vn,kn]),Cn("".concat(gn,"-").concat(ln),we.scaleDivergingLog,[vn,kn,ln]),Cn("".concat(gn,"-").concat(un),we.scaleDivergingPow,[vn,kn]),Cn("".concat(gn,"-").concat(hn),we.scaleDivergingSqrt,[vn,kn]),Cn("".concat(gn,"-").concat(fn),we.scaleDivergingSymlog,[vn,kn]),Cn(yn,we.scaleQuantile,[wn,yn]),Cn(bn,we.scaleQuantize,wn),Cn(xn,we.scaleThreshold,wn),Cn("bin-ordinal",(function t(){let e=[],n=[];function i(t){return null==t||t!=t?void 0:n[((0,me.bisect)(e,t)-1)%n.length]}return i.domain=function(t){return arguments.length?(e=Pn(t),i):e.slice()},i.range=function(t){return arguments.length?(n=En.call(t),i):n.slice()},i.tickFormat=function(t,n){return(0,we.tickFormat)(e[0],(0,r.fj)(e),null==t?10:t,n)},i.copy=function(){return t().domain(i.domain()).range(i.range())},i}),[mn,wn]),Cn("ordinal",we.scaleOrdinal,mn),Cn("band",Tn,mn),Cn("point",(function(){return An(Tn().paddingInner(1))}),mn);const Ln=["clamp","base","constant","exponent"];function Zn(t){const e=t.length/6|0,n=new Array(e);for(let i=0;i<e;)n[i]="#"+t.slice(6*i,6*++i);return n}function On(t,e){for(const n in t)In(n,e(t[n]))}const qn={};function In(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(qn[t]=e,this):qn[t]}On({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},Zn),On({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},(t=>function(t,e,n){return ke.Z(function(t,e){const n=i[function(t){return"interpolate"+t.toLowerCase().split("-").map((t=>t[0].toUpperCase()+t.slice(1))).join("")}(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}(e||"rgb",n),t)}(Zn(t))));const jn=t=>(0,r.kJ)(t)?t.map((t=>String(t))):String(t),Xn=(t,e)=>t[1]-e[1],Un=(t,e)=>e[1]-t[1];function Bn(t,e){return t.bins?function(t,e,n){let i=t.range(),o=i[0],s=(0,r.fj)(i),a=Xn;return o>s&&(i=s,s=o,o=i,a=Un),o=Math.floor(o),s=Math.ceil(s),e=e.map((e=>[e,t(e)])).filter((t=>o<=t[1]&&t[1]<=s)).sort(a).map((t=>t[0]))}(t,t.bins):t.ticks?t.ticks(e):t.domain()}function Hn(t,e,n){const i=Bn(t,e),r=t.base(),o=Math.log(r),s=Math.max(1,r*e/i.length),a=t=>{let e=t/Math.pow(r,Math.round(Math.log(t)/o));return e*r<r-.5&&(e*=r),e<=s};return n?i.filter(a):a}const Jn={[yn]:"quantiles",[bn]:"thresholds",[xn]:"domain"},Gn={[yn]:"quantiles",[bn]:"domain"};function Wn(t,e,n,i,r,o,s){const a=Gn[e.type]&&o!==dn&&o!==_n?function(t,e,n){const i=e[Gn[e.type]](),r=i.length;let o,s=r>1?i[1]-i[0]:i[0];for(o=1;o<r;++o)s=Math.min(s,i[o]-i[o-1]);return t.formatSpan(0,s,30,n)}(t,e,r):function(t,e,n,i,r,o){const s=e.type;let a=jn;if(s===dn||r===dn)a=t.timeFormat(i);else if(s===_n||r===_n)a=t.utcFormat(i);else if(Dn(s,ln)){const r=t.formatFloat(i);if(o||e.bins)a=r;else{const t=Hn(e,n,!1);a=e=>t(e)?r(e):""}}else if(e.tickFormat){const r=e.domain();a=t.formatSpan(r[0],r[r.length-1],n,i)}else i&&(a=t.format(i));return a}(t,e,n,r,o,s);return"symbol"===i&&(t=>Jn[t.type]||t.bins)(e)?Yn(a):"discrete"===i?Qn(a):$n(a)}const Yn=t=>(e,n,i)=>{const r=Vn(i[n+1],Vn(i.max,1/0)),o=Kn(e,t),s=Kn(r,t);return o&&s?o+" – "+s:s?"< "+s:"≥ "+o},Vn=(t,e)=>null!=t?t:e,Qn=t=>(e,n)=>n?t(e):null,$n=t=>e=>t(e),Kn=(t,e)=>Number.isFinite(t)?e(t):null;function ti(t,e,n){n=n||{};const i=Math.max(3,n.maxlen||7),o=function(t,e,n,i){const o=i||e.type;return(0,r.HD)(n)&&Dn(o,Mn)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),n||o!==dn?n||o!==_n?Wn(t,e,5,null,n,i,!0):t.utcFormat("%A, %d %B %Y, %X UTC"):t.timeFormat("%A, %d %B %Y, %X")}(t,e,n.format,n.formatType);if(Dn(e.type,wn)){const t=function(t,e){return t.bins?function(t){const e=t.slice(0,-1);return e.max=(0,r.fj)(t),e}(t.bins):t.type===ln?Hn(t,e,!0):Jn[t.type]?function(t){const e=[-1/0].concat(t);return e.max=1/0,e}(t[Jn[t.type]]()):Bn(t,e)}(e).slice(1).map(o),n=t.length;return"".concat(n," boundar").concat(1===n?"y":"ies",": ").concat(t.join(", "))}if(Fn(e.type)){const t=e.domain(),n=t.length,r=n>i?t.slice(0,i-2).map(o).join(", ")+", ending with "+t.slice(-1).map(o):t.map(o).join(", ");return"".concat(n," value").concat(1===n?"":"s",": ").concat(r)}{const t=e.domain();return"values from ".concat(o(t[0])," to ").concat(o((0,r.fj)(t)))}}function ei(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function ni(t){this._context=t}function ii(){}function ri(t){this._context=t}function oi(t){this._context=t}function si(t,e){this._basis=new ni(t),this._beta=e}ni.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ei(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ei(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ri.prototype={areaStart:ii,areaEnd:ii,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:ei(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},oi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:ei(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},si.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var i,r=t[0],o=e[0],s=t[n]-r,a=e[n]-o,c=-1;++c<=n;)i=c/n,this._basis.point(this._beta*t[c]+(1-this._beta)*(r+i*s),this._beta*e[c]+(1-this._beta)*(o+i*a));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const ai=function t(e){function n(t){return 1===e?new ni(t):new si(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function ci(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function li(t,e){this._context=t,this._k=(1-e)/6}li.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ci(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:ci(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ui=function t(e){function n(t){return new li(t,e)}return n.tension=function(e){return t(+e)},n}(0);function hi(t,e){this._context=t,this._k=(1-e)/6}hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ci(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const fi=function t(e){function n(t){return new hi(t,e)}return n.tension=function(e){return t(+e)},n}(0);function di(t,e){this._context=t,this._k=(1-e)/6}di.prototype={areaStart:ii,areaEnd:ii,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ci(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const _i=function t(e){function n(t){return new di(t,e)}return n.tension=function(e){return t(+e)},n}(0),pi=Math.abs,gi=Math.atan2,yi=Math.cos,bi=Math.max,xi=Math.min,vi=Math.sin,mi=Math.sqrt,wi=1e-12,ki=Math.PI,Mi=ki/2,Ti=2*ki;function Ai(t){return t>1?0:t<-1?ki:Math.acos(t)}function Si(t){return t>=1?Mi:t<=-1?-Mi:Math.asin(t)}function Pi(t,e,n){var i=t._x1,r=t._y1,o=t._x2,s=t._y2;if(t._l01_a>wi){var a=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*a-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,r=(r*a-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>wi){var l=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,u=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*l+t._x1*t._l23_2a-e*t._l12_2a)/u,s=(s*l+t._y1*t._l23_2a-n*t._l12_2a)/u}t._context.bezierCurveTo(i,r,o,s,t._x2,t._y2)}function Ei(t,e){this._context=t,this._alpha=e}Ei.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Pi(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ni=function t(e){function n(t){return e?new Ei(t,e):new li(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ri(t,e){this._context=t,this._alpha=e}Ri.prototype={areaStart:ii,areaEnd:ii,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Pi(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ci=function t(e){function n(t){return e?new Ri(t,e):new di(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function zi(t,e){this._context=t,this._alpha=e}zi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,i=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Pi(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Di=function t(e){function n(t){return e?new zi(t,e):new hi(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Fi(t){this._context=t}function Li(t){return new Fi(t)}function Zi(t){this._context=t}function Oi(t){return t<0?-1:1}function qi(t,e,n){var i=t._x1-t._x0,r=e-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),s=(n-t._y1)/(r||i<0&&-0),a=(o*r+s*i)/(i+r);return(Oi(o)+Oi(s))*Math.min(Math.abs(o),Math.abs(s),.5*Math.abs(a))||0}function Ii(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function ji(t,e,n){var i=t._x0,r=t._y0,o=t._x1,s=t._y1,a=(o-i)/3;t._context.bezierCurveTo(i+a,r+a*e,o-a,s-a*n,o,s)}function Xi(t){this._context=t}function Ui(t){this._context=new Bi(t)}function Bi(t){this._context=t}function Hi(t){this._context=t}function Ji(t){var e,n,i=t.length-1,r=new Array(i),o=new Array(i),s=new Array(i);for(r[0]=0,o[0]=2,s[0]=t[0]+2*t[1],e=1;e<i-1;++e)r[e]=1,o[e]=4,s[e]=4*t[e]+2*t[e+1];for(r[i-1]=2,o[i-1]=7,s[i-1]=8*t[i-1]+t[i],e=1;e<i;++e)n=r[e]/o[e-1],o[e]-=n,s[e]-=n*s[e-1];for(r[i-1]=s[i-1]/o[i-1],e=i-2;e>=0;--e)r[e]=(s[e]-r[e+1])/o[e];for(o[i-1]=(t[i]+r[i-1])/2,e=0;e<i-1;++e)o[e]=2*t[e+1]-r[e+1];return[r,o]}function Gi(t,e){this._context=t,this._t=e}Fi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},Zi.prototype={areaStart:ii,areaEnd:ii,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},Xi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:ji(this,this._t0,Ii(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,ji(this,Ii(this,n=qi(this,t,e)),n);break;default:ji(this,this._t0,n=qi(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ui.prototype=Object.create(Xi.prototype)).point=function(t,e){Xi.prototype.point.call(this,e,t)},Bi.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,i,r,o){this._context.bezierCurveTo(e,t,i,n,o,r)}},Hi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var i=Ji(t),r=Ji(e),o=0,s=1;s<n;++o,++s)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[s],e[s]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Gi.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};const Wi=Math.PI,Yi=2*Wi,Vi=1e-6,Qi=Yi-Vi;function $i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Ki(){return new $i}$i.prototype=Ki.prototype={constructor:$i,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,i){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+i)},bezierCurveTo:function(t,e,n,i,r,o){this._+="C"+ +t+","+ +e+","+ +n+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,n,i,r){t=+t,e=+e,n=+n,i=+i,r=+r;var o=this._x1,s=this._y1,a=n-t,c=i-e,l=o-t,u=s-e,h=l*l+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(h>Vi)if(Math.abs(u*a-c*l)>Vi&&r){var f=n-o,d=i-s,_=a*a+c*c,p=f*f+d*d,g=Math.sqrt(_),y=Math.sqrt(h),b=r*Math.tan((Wi-Math.acos((_+h-p)/(2*g*y)))/2),x=b/y,v=b/g;Math.abs(x-1)>Vi&&(this._+="L"+(t+x*l)+","+(e+x*u)),this._+="A"+r+","+r+",0,0,"+ +(u*f>l*d)+","+(this._x1=t+v*a)+","+(this._y1=e+v*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,i,r,o){t=+t,e=+e,o=!!o;var s=(n=+n)*Math.cos(i),a=n*Math.sin(i),c=t+s,l=e+a,u=1^o,h=o?i-r:r-i;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+c+","+l:(Math.abs(this._x1-c)>Vi||Math.abs(this._y1-l)>Vi)&&(this._+="L"+c+","+l),n&&(h<0&&(h=h%Yi+Yi),h>Qi?this._+="A"+n+","+n+",0,1,"+u+","+(t-s)+","+(e-a)+"A"+n+","+n+",0,1,"+u+","+(this._x1=c)+","+(this._y1=l):h>Vi&&(this._+="A"+n+","+n+",0,"+ +(h>=Wi)+","+u+","+(this._x1=t+n*Math.cos(r))+","+(this._y1=e+n*Math.sin(r))))},rect:function(t,e,n,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +i+"h"+-n+"Z"},toString:function(){return this._}};const tr=Ki;function er(t){return function(){return t}}function nr(t){return t.innerRadius}function ir(t){return t.outerRadius}function rr(t){return t.startAngle}function or(t){return t.endAngle}function sr(t){return t&&t.padAngle}function ar(t,e,n,i,r,o,s,a){var c=n-t,l=i-e,u=s-r,h=a-o,f=h*c-u*l;if(!(f*f<wi))return[t+(f=(u*(e-o)-h*(t-r))/f)*c,e+f*l]}function cr(t,e,n,i,r,o,s){var a=t-n,c=e-i,l=(s?o:-o)/mi(a*a+c*c),u=l*c,h=-l*a,f=t+u,d=e+h,_=n+u,p=i+h,g=(f+_)/2,y=(d+p)/2,b=_-f,x=p-d,v=b*b+x*x,m=r-o,w=f*p-_*d,k=(x<0?-1:1)*mi(bi(0,m*m*v-w*w)),M=(w*x-b*k)/v,T=(-w*b-x*k)/v,A=(w*x+b*k)/v,S=(-w*b+x*k)/v,P=M-g,E=T-y,N=A-g,R=S-y;return P*P+E*E>N*N+R*R&&(M=A,T=S),{cx:M,cy:T,x01:-u,y01:-h,x11:M*(r/m-1),y11:T*(r/m-1)}}function lr(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function ur(t){return t[0]}function hr(t){return t[1]}function fr(t,e){var n=er(!0),i=null,r=Li,o=null;function s(s){var a,c,l,u=(s=lr(s)).length,h=!1;for(null==i&&(o=r(l=tr())),a=0;a<=u;++a)!(a<u&&n(c=s[a],a,s))===h&&((h=!h)?o.lineStart():o.lineEnd()),h&&o.point(+t(c,a,s),+e(c,a,s));if(l)return o=null,l+""||null}return t="function"==typeof t?t:void 0===t?ur:er(t),e="function"==typeof e?e:void 0===e?hr:er(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:er(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:er(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:er(!!t),s):n},s.curve=function(t){return arguments.length?(r=t,null!=i&&(o=r(i)),s):r},s.context=function(t){return arguments.length?(null==t?i=o=null:o=r(i=t),s):i},s}function dr(t,e,n){var i=null,r=er(!0),o=null,s=Li,a=null;function c(c){var l,u,h,f,d,_=(c=lr(c)).length,p=!1,g=new Array(_),y=new Array(_);for(null==o&&(a=s(d=tr())),l=0;l<=_;++l){if(!(l<_&&r(f=c[l],l,c))===p)if(p=!p)u=l,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),h=l-1;h>=u;--h)a.point(g[h],y[h]);a.lineEnd(),a.areaEnd()}p&&(g[l]=+t(f,l,c),y[l]=+e(f,l,c),a.point(i?+i(f,l,c):g[l],n?+n(f,l,c):y[l]))}if(d)return a=null,d+""||null}function l(){return fr().defined(r).curve(s).context(o)}return t="function"==typeof t?t:void 0===t?ur:er(+t),e="function"==typeof e?e:er(void 0===e?0:+e),n="function"==typeof n?n:void 0===n?hr:er(+n),c.x=function(e){return arguments.length?(t="function"==typeof e?e:er(+e),i=null,c):t},c.x0=function(e){return arguments.length?(t="function"==typeof e?e:er(+e),c):t},c.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:er(+t),c):i},c.y=function(t){return arguments.length?(e="function"==typeof t?t:er(+t),n=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:er(+t),c):e},c.y1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:er(+t),c):n},c.lineX0=c.lineY0=function(){return l().x(t).y(e)},c.lineY1=function(){return l().x(t).y(n)},c.lineX1=function(){return l().x(i).y(e)},c.defined=function(t){return arguments.length?(r="function"==typeof t?t:er(!!t),c):r},c.curve=function(t){return arguments.length?(s=t,null!=o&&(a=s(o)),c):s},c.context=function(t){return arguments.length?(null==t?o=a=null:a=s(o=t),c):o},c}Array.prototype.slice,mi(3);const _r={draw(t,e){const n=mi(e/ki);t.moveTo(n,0),t.arc(0,0,n,0,Ti)}};mi(1/3),vi(ki/10),vi(7*ki/10);function pr(t,e){if("undefined"!=typeof document&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=t,n.height=e,n}return null}vi(Ti/10),yi(Ti/10),mi(3),mi(3),mi(3),mi(12);const gr=()=>"undefined"!=typeof Image?Image:null;let yr=0;const br="p_";function xr(t){return t&&t.gradient}function vr(t,e,n){const i=t.gradient;let r=t.id,o="radial"===i?br:"";return r||(r=t.id="gradient_"+yr++,"radial"===i?(t.x1=mr(t.x1,.5),t.y1=mr(t.y1,.5),t.r1=mr(t.r1,0),t.x2=mr(t.x2,.5),t.y2=mr(t.y2,.5),t.r2=mr(t.r2,.5),o=br):(t.x1=mr(t.x1,0),t.y1=mr(t.y1,0),t.x2=mr(t.x2,1),t.y2=mr(t.y2,0))),e[r]=t,"url("+(n||"")+"#"+o+r+")"}function mr(t,e){return null!=t?t:e}const wr={basis:{curve:function(t){return new ni(t)}},"basis-closed":{curve:function(t){return new ri(t)}},"basis-open":{curve:function(t){return new oi(t)}},bundle:{curve:ai,tension:"beta",value:.85},cardinal:{curve:ui,tension:"tension",value:0},"cardinal-open":{curve:fi,tension:"tension",value:0},"cardinal-closed":{curve:_i,tension:"tension",value:0},"catmull-rom":{curve:Ni,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Ci,tension:"alpha",value:.5},"catmull-rom-open":{curve:Di,tension:"alpha",value:.5},linear:{curve:Li},"linear-closed":{curve:function(t){return new Zi(t)}},monotone:{horizontal:function(t){return new Ui(t)},vertical:function(t){return new Xi(t)}},natural:{curve:function(t){return new Hi(t)}},step:{curve:function(t){return new Gi(t,.5)}},"step-after":{curve:function(t){return new Gi(t,1)}},"step-before":{curve:function(t){return new Gi(t,0)}}};function kr(t,e,n){var i=(0,r.nr)(wr,t)&&wr[t],o=null;return i&&(o=i.curve||i[e||"vertical"],i.tension&&null!=n&&(o=o[i.tension](n))),o}const Mr={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Tr=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ar=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Sr=/^((\s+,?\s*)|(,\s*))/,Pr=/^[01]/;function Er(t){const e=[];return(t.match(Tr)||[]).forEach((t=>{let n=t[0];const i=n.toLowerCase(),r=Mr[i],o=function(t,e,n){const i=[];for(let r=0;e&&r<n.length;)for(let o=0;o<e;++o){const e="a"!==t||3!==o&&4!==o?Ar:Pr,s=n.slice(r).match(e);if(null===s)throw Error("Invalid SVG path, incorrect parameter type");r+=s[0].length,i.push(+s[0]);const a=n.slice(r).match(Sr);null!==a&&(r+=a[0].length)}return i}(i,r,t.slice(1).trim()),s=o.length;if(s<r||s&&s%r!=0)throw Error("Invalid SVG path, incorrect parameter count");if(e.push([n,...o.slice(0,r)]),s!==r){"m"===i&&(n="M"===n?"L":"l");for(let t=r;t<s;t+=r)e.push([n,...o.slice(t,t+r)])}})),e}const Nr=Math.PI/180,Rr=Math.PI/2,Cr=2*Math.PI,zr=Math.sqrt(3)/2;var Dr={},Fr={},Lr=[].join;function Zr(t){const e=Lr.call(t);if(Fr[e])return Fr[e];var n=t[0],i=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7];const u=l*s,h=-c*a,f=c*s,d=l*a,_=Math.cos(r),p=Math.sin(r),g=Math.cos(o),y=Math.sin(o),b=.5*(o-r),x=Math.sin(.5*b),v=8/3*x*x/Math.sin(b),m=n+_-v*p,w=i+p+v*_,k=n+g,M=i+y,T=k+v*y,A=M-v*g;return Fr[e]=[u*m+h*w,f*m+d*w,u*T+h*A,f*T+d*A,u*k+h*M,f*k+d*M]}const Or=["l",0,0,0,0,0,0,0];function qr(t,e,n){const i=Or[0]=t[0];if("a"===i||"A"===i)Or[1]=e*t[1],Or[2]=n*t[2],Or[3]=t[3],Or[4]=t[4],Or[5]=t[5],Or[6]=e*t[6],Or[7]=n*t[7];else if("h"===i||"H"===i)Or[1]=e*t[1];else if("v"===i||"V"===i)Or[1]=n*t[1];else for(var r=1,o=t.length;r<o;++r)Or[r]=(r%2==1?e:n)*t[r];return Or}function Ir(t,e,n,i,r,o){var s,a,c,l,u,h=null,f=0,d=0,_=0,p=0,g=0,y=0;null==n&&(n=0),null==i&&(i=0),null==r&&(r=1),null==o&&(o=r),t.beginPath&&t.beginPath();for(var b=0,x=e.length;b<x;++b){switch(s=e[b],1===r&&1===o||(s=qr(s,r,o)),s[0]){case"l":f+=s[1],d+=s[2],t.lineTo(f+n,d+i);break;case"L":f=s[1],d=s[2],t.lineTo(f+n,d+i);break;case"h":f+=s[1],t.lineTo(f+n,d+i);break;case"H":f=s[1],t.lineTo(f+n,d+i);break;case"v":d+=s[1],t.lineTo(f+n,d+i);break;case"V":d=s[1],t.lineTo(f+n,d+i);break;case"m":g=f+=s[1],y=d+=s[2],t.moveTo(f+n,d+i);break;case"M":g=f=s[1],y=d=s[2],t.moveTo(f+n,d+i);break;case"c":a=f+s[5],c=d+s[6],_=f+s[3],p=d+s[4],t.bezierCurveTo(f+s[1]+n,d+s[2]+i,_+n,p+i,a+n,c+i),f=a,d=c;break;case"C":f=s[5],d=s[6],_=s[3],p=s[4],t.bezierCurveTo(s[1]+n,s[2]+i,_+n,p+i,f+n,d+i);break;case"s":a=f+s[3],c=d+s[4],_=2*f-_,p=2*d-p,t.bezierCurveTo(_+n,p+i,f+s[1]+n,d+s[2]+i,a+n,c+i),_=f+s[1],p=d+s[2],f=a,d=c;break;case"S":a=s[3],c=s[4],_=2*f-_,p=2*d-p,t.bezierCurveTo(_+n,p+i,s[1]+n,s[2]+i,a+n,c+i),f=a,d=c,_=s[1],p=s[2];break;case"q":a=f+s[3],c=d+s[4],_=f+s[1],p=d+s[2],t.quadraticCurveTo(_+n,p+i,a+n,c+i),f=a,d=c;break;case"Q":a=s[3],c=s[4],t.quadraticCurveTo(s[1]+n,s[2]+i,a+n,c+i),f=a,d=c,_=s[1],p=s[2];break;case"t":a=f+s[1],c=d+s[2],null===h[0].match(/[QqTt]/)?(_=f,p=d):"t"===h[0]?(_=2*f-l,p=2*d-u):"q"===h[0]&&(_=2*f-_,p=2*d-p),l=_,u=p,t.quadraticCurveTo(_+n,p+i,a+n,c+i),d=c,_=(f=a)+s[1],p=d+s[2];break;case"T":a=s[1],c=s[2],_=2*f-_,p=2*d-p,t.quadraticCurveTo(_+n,p+i,a+n,c+i),f=a,d=c;break;case"a":jr(t,f+n,d+i,[s[1],s[2],s[3],s[4],s[5],s[6]+f+n,s[7]+d+i]),f+=s[6],d+=s[7];break;case"A":jr(t,f+n,d+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),f=s[6],d=s[7];break;case"z":case"Z":f=g,d=y,t.closePath()}h=s}}function jr(t,e,n,i){const r=function(t,e,n,i,r,o,s,a,c){const l=Lr.call(arguments);if(Dr[l])return Dr[l];const u=s*Nr,h=Math.sin(u),f=Math.cos(u),d=f*(a-t)*.5+h*(c-e)*.5,_=f*(c-e)*.5-h*(a-t)*.5;let p=d*d/((n=Math.abs(n))*n)+_*_/((i=Math.abs(i))*i);p>1&&(p=Math.sqrt(p),n*=p,i*=p);const g=f/n,y=h/n,b=-h/i,x=f/i,v=g*a+y*c,m=b*a+x*c,w=g*t+y*e,k=b*t+x*e;let M=1/((w-v)*(w-v)+(k-m)*(k-m))-.25;M<0&&(M=0);let T=Math.sqrt(M);o==r&&(T=-T);const A=.5*(v+w)-T*(k-m),S=.5*(m+k)+T*(w-v),P=Math.atan2(m-S,v-A);let E=Math.atan2(k-S,w-A)-P;E<0&&1===o?E+=Cr:E>0&&0===o&&(E-=Cr);const N=Math.ceil(Math.abs(E/(Rr+.001))),R=[];for(let t=0;t<N;++t){const e=P+t*E/N,r=P+(t+1)*E/N;R[t]=[A,S,e,r,n,i,h,f]}return Dr[l]=R}(i[5],i[6],i[0],i[1],i[3],i[4],i[2],e,n);for(let e=0;e<r.length;++e){const n=Zr(r[e]);t.bezierCurveTo(n[0],n[1],n[2],n[3],n[4],n[5])}}const Xr=.5773502691896257,Ur={circle:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,Cr)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/2.5;t.moveTo(-n,-i),t.lineTo(-n,i),t.lineTo(-i,i),t.lineTo(-i,n),t.lineTo(i,n),t.lineTo(i,i),t.lineTo(n,i),t.lineTo(n,-i),t.lineTo(i,-i),t.lineTo(i,-n),t.lineTo(-i,-n),t.lineTo(-i,-i),t.closePath()}},diamond:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),i=-n/2;t.rect(i,i,n,n)}},arrow:{draw:function(t,e){var n=Math.sqrt(e)/2,i=n/7,r=n/2.5,o=n/8;t.moveTo(-i,n),t.lineTo(i,n),t.lineTo(i,-o),t.lineTo(r,-o),t.lineTo(0,-n),t.lineTo(-r,-o),t.lineTo(-i,-o),t.closePath()}},wedge:{draw:function(t,e){var n=Math.sqrt(e)/2,i=zr*n,r=i-n*Xr,o=n/4;t.moveTo(0,-i-r),t.lineTo(-o,i-r),t.lineTo(o,i-r),t.closePath()}},triangle:{draw:function(t,e){var n=Math.sqrt(e)/2,i=zr*n,r=i-n*Xr;t.moveTo(0,-i-r),t.lineTo(-n,i-r),t.lineTo(n,i-r),t.closePath()}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,i=zr*n;t.moveTo(0,-i),t.lineTo(-n,i),t.lineTo(n,i),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,i=zr*n;t.moveTo(0,i),t.lineTo(-n,-i),t.lineTo(n,-i),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,i=zr*n;t.moveTo(i,0),t.lineTo(-i,-n),t.lineTo(-i,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,i=zr*n;t.moveTo(-i,0),t.lineTo(i,-n),t.lineTo(i,n),t.closePath()}},stroke:{draw:function(t,e){const n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(n,0)}}};var Br={};const Hr=.448084975506;function Jr(t){return t.x}function Gr(t){return t.y}function Wr(t){return t.width}function Yr(t){return t.height}function Vr(t){return"function"==typeof t?t:()=>+t}function Qr(t,e,n){return Math.max(e,Math.min(t,n))}function $r(t,e){return null!=t?t:e}const Kr=t=>t.x||0,to=t=>t.y||0,eo=t=>!(!1===t.defined),no=function(){var t=nr,e=ir,n=er(0),i=null,r=rr,o=or,s=sr,a=null;function c(){var c,l,u=+t.apply(this,arguments),h=+e.apply(this,arguments),f=r.apply(this,arguments)-Mi,d=o.apply(this,arguments)-Mi,_=pi(d-f),p=d>f;if(a||(a=c=tr()),h<u&&(l=h,h=u,u=l),h>wi)if(_>Ti-wi)a.moveTo(h*yi(f),h*vi(f)),a.arc(0,0,h,f,d,!p),u>wi&&(a.moveTo(u*yi(d),u*vi(d)),a.arc(0,0,u,d,f,p));else{var g,y,b=f,x=d,v=f,m=d,w=_,k=_,M=s.apply(this,arguments)/2,T=M>wi&&(i?+i.apply(this,arguments):mi(u*u+h*h)),A=xi(pi(h-u)/2,+n.apply(this,arguments)),S=A,P=A;if(T>wi){var E=Si(T/u*vi(M)),N=Si(T/h*vi(M));(w-=2*E)>wi?(v+=E*=p?1:-1,m-=E):(w=0,v=m=(f+d)/2),(k-=2*N)>wi?(b+=N*=p?1:-1,x-=N):(k=0,b=x=(f+d)/2)}var R=h*yi(b),C=h*vi(b),z=u*yi(m),D=u*vi(m);if(A>wi){var F,L=h*yi(x),Z=h*vi(x),O=u*yi(v),q=u*vi(v);if(_<ki&&(F=ar(R,C,O,q,L,Z,z,D))){var I=R-F[0],j=C-F[1],X=L-F[0],U=Z-F[1],B=1/vi(Ai((I*X+j*U)/(mi(I*I+j*j)*mi(X*X+U*U)))/2),H=mi(F[0]*F[0]+F[1]*F[1]);S=xi(A,(u-H)/(B-1)),P=xi(A,(h-H)/(B+1))}}k>wi?P>wi?(g=cr(O,q,R,C,h,P,p),y=cr(L,Z,z,D,h,P,p),a.moveTo(g.cx+g.x01,g.cy+g.y01),P<A?a.arc(g.cx,g.cy,P,gi(g.y01,g.x01),gi(y.y01,y.x01),!p):(a.arc(g.cx,g.cy,P,gi(g.y01,g.x01),gi(g.y11,g.x11),!p),a.arc(0,0,h,gi(g.cy+g.y11,g.cx+g.x11),gi(y.cy+y.y11,y.cx+y.x11),!p),a.arc(y.cx,y.cy,P,gi(y.y11,y.x11),gi(y.y01,y.x01),!p))):(a.moveTo(R,C),a.arc(0,0,h,b,x,!p)):a.moveTo(R,C),u>wi&&w>wi?S>wi?(g=cr(z,D,L,Z,u,-S,p),y=cr(R,C,O,q,u,-S,p),a.lineTo(g.cx+g.x01,g.cy+g.y01),S<A?a.arc(g.cx,g.cy,S,gi(g.y01,g.x01),gi(y.y01,y.x01),!p):(a.arc(g.cx,g.cy,S,gi(g.y01,g.x01),gi(g.y11,g.x11),!p),a.arc(0,0,u,gi(g.cy+g.y11,g.cx+g.x11),gi(y.cy+y.y11,y.cx+y.x11),p),a.arc(y.cx,y.cy,S,gi(y.y11,y.x11),gi(y.y01,y.x01),!p))):a.arc(0,0,u,m,v,p):a.lineTo(z,D)}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,i=(+r.apply(this,arguments)+ +o.apply(this,arguments))/2-ki/2;return[yi(i)*n,vi(i)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:er(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:er(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:er(+t),c):n},c.padRadius=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:er(+t),c):i},c.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:er(+t),c):r},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:er(+t),c):o},c.padAngle=function(t){return arguments.length?(s="function"==typeof t?t:er(+t),c):s},c.context=function(t){return arguments.length?(a=null==t?null:t,c):a},c}().startAngle((t=>t.startAngle||0)).endAngle((t=>t.endAngle||0)).padAngle((t=>t.padAngle||0)).innerRadius((t=>t.innerRadius||0)).outerRadius((t=>t.outerRadius||0)).cornerRadius((t=>t.cornerRadius||0)),io=dr().x(Kr).y1(to).y0((t=>(t.y||0)+(t.height||0))).defined(eo),ro=dr().y(to).x1(Kr).x0((t=>(t.x||0)+(t.width||0))).defined(eo),oo=fr().x(Kr).y(to).defined(eo),so=function(){var t=Jr,e=Gr,n=Wr,i=Yr,r=Vr(0),o=r,s=r,a=r,c=null;function l(l,u,h){var f,d=null!=u?u:+t.call(this,l),_=null!=h?h:+e.call(this,l),p=+n.call(this,l),g=+i.call(this,l),y=Math.min(p,g)/2,b=Qr(+r.call(this,l),0,y),x=Qr(+o.call(this,l),0,y),v=Qr(+s.call(this,l),0,y),m=Qr(+a.call(this,l),0,y);if(c||(c=f=tr()),b<=0&&x<=0&&v<=0&&m<=0)c.rect(d,_,p,g);else{var w=d+p,k=_+g;c.moveTo(d+b,_),c.lineTo(w-x,_),c.bezierCurveTo(w-Hr*x,_,w,_+Hr*x,w,_+x),c.lineTo(w,k-m),c.bezierCurveTo(w,k-Hr*m,w-Hr*m,k,w-m,k),c.lineTo(d+v,k),c.bezierCurveTo(d+Hr*v,k,d,k-Hr*v,d,k-v),c.lineTo(d,_+b),c.bezierCurveTo(d,_+Hr*b,d+Hr*b,_,d+b,_),c.closePath()}if(f)return c=null,f+""||null}return l.x=function(e){return arguments.length?(t=Vr(e),l):t},l.y=function(t){return arguments.length?(e=Vr(t),l):e},l.width=function(t){return arguments.length?(n=Vr(t),l):n},l.height=function(t){return arguments.length?(i=Vr(t),l):i},l.cornerRadius=function(t,e,n,i){return arguments.length?(r=Vr(t),o=null!=e?Vr(e):r,a=null!=n?Vr(n):r,s=null!=i?Vr(i):o,l):r},l.context=function(t){return arguments.length?(c=null==t?null:t,l):c},l}().x(Kr).y(to).width((t=>t.width||0)).height((t=>t.height||0)).cornerRadius((t=>$r(t.cornerRadiusTopLeft,t.cornerRadius)||0),(t=>$r(t.cornerRadiusTopRight,t.cornerRadius)||0),(t=>$r(t.cornerRadiusBottomRight,t.cornerRadius)||0),(t=>$r(t.cornerRadiusBottomLeft,t.cornerRadius)||0)),ao=function(t,e){let n=null;function i(){let i;if(n||(n=i=tr()),t.apply(this,arguments).draw(n,+e.apply(this,arguments)),i)return n=null,i+""||null}return t="function"==typeof t?t:er(t||_r),e="function"==typeof e?e:er(void 0===e?64:+e),i.type=function(e){return arguments.length?(t="function"==typeof e?e:er(e),i):t},i.size=function(t){return arguments.length?(e="function"==typeof t?t:er(+t),i):e},i.context=function(t){return arguments.length?(n=null==t?null:t,i):n},i}().type((t=>{return e=t.shape||"circle",(0,r.nr)(Ur,e)?Ur[e]:function(t){if(!(0,r.nr)(Br,t)){const e=Er(t);Br[t]={draw:function(t,n){Ir(t,e,0,0,Math.sqrt(n)/2)}}}return Br[t]}(e);var e})).size((t=>$r(t.size,64))),co=function(){var t,e,n,i,r,o,s,a,c=null;function l(t,e,n){const i=n/2;if(r){var l=s-e,u=t-o;if(l||u){var h=Math.sqrt(l*l+u*u),f=(l/=h)*a,d=(u/=h)*a,_=Math.atan2(u,l);c.moveTo(o-f,s-d),c.lineTo(t-l*i,e-u*i),c.arc(t,e,i,_-Math.PI,_),c.lineTo(o+f,s+d),c.arc(o,s,a,_,_+Math.PI)}else c.arc(t,e,i,0,Cr);c.closePath()}else r=1;o=t,s=e,a=i}function u(o){var s,a,u,h=o.length,f=!1;for(null==c&&(c=u=tr()),s=0;s<=h;++s)!(s<h&&i(a=o[s],s,o))===f&&(f=!f)&&(r=0),f&&l(+t(a,s,o),+e(a,s,o),+n(a,s,o));if(u)return c=null,u+""||null}return u.x=function(e){return arguments.length?(t=e,u):t},u.y=function(t){return arguments.length?(e=t,u):e},u.size=function(t){return arguments.length?(n=t,u):n},u.defined=function(t){return arguments.length?(i=t,u):i},u.context=function(t){return arguments.length?(c=null==t?null:t,u):c},u}().x(Kr).y(to).defined(eo).size((t=>t.size||1));function lo(t){return t.cornerRadius||t.cornerRadiusTopLeft||t.cornerRadiusTopRight||t.cornerRadiusBottomRight||t.cornerRadiusBottomLeft}function uo(t,e,n,i){return so.context(t)(e,n,i)}var ho=1;function fo(t,e,n){var i=e.clip,o=t._defs,s=e.clip_id||(e.clip_id="clip"+ho++),a=o.clipping[s]||(o.clipping[s]={id:s});return(0,r.mf)(i)?a.path=i(null):lo(n)?a.path=uo(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+s+")"}function _o(t){this.clear(),t&&this.union(t)}function po(t){this.mark=t,this.bounds=this.bounds||new _o}function go(t){this._pending=0,this._loader=t||ne()}function yo(t){t._pending+=1}function bo(t){t._pending-=1}function xo(t,e,n){if(e.stroke&&0!==e.opacity&&0!==e.strokeOpacity){const i=null!=e.strokeWidth?+e.strokeWidth:1;t.expand(i+(n?function(t,e){return t.strokeJoin&&"miter"!==t.strokeJoin?0:e}(e,i):0))}return t}_o.prototype={clone(){return new _o(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(t){return this.x1===t.x1&&this.y1===t.y1&&this.x2===t.x2&&this.y2===t.y2},set(t,e,n,i){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},add(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},expand(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(t){return this.x1*=t,this.y1*=t,this.x2*=t,this.y2*=t,this},translate(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},rotate(t,e,n){const i=this.rotatedPoints(t,e,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(t,e,n){var{x1:i,y1:r,x2:o,y2:s}=this,a=Math.cos(t),c=Math.sin(t),l=e-e*a+n*c,u=n-e*c-n*a;return[a*i-c*r+l,c*i+a*r+u,a*i-c*s+l,c*i+a*s+u,a*o-c*r+l,c*o+a*r+u,a*o-c*s+l,c*o+a*s+u]},union(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},intersect(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},encloses(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},alignsWith(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},intersects(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},contains(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}},(0,r.XW)((function(t){po.call(this,t),this.items=this.items||[]}),po),go.prototype={pending(){return this._pending},sanitizeURL(t){const e=this;return yo(e),e._loader.sanitize(t,{context:"href"}).then((t=>(bo(e),t))).catch((()=>(bo(e),null)))},loadImage(t){const e=this,n=gr();return yo(e),e._loader.sanitize(t,{context:"image"}).then((t=>{const i=t.href;if(!i||!n)throw{url:i};const o=new n,s=(0,r.nr)(t,"crossOrigin")?t.crossOrigin:"anonymous";return null!=s&&(o.crossOrigin=s),o.onload=()=>bo(e),o.onerror=()=>bo(e),o.src=i,o})).catch((t=>(bo(e),{complete:!1,width:0,height:0,src:t&&t.url||""})))},ready(){const t=this;return new Promise((e=>{!function n(i){t.pending()?setTimeout((()=>{n(!0)}),10):e(i)}(!1)}))}};const vo=Cr-1e-8;let mo,wo,ko,Mo,To,Ao,So,Po;const Eo=(t,e)=>mo.add(t,e),No=(t,e)=>Eo(wo=t,ko=e),Ro=t=>Eo(t,mo.y1),Co=t=>Eo(mo.x1,t),zo=(t,e)=>To*t+So*e,Do=(t,e)=>Ao*t+Po*e,Fo=(t,e)=>Eo(zo(t,e),Do(t,e)),Lo=(t,e)=>No(zo(t,e),Do(t,e));function Zo(t,e){return mo=t,e?(Mo=e*Nr,To=Po=Math.cos(Mo),Ao=Math.sin(Mo),So=-Ao):(To=Po=1,Mo=Ao=So=0),Oo}const Oo={beginPath(){},closePath(){},moveTo:Lo,lineTo:Lo,rect(t,e,n,i){Mo?(Fo(t+n,e),Fo(t+n,e+i),Fo(t,e+i),Lo(t,e)):(Eo(t+n,e+i),No(t,e))},quadraticCurveTo(t,e,n,i){const r=zo(t,e),o=Do(t,e),s=zo(n,i),a=Do(n,i);qo(wo,r,s,Ro),qo(ko,o,a,Co),No(s,a)},bezierCurveTo(t,e,n,i,r,o){const s=zo(t,e),a=Do(t,e),c=zo(n,i),l=Do(n,i),u=zo(r,o),h=Do(r,o);Io(wo,s,c,u,Ro),Io(ko,a,l,h,Co),No(u,h)},arc(t,e,n,i,r,o){if(i+=Mo,r+=Mo,wo=n*Math.cos(r)+t,ko=n*Math.sin(r)+e,Math.abs(r-i)>vo)Eo(t-n,e-n),Eo(t+n,e+n);else{const s=i=>Eo(n*Math.cos(i)+t,n*Math.sin(i)+e);let a,c;if(s(i),s(r),r!==i)if((i%=Cr)<0&&(i+=Cr),(r%=Cr)<0&&(r+=Cr),r<i&&(o=!o,a=i,i=r,r=a),o)for(r-=Cr,a=i-i%Rr,c=0;c<4&&a>r;++c,a-=Rr)s(a);else for(a=i-i%Rr+Rr,c=0;c<4&&a<r;++c,a+=Rr)s(a)}}};function qo(t,e,n,i){const r=(t-e)/(t+n-2*e);0<r&&r<1&&i(t+(e-t)*r)}function Io(t,e,n,i,r){const o=i-t+3*e-3*n,s=t+n-2*e,a=t-e;let c,l=0,u=0;Math.abs(o)>1e-14?(c=s*s+a*o,c>=0&&(c=Math.sqrt(c),l=(-s+c)/o,u=(-s-c)/o)):l=.5*a/s,0<l&&l<1&&r(jo(l,t,e,n,i)),0<u&&u<1&&r(jo(u,t,e,n,i))}function jo(t,e,n,i,r){const o=1-t,s=o*o,a=t*t;return s*o*e+3*s*t*n+3*o*a*i+a*t*r}var Xo=(Xo=pr(1,1))?Xo.getContext("2d"):null;const Uo=new _o;function Bo(t){return function(e,n){if(!Xo)return!0;t(Xo,e),Uo.clear().union(e.bounds).intersect(n).round();const{x1:i,y1:r,x2:o,y2:s}=Uo;for(let t=r;t<=s;++t)for(let e=i;e<=o;++e)if(Xo.isPointInPath(e,t))return!0;return!1}}function Ho(t,e){return e.contains(t.x||0,t.y||0)}function Jo(t,e){const n=t.x||0,i=t.y||0,r=t.width||0,o=t.height||0;return e.intersects(Uo.set(n,i,n+r,i+o))}function Go(t,e,n,i,r){const{x1:o,y1:s,x2:a,y2:c}=t,l=i-e,u=r-n;let h,f,d,_,p=0,g=1;for(_=0;_<4;++_){if(0===_&&(h=-l,f=-(o-e)),1===_&&(h=l,f=a-e),2===_&&(h=-u,f=-(s-n)),3===_&&(h=u,f=c-n),Math.abs(h)<1e-10&&f<0)return!1;if(d=f/h,h<0){if(d>g)return!1;d>p&&(p=d)}else if(h>0){if(d<p)return!1;d<g&&(g=d)}}return!0}function Wo(t,e){t.globalCompositeOperation=e.blend||"source-over"}function Yo(t,e){return null==t?e:t}function Vo(t,e){const n=e.length;for(let i=0;i<n;++i)t.addColorStop(e[i].offset,e[i].color);return t}function Qo(t,e,n){return xr(n)?function(t,e,n){const i=n.width(),r=n.height();let o;if("radial"===e.gradient)o=t.createRadialGradient(n.x1+Yo(e.x1,.5)*i,n.y1+Yo(e.y1,.5)*r,Math.max(i,r)*Yo(e.r1,0),n.x1+Yo(e.x2,.5)*i,n.y1+Yo(e.y2,.5)*r,Math.max(i,r)*Yo(e.r2,.5));else{const s=Yo(e.x1,0),a=Yo(e.y1,0),c=Yo(e.x2,1),l=Yo(e.y2,0);if(s!==c&&a!==l&&i!==r){const n=pr(Math.ceil(i),Math.ceil(r)),o=n.getContext("2d");return o.scale(i,r),o.fillStyle=Vo(o.createLinearGradient(s,a,c,l),e.stops),o.fillRect(0,0,i,r),t.createPattern(n,"no-repeat")}o=t.createLinearGradient(n.x1+s*i,n.y1+a*r,n.x1+c*i,n.y1+l*r)}return Vo(o,e.stops)}(t,n,e.bounds):n}function $o(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=Qo(t,e,e.fill),!0)}var Ko=[];function ts(t,e,n){var i=null!=(i=e.strokeWidth)?i:1;return!(i<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=Qo(t,e,e.stroke),t.lineWidth=i,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||Ko),t.lineDashOffset=e.strokeDashOffset||0),!0)}function es(t,e){return t.zindex-e.zindex||t.index-e.index}function ns(t){if(!t.zdirty)return t.zitems;var e,n,i,r=t.items,o=[];for(n=0,i=r.length;n<i;++n)(e=r[n]).index=n,e.zindex&&o.push(e);return t.zdirty=!1,t.zitems=o.sort(es)}function is(t,e){var n,i,r=t.items;if(!r||!r.length)return;const o=ns(t);if(o&&o.length){for(n=0,i=r.length;n<i;++n)r[n].zindex||e(r[n]);r=o}for(n=0,i=r.length;n<i;++n)e(r[n])}function rs(t,e){var n,i,r=t.items;if(!r||!r.length)return null;const o=ns(t);for(o&&o.length&&(r=o),i=r.length;--i>=0;)if(n=e(r[i]))return n;if(r===o)for(i=(r=t.items).length;--i>=0;)if(!r[i].zindex&&(n=e(r[i])))return n;return null}function os(t){return function(e,n,i){is(n,(n=>{i&&!i.intersects(n.bounds)||as(t,e,n,n)}))}}function ss(t){return function(e,n,i){!n.items.length||i&&!i.intersects(n.bounds)||as(t,e,n.items[0],n.items)}}function as(t,e,n,i){var r=null==n.opacity?1:n.opacity;0!==r&&(t(e,i)||(Wo(e,n),n.fill&&$o(e,n,r)&&e.fill(),n.stroke&&ts(e,n,r)&&e.stroke()))}function cs(t){return t=t||r.yb,function(e,n,i,r,o,s){return i*=e.pixelRatio,r*=e.pixelRatio,rs(n,(n=>{const a=n.bounds;if((!a||a.contains(o,s))&&a)return t(e,n,i,r,o,s)?n:void 0}))}}function ls(t,e){return function(n,i,r,o){var s,a,c=Array.isArray(i)?i[0]:i,l=null==e?c.fill:e,u=c.stroke&&n.isPointInStroke;return u&&(s=c.strokeWidth,a=c.strokeCap,n.lineWidth=null!=s?s:1,n.lineCap=null!=a?a:"butt"),!t(n,i)&&(l&&n.isPointInPath(r,o)||u&&n.isPointInStroke(r,o))}}function us(t){return cs(ls(t))}function hs(t,e){return"translate("+t+","+e+")"}function fs(t){return"rotate("+t+")"}function ds(t){return hs(t.x||0,t.y||0)}function _s(t,e,n){function i(t,n){var i=n.x||0,r=n.y||0,o=n.angle||0;t.translate(i,r),o&&t.rotate(o*=Nr),t.beginPath(),e(t,n),o&&t.rotate(-o),t.translate(-i,-r)}return{type:t,tag:"path",nested:!1,attr:function(t,n){t("transform",function(t){return hs(t.x||0,t.y||0)+(t.angle?" "+fs(t.angle):"")}(n)),t("d",e(null,n))},bound:function(t,n){return e(Zo(t,n.angle),n),xo(t,n).translate(n.x||0,n.y||0)},draw:os(i),pick:us(i),isect:n||Bo(i)}}var ps=_s("arc",(function(t,e){return no.context(t)(e)}));function gs(t,e,n){function i(t,n){t.beginPath(),e(t,n)}const r=ls(i);return{type:t,tag:"path",nested:!0,attr:function(t,n){var i=n.mark.items;i.length&&t("d",e(null,i))},bound:function(t,n){var i=n.items;return 0===i.length?t:(e(Zo(t),i),xo(t,i[0]))},draw:ss(i),pick:function(t,e,n,i,o,s){var a=e.items,c=e.bounds;return!a||!a.length||c&&!c.contains(o,s)?null:(n*=t.pixelRatio,i*=t.pixelRatio,r(t,a,n,i)?a[0]:null)},isect:Ho,tip:n}}var ys=gs("area",(function(t,e){const n=e[0],i=n.interpolate||"linear";return("horizontal"===n.orient?ro:io).curve(kr(i,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,i,r="horizontal"===t[0].orient?e[1]:e[0],o="horizontal"===t[0].orient?"y":"x",s=t.length,a=1/0;--s>=0;)!1!==t[s].defined&&(i=Math.abs(t[s][o]-r))<a&&(a=i,n=t[s]);return n}));function bs(t,e){t.beginPath(),lo(e)?uo(t,e,0,0):t.rect(0,0,e.width||0,e.height||0),t.clip()}function xs(t){const e=Yo(t.strokeWidth,1);return null!=t.strokeOffset?t.strokeOffset:t.stroke&&e>.5&&e<1.5?.5-Math.abs(e-1):0}function vs(t,e){const n=xs(e);t("d",uo(null,e,n,n))}function ms(t,e,n,i){const r=xs(e);t.beginPath(),uo(t,e,(n||0)+r,(i||0)+r)}const ws=ls(ms),ks=ls(ms,!1),Ms=ls(ms,!0);var Ts={type:"group",tag:"g",nested:!1,attr:function(t,e){t("transform",ds(e))},bound:function(t,e){if(!e.clip&&e.items){const n=e.items,i=n.length;for(let e=0;e<i;++e)t.union(n[e].bounds)}return(e.clip||e.width||e.height)&&!e.noBound&&t.add(0,0).add(e.width||0,e.height||0),xo(t,e),t.translate(e.x||0,e.y||0)},draw:function(t,e,n){is(e,(e=>{const i=e.x||0,r=e.y||0,o=e.strokeForeground,s=null==e.opacity?1:e.opacity;(e.stroke||e.fill)&&s&&(ms(t,e,i,r),Wo(t,e),e.fill&&$o(t,e,s)&&t.fill(),e.stroke&&!o&&ts(t,e,s)&&t.stroke()),t.save(),t.translate(i,r),e.clip&&bs(t,e),n&&n.translate(-i,-r),is(e,(e=>{this.draw(t,e,n)})),n&&n.translate(i,r),t.restore(),o&&e.stroke&&s&&(ms(t,e,i,r),Wo(t,e),ts(t,e,s)&&t.stroke())}))},pick:function(t,e,n,i,r,o){if(e.bounds&&!e.bounds.contains(r,o)||!e.items)return null;const s=n*t.pixelRatio,a=i*t.pixelRatio;return rs(e,(c=>{let l,u,h;const f=c.bounds;if(f&&!f.contains(r,o))return;u=c.x||0,h=c.y||0;const d=u+(c.width||0),_=h+(c.height||0),p=c.clip;if(p&&(r<u||r>d||o<h||o>_))return;if(t.save(),t.translate(u,h),u=r-u,h=o-h,p&&lo(c)&&!Ms(t,c,s,a))return t.restore(),null;const g=c.strokeForeground,y=!1!==e.interactive;return y&&g&&c.stroke&&ks(t,c,s,a)?(t.restore(),c):(l=rs(c,(t=>function(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}(t,u,h)?this.pick(t,n,i,u,h):null)),!l&&y&&(c.fill||!g&&c.stroke)&&ws(t,c,s,a)&&(l=c),t.restore(),l||null)}))},isect:Jo,content:function(t,e,n){t("clip-path",e.clip?fo(n,e,e):null)},background:function(t,e){t("class","background"),t("aria-hidden",!0),vs(t,e)},foreground:function(t,e){t("class","foreground"),t("aria-hidden",!0),e.strokeForeground?vs(t,e):t("d","")}},As={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ss(t,e){var n=t.image;return(!n||t.url&&t.url!==n.url)&&(n={complete:!1,width:0,height:0},e.loadImage(t.url).then((e=>{t.image=e,t.image.url=t.url}))),n}function Ps(t,e){return null!=t.width?t.width:e&&e.width?!1!==t.aspect&&t.height?t.height*e.width/e.height:e.width:0}function Es(t,e){return null!=t.height?t.height:e&&e.height?!1!==t.aspect&&t.width?t.width*e.height/e.width:e.height:0}function Ns(t,e){return"center"===t?e/2:"right"===t?e:0}function Rs(t,e){return"middle"===t?e/2:"bottom"===t?e:0}var Cs={type:"image",tag:"image",nested:!1,attr:function(t,e,n){const i=Ss(e,n),r=Ps(e,i),o=Es(e,i),s=(e.x||0)-Ns(e.align,r),a=(e.y||0)-Rs(e.baseline,o);t("href",!i.src&&i.toDataURL?i.toDataURL():i.src||"",As["xmlns:xlink"],"xlink:href"),t("transform",hs(s,a)),t("width",r),t("height",o),t("preserveAspectRatio",!1===e.aspect?"none":"xMidYMid")},bound:function(t,e){const n=e.image,i=Ps(e,n),r=Es(e,n),o=(e.x||0)-Ns(e.align,i),s=(e.y||0)-Rs(e.baseline,r);return t.set(o,s,o+i,s+r)},draw:function(t,e,n){is(e,(e=>{if(n&&!n.intersects(e.bounds))return;const i=Ss(e,this);let r=Ps(e,i),o=Es(e,i);if(0===r||0===o)return;let s,a,c,l,u=(e.x||0)-Ns(e.align,r),h=(e.y||0)-Rs(e.baseline,o);!1!==e.aspect&&(a=i.width/i.height,c=e.width/e.height,a==a&&c==c&&a!==c&&(c<a?(l=r/a,h+=(o-l)/2,o=l):(l=o*a,u+=(r-l)/2,r=l))),(i.complete||i.toDataURL)&&(Wo(t,e),t.globalAlpha=null!=(s=e.opacity)?s:1,t.imageSmoothingEnabled=!1!==e.smooth,t.drawImage(i,u,h,r,o))}))},pick:cs(),isect:r.yb,get:Ss,xOffset:Ns,yOffset:Rs},zs=gs("line",(function(t,e){const n=e[0],i=n.interpolate||"linear";return oo.curve(kr(i,n.orient,n.tension)).context(t)(e)}),(function(t,e){for(var n,i,r=Math.pow(t[0].strokeWidth||1,2),o=t.length;--o>=0;)if(!1!==t[o].defined&&(n=t[o].x-e[0])*n+(i=t[o].y-e[1])*i<r)return t[o];return null}));function Ds(t,e){var n=e.path;if(null==n)return!0;var i=e.x||0,r=e.y||0,o=e.scaleX||1,s=e.scaleY||1,a=(e.angle||0)*Nr,c=e.pathCache;c&&c.path===n||((e.pathCache=c=Er(n)).path=n),a&&t.rotate&&t.translate?(t.translate(i,r),t.rotate(a),Ir(t,c,0,0,o,s),t.rotate(-a),t.translate(-i,-r)):Ir(t,c,i,r,o,s)}var Fs={type:"path",tag:"path",nested:!1,attr:function(t,e){var n=e.scaleX||1,i=e.scaleY||1;1===n&&1===i||t("vector-effect","non-scaling-stroke"),t("transform",function(t){return hs(t.x||0,t.y||0)+(t.angle?" "+fs(t.angle):"")+(t.scaleX||t.scaleY?" "+(e=t.scaleX||1,n=t.scaleY||1,"scale("+e+","+n+")"):"");var e,n}(e)),t("d",e.path)},bound:function(t,e){return Ds(Zo(t,e.angle),e)?t.set(0,0,0,0):xo(t,e,!0)},draw:os(Ds),pick:us(Ds),isect:Bo(Ds)};function Ls(t,e){t.beginPath(),uo(t,e)}var Zs={type:"rect",tag:"path",nested:!1,attr:function(t,e){t("d",uo(null,e))},bound:function(t,e){var n,i;return xo(t.set(n=e.x||0,i=e.y||0,n+e.width||0,i+e.height||0),e)},draw:os(Ls),pick:us(Ls),isect:Jo};function Os(t,e,n){var i,r,o,s;return!(!e.stroke||!ts(t,e,n)||(i=e.x||0,r=e.y||0,o=null!=e.x2?e.x2:i,s=null!=e.y2?e.y2:r,t.beginPath(),t.moveTo(i,r),t.lineTo(o,s),0))}var qs={type:"rule",tag:"line",nested:!1,attr:function(t,e){t("transform",ds(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)},bound:function(t,e){var n,i;return xo(t.set(n=e.x||0,i=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:i),e)},draw:function(t,e,n){is(e,(e=>{if(!n||n.intersects(e.bounds)){var i=null==e.opacity?1:e.opacity;i&&Os(t,e,i)&&(Wo(t,e),t.stroke())}}))},pick:cs((function(t,e,n,i){return!!t.isPointInStroke&&Os(t,e,1)&&t.isPointInStroke(n,i)})),isect:function(t,e){const n=t.x||0,i=t.y||0;return Go(e,n,i,null!=t.x2?t.x2:n,null!=t.y2?t.y2:i)}},Is=_s("shape",(function(t,e){return(e.mark.shape||e.shape).context(t)(e)})),js=_s("symbol",(function(t,e){return ao.context(t)(e)}),Ho);const Xs=(0,r.$m)();var Us={height:Ys,measureWidth:Gs,estimateWidth:Hs,width:Hs,canvas:Bs};function Bs(t){Us.width=t&&Xo?Gs:Hs}function Hs(t,e){return Js($s(t,e),Ys(t))}function Js(t,e){return~~(.8*t.length*e)}function Gs(t,e){return Ys(t)<=0||!(e=$s(t,e))?0:Ws(e,ta(t))}function Ws(t,e){const n="(".concat(e,") ").concat(t);let i=Xs.get(n);return void 0===i&&(Xo.font=e,i=Xo.measureText(t).width,Xs.set(n,i)),i}function Ys(t){return null!=t.fontSize?+t.fontSize||0:11}function Vs(t){return null!=t.lineHeight?t.lineHeight:Ys(t)+2}function Qs(t){return e=t.lineBreak&&t.text&&!(0,r.kJ)(t.text)?t.text.split(t.lineBreak):t.text,(0,r.kJ)(e)?e.length>1?e:e[0]:e;var e}function $s(t,e){const n=null==e?"":(e+"").trim();return t.limit>0&&n.length?function(t,e){var n=+t.limit,i=function(t){if(Us.width===Gs){const e=ta(t);return t=>Ws(t,e)}{const e=Ys(t);return t=>Js(t,e)}}(t);if(i(e)<n)return e;var r,o=t.ellipsis||"…",s="rtl"===t.dir,a=0,c=e.length;if(n-=i(o),s){for(;a<c;)r=a+c>>>1,i(e.slice(r))>n?a=r+1:c=r;return o+e.slice(a)}for(;a<c;)r=1+(a+c>>>1),i(e.slice(0,r))<n?a=r:c=r-1;return e.slice(0,a)+o}(t,n):n}function Ks(t,e){var n=t.font;return(e&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function ta(t,e){return(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+Ys(t)+"px "+Ks(t,e)}function ea(t){var e=t.baseline,n=Ys(t);return Math.round("top"===e?.79*n:"middle"===e?.3*n:"bottom"===e?-.21*n:"line-top"===e?.29*n+.5*Vs(t):"line-bottom"===e?.29*n-.5*Vs(t):0)}Bs(!0);const na={left:"start",center:"middle",right:"end"},ia=new _o;function ra(t){var e,n=t.x||0,i=t.y||0,r=t.radius||0;return r&&(e=(t.theta||0)-Rr,n+=r*Math.cos(e),i+=r*Math.sin(e)),ia.x1=n,ia.y1=i,ia}function oa(t,e,n){var i,o=Us.height(e),s=e.align,a=ra(e),c=a.x1,l=a.y1,u=e.dx||0,h=(e.dy||0)+ea(e)-Math.round(.8*o),f=Qs(e);if((0,r.kJ)(f)?(o+=Vs(e)*(f.length-1),i=f.reduce(((t,n)=>Math.max(t,Us.width(e,n))),0)):i=Us.width(e,f),"center"===s?u-=i/2:"right"===s&&(u-=i),t.set(u+=c,h+=l,u+i,h+o),e.angle&&!n)t.rotate(e.angle*Nr,c,l);else if(2===n)return t.rotatedPoints(e.angle*Nr,c,l);return t}var sa={type:"text",tag:"text",nested:!1,attr:function(t,e){var n,i=e.dx||0,r=(e.dy||0)+ea(e),o=ra(e),s=o.x1,a=o.y1,c=e.angle||0;t("text-anchor",na[e.align]||"start"),c?(n=hs(s,a)+" "+fs(c),(i||r)&&(n+=" "+hs(i,r))):n=hs(s+i,a+r),t("transform",n)},bound:oa,draw:function(t,e,n){is(e,(e=>{var i,o,s,a,c,l,u,h=null==e.opacity?1:e.opacity;if(!(n&&!n.intersects(e.bounds)||0===h||e.fontSize<=0||null==e.text||0===e.text.length)){if(t.font=ta(e),t.textAlign=e.align||"left",o=(i=ra(e)).x1,s=i.y1,e.angle&&(t.save(),t.translate(o,s),t.rotate(e.angle*Nr),o=s=0),o+=e.dx||0,s+=(e.dy||0)+ea(e),l=Qs(e),Wo(t,e),(0,r.kJ)(l))for(c=Vs(e),a=0;a<l.length;++a)u=$s(e,l[a]),e.fill&&$o(t,e,h)&&t.fillText(u,o,s),e.stroke&&ts(t,e,h)&&t.strokeText(u,o,s),s+=c;else u=$s(e,l),e.fill&&$o(t,e,h)&&t.fillText(u,o,s),e.stroke&&ts(t,e,h)&&t.strokeText(u,o,s);e.angle&&t.restore()}}))},pick:cs((function(t,e,n,i,r,o){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var s=ra(e),a=s.x1,c=s.y1,l=oa(ia,e,1),u=-e.angle*Nr,h=Math.cos(u),f=Math.sin(u),d=h*r-f*o+(a-h*a+f*c),_=f*r+h*o+(c-f*a-h*c);return l.contains(d,_)})),isect:function(t,e){const n=oa(ia,t,2);return Go(e,n[0],n[1],n[2],n[3])||Go(e,n[0],n[1],n[4],n[5])||Go(e,n[4],n[5],n[6],n[7])||Go(e,n[2],n[3],n[6],n[7])}},aa=gs("trail",(function(t,e){return co.context(t)(e)}),(function(t,e){for(var n,i,r=t.length;--r>=0;)if(!1!==t[r].defined&&(n=t[r].x-e[0])*n+(i=t[r].y-e[1])*i<(n=t[r].size||1)*n)return t[r];return null})),ca={arc:ps,area:ys,group:Ts,image:Cs,line:zs,path:Fs,rect:Zs,rule:qs,shape:Is,symbol:js,text:sa,trail:aa};function la(t,e,n){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function ua(t,e){e=e.toLowerCase();for(var n=t.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===e)return n[i]}function ha(t,e,n,i){var r,o=t.childNodes[e];return o&&o.tagName.toLowerCase()===n.toLowerCase()||(r=o||null,o=la(t.ownerDocument,n,i),t.insertBefore(o,r)),o}function fa(t,e){for(var n=t.childNodes,i=n.length;i>e;)t.removeChild(n[--i]);return t}function da(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function _a(t,e){const n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function pa(t,e){this._active=null,this._handlers={},this._loader=t||ne(),this._tooltip=e||ga}function ga(t,e,n,i){t.element().setAttribute("title",i||"")}function ya(t){this._el=null,this._bgcolor=null,this._loader=new go(t)}pa.prototype={initialize(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()},scene(t){return arguments.length?(this._scene=t,this):this._scene},on(){},off(){},_handlerIndex(t,e,n){for(let i=t?t.length:0;--i>=0;)if(t[i].type===e&&(!n||t[i].handler===n))return i;return-1},handlers(t){const e=this._handlers,n=[];if(t)n.push(...e[this.eventName(t)]);else for(const t in e)n.push(...e[t]);return n},eventName(t){const e=t.indexOf(".");return e<0?t:t.slice(0,e)},handleHref(t,e,n){this._loader.sanitize(n,{context:"href"}).then((e=>{const n=new MouseEvent(t.type,t),i=la(null,"a");for(const t in e)i.setAttribute(t,e[t]);i.dispatchEvent(n)})).catch((()=>{}))},handleTooltip(t,e,n){if(e&&null!=e.tooltip){e=function(t,e,n,i){var r,o,s=t&&t.mark;if(s&&(r=ca[s.marktype]).tip){for((o=_a(e,n))[0]-=i[0],o[1]-=i[1];t=t.mark.group;)o[0]-=t.x||0,o[1]-=t.y||0;t=r.tip(s.items,o)}return t}(e,t,this.canvas(),this._origin);const i=n&&e&&e.tooltip||null;this._tooltip.call(this._obj,this,t,e,i)}},getItemBoundingClientRect(t){const e=this.canvas();if(!e)return;const n=e.getBoundingClientRect(),i=this._origin,r=t.bounds,o=r.width(),s=r.height();let a=r.x1+i[0]+n.left,c=r.y1+i[1]+n.top;for(;t.mark&&(t=t.mark.group);)a+=t.x||0,c+=t.y||0;return{x:a,y:c,width:o,height:s,left:a,top:c,right:a+o,bottom:c+s}}},ya.prototype={initialize(t,e,n,i,r){return this._el=t,this.resize(e,n,i,r)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},resize(t,e,n,i){return this._width=t,this._height=e,this._origin=n||[0,0],this._scale=i||1,this},dirty(){},render(t){const e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},_render(){},renderAsync(t){const e=this.render(t);return this._ready?this._ready.then((()=>e)):Promise.resolve(e)},_load(t,e){var n=this,i=n._loader[t](e);if(!n._ready){const t=n._call;n._ready=n._loader.ready().then((e=>{e&&t(),n._ready=null}))}return i},sanitizeURL(t){return this._load("sanitizeURL",t)},loadImage(t){return this._load("loadImage",t)}};const ba="dragenter",xa="dragleave",va="dragover",ma="mousedown",wa="mousemove",ka="mouseout",Ma="mouseover",Ta="click",Aa="mousewheel",Sa="touchstart",Pa="touchmove",Ea="touchend",Na=["keydown","keypress","keyup",ba,xa,va,ma,"mouseup",wa,ka,Ma,Ta,"dblclick","wheel",Aa,Sa,Pa,Ea],Ra=wa,Ca=ka,za=Ta;function Da(t,e){pa.call(this,t,e),this._down=null,this._touch=null,this._first=!0,this._events={}}function Fa(t,e){(t=>t===Sa||t===Pa||t===Ea?[Sa,Pa,Ea]:[t])(e).forEach((e=>function(t,e){const n=t.canvas();n&&!t._events[e]&&(t._events[e]=1,n.addEventListener(e,t[e]?n=>t[e](n):n=>t.fire(e,n)))}(t,e)))}function La(t,e,n){return function(i){const r=this._active,o=this.pickEvent(i);o===r||(r&&r.exit||this.fire(n,i),this._active=o,this.fire(e,i)),this.fire(t,i)}}function Za(t){return function(e){this.fire(t,e),this._active=null}}(0,r.XW)(Da,pa,{initialize(t,e,n){return this._canvas=t&&ua(t,"canvas"),[Ta,ma,wa,ka,xa].forEach((t=>Fa(this,t))),pa.prototype.initialize.call(this,t,e,n)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:Na,DOMMouseScroll(t){this.fire(Aa,t)},mousemove:La(wa,Ma,ka),dragover:La(va,ba,xa),mouseout:Za(ka),dragleave:Za(xa),mousedown(t){this._down=this._active,this.fire(ma,t)},click(t){this._down===this._active&&(this.fire(Ta,t),this._down=null)},touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Sa,t,!0)},touchmove(t){this.fire(Pa,t,!0)},touchend(t){this.fire(Ea,t,!0),this._touch=null},fire(t,e,n){const i=n?this._touch:this._active,r=this._handlers[t];if(e.vegaType=t,t===za&&i&&i.href?this.handleHref(e,i,i.href):t!==Ra&&t!==Ca||this.handleTooltip(e,i,t!==Ca),r)for(let t=0,n=r.length;t<n;++t)r[t].handler.call(this._obj,e,i)},on(t,e){const n=this.eventName(t),i=this._handlers;return this._handlerIndex(i[n],t,e)<0&&(Fa(this,t),(i[n]||(i[n]=[])).push({type:t,handler:e})),this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&i.splice(r,1),this},pickEvent(t){const e=_a(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},pick(t,e,n,i,r){const o=this.context();return ca[t.marktype].pick.call(this,o,t,e,n,i,r)}});var Oa="undefined"!=typeof window&&window.devicePixelRatio||1;function qa(t){ya.call(this,t),this._options={},this._redraw=!1,this._dirty=new _o,this._tempb=new _o}const Ia=ya.prototype;function ja(t,e){pa.call(this,t,e);const n=this;n._hrefHandler=Xa(n,((t,e)=>{e&&e.href&&n.handleHref(t,e,e.href)})),n._tooltipHandler=Xa(n,((t,e)=>{n.handleTooltip(t,e,t.type!==Ca)}))}(0,r.XW)(qa,ya,{initialize(t,e,n,i,r,o){return this._options=o||{},this._canvas=this._options.externalContext?null:pr(1,1,this._options.type),t&&this._canvas&&(fa(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),Ia.initialize.call(this,t,e,n,i,r)},resize(t,e,n,i){if(Ia.resize.call(this,t,e,n,i),this._canvas)!function(t,e,n,i,r,o){const s="undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,a=t.getContext("2d"),c=s?Oa:r;t.width=e*c,t.height=n*c;for(const t in o)a[t]=o[t];s&&1!==c&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=c,a.setTransform(c,0,0,c,c*i[0],c*i[1])}(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const t=this._options.externalContext;t||(0,r.vU)("CanvasRenderer is missing a valid canvas or context"),t.scale(this._scale,this._scale),t.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)},dirty(t){const e=this._tempb.clear().union(t.bounds);let n=t.mark.group;for(;n;)e.translate(n.x||0,n.y||0),n=n.mark.group;this._dirty.union(e)},_render(t){const e=this.context(),n=this._origin,i=this._width,r=this._height,o=this._dirty,s=(a=n,c=i,l=r,(new _o).set(0,0,c,l).translate(-a[0],-a[1]));var a,c,l;e.save();const u=this._redraw||o.empty()?(this._redraw=!1,s.expand(1)):function(t,e,n){return e.expand(1).round(),t.pixelRatio%1&&e.scale(t.pixelRatio).round().scale(1/t.pixelRatio),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}(e,s.intersect(o),n);return this.clear(-n[0],-n[1],i,r),this.draw(e,t,u),e.restore(),o.clear(),this},draw(t,e,n){const i=ca[e.marktype];e.clip&&function(t,e){var n=e.clip;t.save(),(0,r.mf)(n)?(t.beginPath(),n(t),t.clip()):bs(t,e.group)}(t,e),i.draw.call(this,t,e,n),e.clip&&t.restore()},clear(t,e,n,i){const r=this._options,o=this.context();"pdf"===r.type||r.externalContext||o.clearRect(t,e,n,i),null!=this._bgcolor&&(o.fillStyle=this._bgcolor,o.fillRect(t,e,n,i))}});const Xa=(t,e)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,e.call(t._obj,n,i)};(0,r.XW)(ja,pa,{initialize(t,e,n){let i=this._svg;return i&&(i.removeEventListener(za,this._hrefHandler),i.removeEventListener(Ra,this._tooltipHandler),i.removeEventListener(Ca,this._tooltipHandler)),this._svg=i=t&&ua(t,"svg"),i&&(i.addEventListener(za,this._hrefHandler),i.addEventListener(Ra,this._tooltipHandler),i.addEventListener(Ca,this._tooltipHandler)),pa.prototype.initialize.call(this,t,e,n)},canvas(){return this._svg},on(t,e){const n=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[n],t,e)<0){const r={type:t,handler:e,listener:Xa(this,e)};(i[n]||(i[n]=[])).push(r),this._svg&&this._svg.addEventListener(n,r.listener)}return this},off(t,e){const n=this.eventName(t),i=this._handlers[n],r=this._handlerIndex(i,t,e);return r>=0&&(this._svg&&this._svg.removeEventListener(n,i[r].listener),i.splice(r,1)),this}});const Ua="aria-hidden",Ba="aria-label",Ha="role",Ja="aria-roledescription",Ga="graphics-object",Wa="graphics-symbol",Ya=(t,e,n)=>({[Ha]:t,[Ja]:e,[Ba]:n||void 0}),Va=(0,r.Rg)(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Qa={axis:{desc:"axis",caption:function(t){const e=t.datum,n=t.orient,i=e.title?nc(t):null,r=t.context,o=r.scales[e.scale].value,s=r.dataflow.locale(),a=o.type;return"".concat("left"===n||"right"===n?"Y":"X","-axis")+(i?" titled '".concat(i,"'"):"")+" for a ".concat(Fn(a)?"discrete":a," scale")+" with ".concat(ti(s,o,t))}},legend:{desc:"legend",caption:function(t){const e=t.datum,n=e.title?nc(t):null,i="".concat(e.type||""," legend").trim(),o=e.scales,s=Object.keys(o),a=t.context,c=a.scales[o[s[0]]].value,l=a.dataflow.locale();return((u=i).length?u[0].toUpperCase()+u.slice(1):u)+(n?" titled '".concat(n,"'"):"")+" for ".concat(function(t){return(t=t.map((t=>t+("fill"===t||"stroke"===t?" color":"")))).length<2?t[0]:t.slice(0,-1).join(", ")+" and "+(0,r.fj)(t)}(s))+" with ".concat(ti(l,c,t));var u}},"title-text":{desc:"title",caption:t=>"Title text '".concat(ec(t),"'")},"title-subtitle":{desc:"subtitle",caption:t=>"Subtitle text '".concat(ec(t),"'")}},$a={ariaRole:Ha,ariaRoleDescription:Ja,description:Ba};function Ka(t,e){const n=!1===e.aria;if(t(Ua,n||void 0),n||null==e.description)for(const e in $a)t($a[e],void 0);else{const n=e.mark.marktype;t(Ba,e.description),t(Ha,e.ariaRole||("group"===n?Ga:Wa)),t(Ja,e.ariaRoleDescription||"".concat(n," mark"))}}function tc(t){return!1===t.aria?{[Ua]:!0}:Va[t.role]?null:Qa[t.role]?function(t,e){try{const n=t.items[0],i=e.caption||(()=>"");return Ya(e.role||Wa,e.desc,n.description||i(n))}catch(t){return null}}(t,Qa[t.role]):function(t){const e=t.marktype,n="group"===e||"text"===e||t.items.some((t=>null!=t.description&&!1!==t.aria));return Ya(n?Ga:Wa,"".concat(e," mark container"),t.description)}(t)}function ec(t){return(0,r.IX)(t.text).join(" ")}function nc(t){try{return(0,r.IX)((0,r.fj)(t.items).items[0].text).join(" ")}catch(t){return null}}const ic=t=>(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");function rc(){let t="",e="",n="";const i=[],r=()=>e=n="",o=(t,n)=>(null!=n&&(e+=" ".concat(t,'="').concat(ic(n).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;"),'"')),s),s={open(a){(o=>{e&&(t+="".concat(e,">").concat(n),r()),i.push(o)})(a),e="<"+a;for(var c=arguments.length,l=new Array(c>1?c-1:0),u=1;u<c;u++)l[u-1]=arguments[u];for(const t of l)for(const e in t)o(e,t[e]);return s},close(){const o=i.pop();return t+=e?e+(n?">".concat(n,"</").concat(o,">"):"/>"):"</".concat(o,">"),r(),s},attr:o,text:t=>(n+=ic(t),s),toString:()=>t};return s}const oc=t=>sc(rc(),t)+"";function sc(t,e){if(t.open(e.tagName),e.hasAttributes()){const n=e.attributes,i=n.length;for(let e=0;e<i;++e)t.attr(n[e].name,n[e].value)}if(e.hasChildNodes()){const n=e.childNodes;for(const e of n)3===e.nodeType?t.text(e.nodeValue):sc(t,e)}return t.close()}const ac={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},cc={blend:"mix-blend-mode"},lc={fill:"none","stroke-miterlimit":10},uc="http://www.w3.org/2000/xmlns/",hc=As.xmlns;function fc(t){ya.call(this,t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}const dc=ya.prototype;function _c(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function pc(t,e,n){let i,r,o;if("radial"===e.gradient){let i=ha(t,n++,"pattern",hc);kc(i,{id:br+e.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),i=ha(i,0,"rect",hc),kc(i,{width:1,height:1,fill:"url(".concat(Tc(),"#").concat(e.id,")")}),kc(t=ha(t,n++,"radialGradient",hc),{id:e.id,fx:e.x1,fy:e.y1,fr:e.r1,cx:e.x2,cy:e.y2,r:e.r2})}else kc(t=ha(t,n++,"linearGradient",hc),{id:e.id,x1:e.x1,x2:e.x2,y1:e.y1,y2:e.y2});for(i=0,r=e.stops.length;i<r;++i)o=ha(t,i,"stop",hc),o.setAttribute("offset",e.stops[i].offset),o.setAttribute("stop-color",e.stops[i].color);return fa(t,i),n}function gc(t,e,n){let i;return(t=ha(t,n,"clipPath",hc)).setAttribute("id",e.id),e.path?(i=ha(t,0,"path",hc),i.setAttribute("d",e.path)):(i=ha(t,0,"rect",hc),kc(i,{x:0,y:0,width:e.width,height:e.height})),fa(t,1),n+1}function yc(t,e,n,i,r){let o,s=t._svg;if(!s&&(o=e.ownerDocument,s=la(o,i,hc),t._svg=s,t.mark&&(s.__data__=t,s.__values__={fill:"default"},"g"===i))){const e=la(o,"path",hc);s.appendChild(e),e.__data__=t;const n=la(o,"g",hc);s.appendChild(n),n.__data__=t;const i=la(o,"path",hc);s.appendChild(i),i.__data__=t,i.__values__={fill:"default"}}return(s.ownerSVGElement!==r||function(t,e){return t.parentNode&&t.parentNode.childNodes.length>1&&t.previousSibling!=e}(s,n))&&e.insertBefore(s,n?n.nextSibling:e.firstChild),s}(0,r.XW)(fc,ya,{initialize(t,e,n,i,r){return this._defs={},this._clearDefs(),t&&(this._svg=ha(t,0,"svg",hc),this._svg.setAttributeNS(uc,"xmlns",hc),this._svg.setAttributeNS(uc,"xmlns:xlink",As["xmlns:xlink"]),this._svg.setAttribute("version",As.version),this._svg.setAttribute("class","marks"),fa(t,1),this._root=ha(this._svg,0,"g",hc),kc(this._root,lc),fa(this._svg,1)),this.background(this._bgcolor),dc.initialize.call(this,t,e,n,i,r)},background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),dc.background.apply(this,arguments)},resize(t,e,n,i){return dc.resize.call(this,t,e,n,i),this._svg&&(kc(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}),this._root.setAttribute("transform","translate(".concat(this._origin,")"))),this._dirty=[],this},canvas(){return this._svg},svg(){const t=this._svg,e=this._bgcolor;if(!t)return null;let n;e&&(t.removeAttribute("style"),n=ha(t,0,"rect",hc),kc(n,{width:this._width,height:this._height,fill:e}));const i=oc(t);return e&&(t.removeChild(n),this._svg.style.setProperty("background-color",e)),i},_render(t){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t),fa(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this},dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const e=++this._dirtyID;let n,i,r,o,s,a,c;for(s=0,a=t.length;s<a;++s)n=t[s],i=n.mark,i.marktype!==r&&(r=i.marktype,o=ca[r]),i.zdirty&&i.dirty!==e&&(this._dirtyAll=!1,_c(n,e),i.items.forEach((t=>{t.dirty=e}))),i.zdirty||(n.exit?(o.nested&&i.items.length?(c=i.items[0],c._svg&&this._update(o,c._svg,c)):n._svg&&(c=n._svg.parentNode,c&&c.removeChild(n._svg)),n._svg=null):(n=o.nested?i.items[0]:n,n._update!==e&&(n._svg&&n._svg.ownerSVGElement?this._update(o,n._svg,n):(this._dirtyAll=!1,_c(n,e)),n._update=e)));return!this._dirtyAll},mark(t,e,n){if(!this.isDirty(e))return e._svg;const i=this._svg,r=ca[e.marktype],o=!1===e.interactive?"none":null,s="g"===r.tag,a=yc(e,t,n,"g",i);a.setAttribute("class",da(e));const c=tc(e);for(const t in c)Mc(a,t,c[t]);s||Mc(a,"pointer-events",o),Mc(a,"clip-path",e.clip?fo(this,e,e.group):null);let l=null,u=0;const h=t=>{const e=this.isDirty(t),n=yc(t,a,l,r.tag,i);e&&(this._update(r,n,t),s&&function(t,e,n){e=e.lastChild.previousSibling;let i,r=0;is(n,(n=>{i=t.mark(e,n,i),++r})),fa(e,1+r)}(this,n,t)),l=n,++u};return r.nested?e.items.length&&h(e.items[0]):is(e,h),fa(a,u),a},_update(t,e,n){bc=e,xc=e.__values__,Ka(mc,n),t.attr(mc,n,this);const i=vc[t.type];i&&i.call(this,t,e,n),bc&&this.style(bc,n)},style(t,e){if(null!=e){for(const n in ac){let i="font"===n?Ks(e):e[n];if(i===xc[n])continue;const r=ac[n];null==i?t.removeAttribute(r):(xr(i)&&(i=vr(i,this._defs.gradient,Tc())),t.setAttribute(r,i+"")),xc[n]=i}for(const n in cc)wc(t,cc[n],e[n])}},defs(){const t=this._svg,e=this._defs;let n=e.el,i=0;for(const r in e.gradient)n||(e.el=n=ha(t,1,"defs",hc)),i=pc(n,e.gradient[r],i);for(const r in e.clipping)n||(e.el=n=ha(t,1,"defs",hc)),i=gc(n,e.clipping[r],i);n&&(0===i?(t.removeChild(n),e.el=null):fa(n,i))},_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}});let bc=null,xc=null;const vc={group(t,e,n){const i=bc=e.childNodes[2];xc=i.__values__,t.foreground(mc,n,this),xc=e.__values__,bc=e.childNodes[1],t.content(mc,n,this);const r=bc=e.childNodes[0];t.background(mc,n,this);const o=!1===n.mark.interactive?"none":null;if(o!==xc.events&&(Mc(i,"pointer-events",o),Mc(r,"pointer-events",o),xc.events=o),n.strokeForeground&&n.stroke){const t=n.fill;Mc(i,"display",null),this.style(r,n),Mc(r,"stroke",null),t&&(n.fill=null),xc=i.__values__,this.style(i,n),t&&(n.fill=t),bc=null}else Mc(i,"display","none")},image(t,e,n){!1===n.smooth?(wc(e,"image-rendering","optimizeSpeed"),wc(e,"image-rendering","pixelated")):wc(e,"image-rendering",null)},text(t,e,n){const i=Qs(n);let o,s,a,c;(0,r.kJ)(i)?(s=i.map((t=>$s(n,t))),o=s.join("\n"),o!==xc.text&&(fa(e,0),a=e.ownerDocument,c=Vs(n),s.forEach(((t,i)=>{const r=la(a,"tspan",hc);r.__data__=n,r.textContent=t,i&&(r.setAttribute("x",0),r.setAttribute("dy",c)),e.appendChild(r)})),xc.text=o)):(s=$s(n,i),s!==xc.text&&(e.textContent=s,xc.text=s)),Mc(e,"font-family",Ks(n)),Mc(e,"font-size",Ys(n)+"px"),Mc(e,"font-style",n.fontStyle),Mc(e,"font-variant",n.fontVariant),Mc(e,"font-weight",n.fontWeight)}};function mc(t,e,n){e!==xc[t]&&(n?function(t,e,n,i){null!=n?t.setAttributeNS(i,e,n):t.removeAttributeNS(i,e)}(bc,t,e,n):Mc(bc,t,e),xc[t]=e)}function wc(t,e,n){n!==xc[e]&&(null==n?t.style.removeProperty(e):t.style.setProperty(e,n+""),xc[e]=n)}function kc(t,e){for(const n in e)Mc(t,n,e[n])}function Mc(t,e,n){null!=n?t.setAttribute(e,n):t.removeAttribute(e)}function Tc(){let t;return"undefined"==typeof window?"":(t=window.location).hash?t.href.slice(0,-t.hash.length):t.href}function Ac(t){ya.call(this,t),this._text=null,this._defs={gradient:{},clipping:{}}}(0,r.XW)(Ac,ya,{svg(){return this._text},_render(t){const e=rc();e.open("svg",(0,r.l7)({},As,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:"0 0 ".concat(this._width," ").concat(this._height)}));const n=this._bgcolor;return n&&"transparent"!==n&&"none"!==n&&e.open("rect",{width:this._width,height:this._height,fill:n}).close(),e.open("g",lc,{transform:"translate("+this._origin+")"}),this.mark(e,t),e.close(),this.defs(e),this._text=e.close()+"",this},mark(t,e){const n=ca[e.marktype],i=n.tag,o=[Ka,n.attr];t.open("g",{class:da(e),"clip-path":e.clip?fo(this,e,e.group):null},tc(e),{"pointer-events":"g"!==i&&!1===e.interactive?"none":null});const s=s=>{const a=this.href(s);if(a&&t.open("a",a),t.open(i,this.attr(e,s,o,"g"!==i?i:null)),"text"===i){const e=Qs(s);if((0,r.kJ)(e)){const n={x:0,dy:Vs(s)};for(let i=0;i<e.length;++i)t.open("tspan",i?n:null).text($s(s,e[i])).close()}else t.text($s(s,e))}else if("g"===i){const i=s.strokeForeground,r=s.fill,o=s.stroke;i&&o&&(s.stroke=null),t.open("path",this.attr(e,s,n.background,"bgrect")).close(),t.open("g",this.attr(e,s,n.content)),is(s,(e=>this.mark(t,e))),t.close(),i&&o?(r&&(s.fill=null),s.stroke=o,t.open("path",this.attr(e,s,n.foreground,"bgrect")).close(),r&&(s.fill=r)):t.open("path",this.attr(e,s,n.foreground,"bgfore")).close()}t.close(),a&&t.close()};return n.nested?e.items&&e.items.length&&s(e.items[0]):is(e,s),t.close()},href(t){const e=t.href;let n;if(e){if(n=this._hrefs&&this._hrefs[e])return n;this.sanitizeURL(e).then((t=>{t["xlink:href"]=t.href,t.href=null,(this._hrefs||(this._hrefs={}))[e]=t}))}return null},attr(t,e,n,i){const r={},o=(t,e,n,i)=>{r[i||t]=e};return Array.isArray(n)?n.forEach((t=>t(o,e,this))):n(o,e,this),i&&function(t,e,n,i,r){let o;if(null==e)return t;if("bgrect"===i&&!1===n.interactive&&(t["pointer-events"]="none"),"bgfore"===i&&(!1===n.interactive&&(t["pointer-events"]="none"),t.display="none",null!==e.fill))return t;"image"===i&&!1===e.smooth&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),"text"===i&&(t["font-family"]=Ks(e),t["font-size"]=Ys(e)+"px",t["font-style"]=e.fontStyle,t["font-variant"]=e.fontVariant,t["font-weight"]=e.fontWeight);for(const n in ac){let i=e[n];const o=ac[n];("transparent"!==i||"fill"!==o&&"stroke"!==o)&&null!=i&&(xr(i)&&(i=vr(i,r.gradient,"")),t[o]=i)}for(const t in cc){const n=e[t];null!=n&&(o=o||[],o.push("".concat(cc[t],": ").concat(n,";")))}o&&(t.style=o.join(" "))}(r,e,t,i,this._defs),r},defs(t){const e=this._defs.gradient,n=this._defs.clipping;if(0!==Object.keys(e).length+Object.keys(n).length){t.open("defs");for(const n in e){const i=e[n],r=i.stops;"radial"===i.gradient?(t.open("pattern",{id:br+n,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+n+")"}).close(),t.close(),t.open("radialGradient",{id:n,fx:i.x1,fy:i.y1,fr:i.r1,cx:i.x2,cy:i.y2,r:i.r2})):t.open("linearGradient",{id:n,x1:i.x1,x2:i.x2,y1:i.y1,y2:i.y2});for(let e=0;e<r.length;++e)t.open("stop",{offset:r[e].offset,"stop-color":r[e].color}).close();t.close()}for(const e in n){const i=n[e];t.open("clipPath",{id:e}),i.path?t.open("path",{d:i.path}).close():t.open("rect",{x:0,y:0,width:i.width,height:i.height}).close(),t.close()}t.close()}}});const Sc={};function Pc(t,e,n,i){if(function(t,e,n){return t.bounds&&e.intersects(t.bounds)&&("group"===t.marktype||!1!==t.interactive&&(!n||n(t)))}(t,e,n)){const r=t.items,o=t.marktype,s=r.length;let a=0;if("group"===o)for(;a<s;++a)Ec(r[a],e,n,i);else for(const t=ca[o].isect;a<s;++a){const n=r[a];Nc(n,e,t)&&i.push(n)}}return i}function Ec(t,e,n,i){n&&n(t.mark)&&Nc(t,e,ca.group.isect)&&i.push(t);const r=t.items,o=r&&r.length;if(o){const s=t.x||0,a=t.y||0;e.translate(-s,-a);for(let t=0;t<o;++t)Pc(r[t],e,n,i);e.translate(s,a)}return i}function Nc(t,e,n){const i=t.bounds;return e.encloses(i)||e.intersects(i)&&n(t,e)}Sc.canvas=Sc.png={renderer:qa,headless:qa,handler:Da},Sc.svg={renderer:fc,headless:Ac,handler:ja},Sc.none={},new _o;var Rc=n(5952),Cc=n(8114);const zc="intersect",Dc="union",Fc="_vgsid_",Lc=(0,r.EP)(Fc),Zc="index:unit";function Oc(t,e){for(var n,i,o=e.fields,s=e.values,a=o.length,c=0;c<a;++c)if((i=o[c]).getter=r.EP.getter||(0,r.EP)(i.field),n=i.getter(t),(0,r.J_)(n)&&(n=(0,r.He)(n)),(0,r.J_)(s[c])&&(s[c]=(0,r.He)(s[c])),(0,r.J_)(s[c][0])&&(s[c]=s[c].map(r.He)),"E"===i.type){if((0,r.kJ)(s[c])?s[c].indexOf(n)<0:n!==s[c])return!1}else if("R"===i.type){if(!(0,r.u5)(n,s[c]))return!1}else if("R-RE"===i.type){if(!(0,r.u5)(n,s[c],!0,!1))return!1}else if("R-E"===i.type){if(!(0,r.u5)(n,s[c],!1,!1))return!1}else if("R-LE"===i.type&&!(0,r.u5)(n,s[c],!1,!0))return!1;return!0}const qc=(0,Rc.bisector)(Lc),Ic=qc.left,jc=qc.right;var Xc={["".concat(Fc,"_union")]:Rc.union,["".concat(Fc,"_intersect")]:Rc.intersection,E_union:function(t,e){if(!t.length)return e;for(var n=0,i=e.length;n<i;++n)t.indexOf(e[n])<0&&t.push(e[n]);return t},E_intersect:function(t,e){return t.length?t.filter((t=>e.indexOf(t)>=0)):e},R_union:function(t,e){var n=(0,r.He)(e[0]),i=(0,r.He)(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?(t[0]>n&&(t[0]=n),t[1]<i&&(t[1]=i),t):[n,i]},R_intersect:function(t,e){var n=(0,r.He)(e[0]),i=(0,r.He)(e[1]);return n>i&&(n=e[1],i=e[0]),t.length?i<t[0]||t[1]<n?[]:(t[0]<n&&(t[0]=n),t[1]>i&&(t[1]=i),t):[n,i]}};function Uc(t,e,n,i){e[0].type!==Cc.Literal&&(0,r.vU)("First argument to selection functions must be a string literal.");const o=e[0].value,s=":"+o;(e.length>=2&&(0,r.fj)(e).value)!==zc||(0,r.nr)(i,"@unit")||(i["@unit"]=n.getData(o).indataRef(n,"unit")),(0,r.nr)(i,s)||(i[s]=n.getData(o).tuplesRef())}n(1814);var Bc=Math.random;const Hc=Math.sqrt(2*Math.PI),Jc=Math.SQRT2;let Gc=NaN;function Wc(t,e){t=t||0,e=null==e?1:e;let n,i,r=0,o=0;if(Gc==Gc)r=Gc,Gc=NaN;else{do{r=2*Bc()-1,o=2*Bc()-1,n=r*r+o*o}while(0===n||n>1);i=Math.sqrt(-2*Math.log(n)/n),r*=i,Gc=o*i}return t+r*e}function Yc(t,e,n){const i=(t-(e=e||0))/(n=null==n?1:n),r=Math.abs(i);let o;if(r>37)o=0;else{const t=Math.exp(-r*r/2);let e;r<7.07106781186547?(e=.0352624965998911*r+.700383064443688,e=e*r+6.37396220353165,e=e*r+33.912866078383,e=e*r+112.079291497871,e=e*r+221.213596169931,e=e*r+220.206867912376,o=t*e,e=.0883883476483184*r+1.75566716318264,e=e*r+16.064177579207,e=e*r+86.7807322029461,e=e*r+296.564248779674,e=e*r+637.333633378831,e=e*r+793.826512519948,e=e*r+440.413735824752,o/=e):(e=r+.65,e=r+4/e,e=r+3/e,e=r+2/e,e=r+1/e,o=t/e/2.506628274631)}return i>0?1-o:o}function Vc(t,e,n){return t<0||t>1?NaN:(e||0)+(null==n?1:n)*Jc*function(t){let e,n=-Math.log((1-t)*(1+t));return n<6.25?(n-=3.125,e=-364441206401782e-35,e=e*n-16850591381820166e-35,e=128584807152564e-32+e*n,e=11157877678025181e-33+e*n,e=e*n-1333171662854621e-31,e=20972767875968562e-33+e*n,e=6637638134358324e-30+e*n,e=e*n-4054566272975207e-29,e=e*n-8151934197605472e-29,e=26335093153082323e-28+e*n,e=e*n-12975133253453532e-27,e=e*n-5415412054294628e-26,e=1.0512122733215323e-9+e*n,e=e*n-4.112633980346984e-9,e=e*n-2.9070369957882005e-8,e=4.2347877827932404e-7+e*n,e=e*n-13654692000834679e-22,e=e*n-13882523362786469e-21,e=.00018673420803405714+e*n,e=e*n-.000740702534166267,e=e*n-.006033670871430149,e=.24015818242558962+e*n,e=1.6536545626831027+e*n):n<16?(n=Math.sqrt(n)-3.25,e=2.2137376921775787e-9,e=9.075656193888539e-8+e*n,e=e*n-2.7517406297064545e-7,e=1.8239629214389228e-8+e*n,e=15027403968909828e-22+e*n,e=e*n-4013867526981546e-21,e=29234449089955446e-22+e*n,e=12475304481671779e-21+e*n,e=e*n-47318229009055734e-21,e=6828485145957318e-20+e*n,e=24031110387097894e-21+e*n,e=e*n-.0003550375203628475,e=.0009532893797373805+e*n,e=e*n-.0016882755560235047,e=.002491442096107851+e*n,e=e*n-.003751208507569241,e=.005370914553590064+e*n,e=1.0052589676941592+e*n,e=3.0838856104922208+e*n):Number.isFinite(n)?(n=Math.sqrt(n)-5,e=-27109920616438573e-27,e=e*n-2.555641816996525e-10,e=1.5076572693500548e-9+e*n,e=e*n-3.789465440126737e-9,e=7.61570120807834e-9+e*n,e=e*n-1.496002662714924e-8,e=2.914795345090108e-8+e*n,e=e*n-6.771199775845234e-8,e=2.2900482228026655e-7+e*n,e=e*n-9.9298272942317e-7,e=4526062597223154e-21+e*n,e=e*n-1968177810553167e-20,e=7599527703001776e-20+e*n,e=e*n-.00021503011930044477,e=e*n-.00013871931833623122,e=1.0103004648645344+e*n,e=4.849906401408584+e*n):e=1/0,e*t}(2*t-1)}Math.PI;var Qc=n(8257);function $c(t){const e=this.context.data[t];return e?e.values.value:[]}function Kc(t,e,n){const i=this.context.data[t]["index:"+e],r=i?i.value.get(n):void 0;return r?r.count:r}function tl(t,e){const n=this.context.dataflow,i=this.context.data[t].input;return n.pulse(i,n.changeset().remove(r.yb).insert(e)),1}function el(t,e,n){if(t){const n=this.context.dataflow,i=t.mark.source;n.pulse(i,n.changeset().encode(t,e))}return void 0!==n?n:t}const nl=t=>function(e,n){return this.context.dataflow.locale()[t](n)(e)},il=nl("format"),rl=nl("timeFormat"),ol=nl("utcFormat"),sl=nl("timeParse"),al=nl("utcParse"),cl=new Date(2e3,0,1);function ll(t,e,n){return Number.isInteger(t)&&Number.isInteger(e)?(cl.setYear(2e3),cl.setMonth(t),cl.setDate(e),rl.call(this,cl,n)):""}function ul(t){return ll.call(this,t,1,"%B")}function hl(t){return ll.call(this,t,1,"%b")}function fl(t){return ll.call(this,0,2+t,"%A")}function dl(t){return ll.call(this,0,2+t,"%a")}const _l=":",pl="@",gl="%",yl="$";function bl(t,e,n,i){e[0].type!==o.Literal&&(0,r.vU)("First argument to data functions must be a string literal.");const s=e[0].value,a=_l+s;if(!(0,r.nr)(a,i))try{i[a]=n.getData(s).tuplesRef()}catch(t){}}function xl(t,e,n,i){e[0].type!==o.Literal&&(0,r.vU)("First argument to indata must be a string literal."),e[1].type!==o.Literal&&(0,r.vU)("Second argument to indata must be a string literal.");const s=e[0].value,a=e[1].value,c=pl+a;(0,r.nr)(c,i)||(i[c]=n.getData(s).indataRef(n,a))}function vl(t,e,n,i){if(e[0].type===o.Literal)ml(n,i,e[0].value);else for(t in n.scales)ml(n,i,t)}function ml(t,e,n){const i=gl+n;if(!(0,r.nr)(e,i))try{e[i]=t.scaleRef(n)}catch(t){}}function wl(t,e){let n;return(0,r.mf)(t)?t:(0,r.HD)(t)?(n=e.scales[t])&&n.value:void 0}function kl(t,e){return function(n,i,r){if(n){const e=wl(n,(r||this).context);return e&&e.path[t](i)}return e(i)}}const Ml=kl("area",(function(t){return H=new s.Adder,S(t,J),2*H})),Tl=kl("bounds",(function(t){var e,n,i,r,o,s,a;if(L=F=-(z=D=1/0),X=[],S(t,_t),n=X.length){for(X.sort(kt),e=1,o=[i=X[0]];e<n;++e)Mt(i,(r=X[e])[0])||Mt(i,r[1])?(wt(i[0],r[1])>wt(i[0],i[1])&&(i[1]=r[1]),wt(r[0],i[1])>wt(i[0],i[1])&&(i[0]=r[0])):o.push(i=r);for(s=-1/0,e=0,i=o[n=o.length-1];e<=n;i=r,++e)r=o[e],(a=wt(i[1],r[0]))>s&&(s=a,z=r[0],F=i[1])}return X=U=null,z===1/0||D===1/0?[[NaN,NaN],[NaN,NaN]]:[[z,D],[F,L]]})),Al=kl("centroid",(function(t){$=K=tt=et=nt=it=rt=ot=0,st=new s.Adder,at=new s.Adder,ct=new s.Adder,S(t,Tt);var e=+st,n=+at,i=+ct,r=y(e,n,i);return r<1e-12&&(e=it,n=rt,i=ot,K<a&&(e=tt,n=et,i=nt),(r=y(e,n,i))<1e-12)?[NaN,NaN]:[p(n,e)*f,v(i/r)*f]}));function Sl(t){const e=this.context.group;let n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function Pl(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(e){t.warn(e)}return n[n.length-1]}function El(){return Pl(this.context.dataflow,"warn",arguments)}function Nl(){return Pl(this.context.dataflow,"info",arguments)}function Rl(){return Pl(this.context.dataflow,"debug",arguments)}function Cl(t){const e=t/255;return e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function zl(t){const e=(0,Lt.rgb)(t);return.2126*Cl(e.r)+.7152*Cl(e.g)+.0722*Cl(e.b)}function Dl(t,e){const n=zl(t),i=zl(e);return(Math.max(n,i)+.05)/(Math.min(n,i)+.05)}function Fl(){const t=[].slice.call(arguments);return t.unshift({}),(0,r.l7)(...t)}function Ll(t,e){return t===e||t!=t&&e!=e||((0,r.kJ)(t)?!(!(0,r.kJ)(e)||t.length!==e.length)&&function(t,e){for(let n=0,i=t.length;n<i;++n)if(!Ll(t[n],e[n]))return!1;return!0}(t,e):!(!(0,r.Kn)(t)||!(0,r.Kn)(e))&&Zl(t,e))}function Zl(t,e){for(const n in t)if(!Ll(t[n],e[n]))return!1;return!0}function Ol(t){return e=>Zl(t,e)}function ql(t,e,n,i,o,s){const a=this.context.dataflow,c=this.context.data[t],l=c.input,u=a.stamp();let h,f,d=c.changes;if(!1===a._trigger||!(l.value.length||e||i))return 0;if((!d||d.stamp<u)&&(c.changes=d=a.changeset(),d.stamp=u,a.runAfter((()=>{c.modified=!0,a.pulse(l,d).run()}),!0,1)),n&&(h=!0===n?r.yb:(0,r.kJ)(n)||oe(n)?n:Ol(n),d.remove(h)),e&&d.insert(e),i&&(h=Ol(i),l.value.some(h)?d.remove(h):d.insert(i)),o)for(f in s)d.modify(o,f,s[f]);return 1}function Il(t){const e=t.touches,n=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.sqrt(n*n+i*i)}function jl(t){const e=t.touches;return Math.atan2(e[0].clientY-e[1].clientY,e[0].clientX-e[1].clientX)}const Xl={};function Ul(t,e){const n=Xl[e]||(Xl[e]=(0,r.EP)(e));return(0,r.kJ)(t)?t.map(n):n(t)}function Bl(t){return(0,r.kJ)(t)||ArrayBuffer.isView(t)?t:null}function Hl(t){return Bl(t)||((0,r.HD)(t)?t:null)}function Jl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Bl(t).join(...n)}function Gl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Hl(t).indexOf(...n)}function Wl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Hl(t).lastIndexOf(...n)}function Yl(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Hl(t).slice(...n)}function Vl(t,e,n){return(0,r.mf)(n)&&(0,r.vU)("Function argument passed to replace."),String(t).replace(e,n)}function Ql(t){return Bl(t).slice().reverse()}function $l(t,e,n){return an(t||0,e||0,n||0)}function Kl(t,e){const n=wl(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function tu(t,e){const n=wl(t,(e||this).context);return n?n.copy():void 0}function eu(t,e){const n=wl(t,(e||this).context);return n?n.domain():[]}function nu(t,e,n){const i=wl(t,(n||this).context);return i?(0,r.kJ)(e)?(i.invertRange||i.invert)(e):(i.invert||i.invertExtent)(e):void 0}function iu(t,e){const n=wl(t,(e||this).context);return n&&n.range?n.range():[]}function ru(t,e,n){const i=wl(t,(n||this).context);return i?i(e):void 0}function ou(t,e,n,i,o){t=wl(t,(o||this).context);const s=function(t,e){var n,i=[];return n={gradient:"linear",x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:i,stop:function(t,e){return i.push({offset:t,color:e}),n}}}(e,n);let a=t.domain(),c=a[0],l=(0,r.fj)(a),u=r.yR;return l-c?u=function(t,e,n){const i=n-e;let o,s,a;return i&&Number.isFinite(i)?(o=(s=t.type).indexOf("-"),s=o<0?s:s.slice(o+1),a=Cn(s)().domain([e,n]).range([0,1]),Ln.forEach((e=>t[e]?a[e](t[e]()):0)),a):(0,r.a9)(.5)}(t,c,l):t=(t.interpolator?Cn("sequential")().interpolator(t.interpolator()):Cn("linear")().interpolate(t.interpolate()).range(t.range())).domain([c=0,l=1]),t.ticks&&(a=t.ticks(+i||15),c!==a[0]&&a.unshift(c),l!==(0,r.fj)(a)&&a.push(l)),a.forEach((e=>s.stop(u(e),t(e)))),s}function su(t,e,n){const i=wl(t,(n||this).context);return function(t){return i?i.path.context(t)(e):""}}function au(t){let e=null;return function(n){return n?Ir(n,e=e||Er(t)):t}}const cu=t=>t.data;function lu(t,e){const n=$c.call(e,t);return n.root&&n.root.lookup||{}}function uu(t,e,n){const i=lu(t,this),r=i[e],o=i[n];return r&&o?r.path(o).map(cu):void 0}function hu(t,e){const n=lu(t,this)[e];return n?n.ancestors().map(cu):void 0}const fu=()=>"undefined"!=typeof window&&window||null;function du(){const t=fu();return t?t.screen:{}}function _u(){const t=fu();return t?[t.innerWidth,t.innerHeight]:[void 0,void 0]}function pu(){const t=this.context.dataflow,e=t.container&&t.container();return e?[e.clientWidth,e.clientHeight]:[void 0,void 0]}function gu(t,e,n){if(!t)return[];const[i,o]=t,s=(new _o).set(i[0],i[1],o[0],o[1]);return function(t,e,n){const i=[],o=(new _o).union(e),s=t.marktype;return s?Pc(t,o,n,i):"group"===s?Ec(t,o,n,i):(0,r.vU)("Intersect scene must be mark node or group item.")}(n||this.context.dataflow.scenegraph().root,s,function(t){let e=null;if(t){const n=(0,r.IX)(t.marktype),i=(0,r.IX)(t.markname);e=t=>(!n.length||n.some((e=>t.marktype===e)))&&(!i.length||i.some((e=>t.name===e)))}return e}(e))}const yu={random:()=>Bc(),cumulativeNormal:Yc,cumulativeLogNormal:function(t,e,n){return Yc(Math.log(t),e,n)},cumulativeUniform:function(t,e,n){return null==n&&(n=null==e?1:e,e=0),t<e?0:t>n?1:(t-e)/(n-e)},densityNormal:function(t,e,n){const i=(t-(e||0))/(n=null==n?1:n);return Math.exp(-.5*i*i)/(n*Hc)},densityLogNormal:function(t,e,n){if(t<=0)return 0;e=e||0,n=null==n?1:n;const i=(Math.log(t)-e)/n;return Math.exp(-.5*i*i)/(n*Hc*t)},densityUniform:function(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=e&&t<=n?1/(n-e):0},quantileNormal:Vc,quantileLogNormal:function(t,e,n){return Math.exp(Vc(t,e,n))},quantileUniform:function(t,e,n){return null==n&&(n=null==e?1:e,e=0),t>=0&&t<=1?e+t*(n-e):NaN},sampleNormal:Wc,sampleLogNormal:function(t,e){return t=t||0,e=null==e?1:e,Math.exp(t+Wc()*e)},sampleUniform:function(t,e){return null==e&&(e=null==t?1:t,t=0),t+(e-t)*Bc()},isArray:r.kJ,isBoolean:r.jn,isDate:r.J_,isDefined:t=>void 0!==t,isNumber:r.hj,isObject:r.Kn,isRegExp:r.Kj,isString:r.HD,isTuple:oe,isValid:t=>null!=t&&t==t,toBoolean:r.sw,toDate:t=>(0,r.ZU)(t),toNumber:r.He,toString:r.BB,indexof:Gl,join:Jl,lastindexof:Wl,replace:Vl,reverse:Ql,slice:Yl,flush:r.yl,lerp:r.t7,merge:Fl,pad:r.vk,peek:r.fj,pluck:Ul,span:r.yP,inrange:r.u5,truncate:r.$G,rgb:Lt.rgb,lab:Lt.lab,hcl:Lt.hcl,hsl:Lt.hsl,luminance:zl,contrast:Dl,sequence:Qc.range,format:il,utcFormat:ol,utcParse:al,utcOffset:sn._M,utcSequence:sn.MC,timeFormat:rl,timeParse:sl,timeOffset:sn.Vm,timeSequence:sn.uA,timeUnitSpecifier:sn.iJ,monthFormat:ul,monthAbbrevFormat:hl,dayFormat:fl,dayAbbrevFormat:dl,quarter:r.mS,utcquarter:r.N3,week:sn.g0,utcweek:sn.aw,dayofyear:sn.y_,utcdayofyear:sn.zk,warn:El,info:Nl,debug:Rl,extent:t=>(0,r.We)(t),inScope:Sl,intersect:gu,clampRange:r.l$,pinchDistance:Il,pinchAngle:jl,screen:du,containerSize:pu,windowSize:_u,bandspace:$l,setdata:tl,pathShape:au,panLinear:r.Dw,panLog:r.mJ,panPow:r.QA,panSymlog:r.Zw,zoomLinear:r.ay,zoomLog:r.dH,zoomPow:r.mK,zoomSymlog:r.bV,encode:el,modify:ql,lassoAppend:function(t,e,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5;const r=t[t.length-1];return void 0===r||Math.sqrt((r[0]-e)**2+(r[1]-n)**2)>i?(t.push([e,n]),[...t]):t},lassoPath:function(t){return(null!=t?t:[]).reduce(((e,n,i)=>{let[r,o]=n;return e+(0==i?"M ".concat(r,",").concat(o," "):i===t.length-1?" Z":"L ".concat(r,",").concat(o," "))}),"")},intersectLasso:function(t,e,n){const{x:i,y:r,mark:o}=n,s=(new _o).set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[t,n]of e)t<s.x1&&(s.x1=t),t>s.x2&&(s.x2=t),n<s.y1&&(s.y1=n),n>s.y2&&(s.y2=n);return s.translate(i,r),gu([[s.x1,s.y1],[s.x2,s.y2]],t,o).filter((t=>function(t,e,n){let i=0;for(let r=0,o=n.length-1;r<n.length;o=r++){const[s,a]=n[o],[c,l]=n[r];l>e!=a>e&&t<(s-c)*(e-l)/(a-l)+c&&i++}return 1&i}(t.x,t.y,e)))}},bu=["view","item","group","xy","x","y"],xu="this.",vu={},mu={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:t=>"_[".concat((0,r.m8)(yl+t),"]"),functions:function(t){const e=(0,o.functions)(t);bu.forEach((t=>e[t]="event.vega."+t));for(const t in yu)e[t]=xu+t;return(0,r.l7)(e,function(t,e,n){e.__bandwidth=t=>t&&t.bandwidth?t.bandwidth():0,n._bandwidth=vl,n._range=vl,n._scale=vl;const i=e=>"_["+(e.type===o.Literal?(0,r.m8)(gl+e.value):(0,r.m8)(gl)+"+"+t(e))+"]";return{_bandwidth:t=>"this.__bandwidth(".concat(i(t[0]),")"),_range:t=>"".concat(i(t[0]),".range()"),_scale:e=>"".concat(i(e[0]),"(").concat(t(e[1]),")")}}(t,yu,vu)),e},constants:o.constants,visitors:vu},wu=(0,o.codegenExpression)(mu);function ku(t,e,n){return 1===arguments.length?yu[t]:(yu[t]=e,n&&(vu[t]=n),wu&&(wu.functions[t]=xu+t),this)}function Mu(t,e){const n={};let i;try{t=(0,r.HD)(t)?t:(0,r.m8)(t)+"",i=(0,o.parseExpression)(t)}catch(e){(0,r.vU)("Expression parse error: "+t)}i.visit((t=>{if(t.type!==o.CallExpression)return;const i=t.callee.name,r=mu.visitors[i];r&&r(i,t.arguments,e,n)}));const s=wu(i);return s.globals.forEach((t=>{const i=yl+t;!(0,r.nr)(n,i)&&e.getSignal(t)&&(n[i]=e.signalRef(t))})),{$expr:(0,r.l7)({code:s.code},e.options.ast?{ast:i}:null),$fields:s.fields,$params:n}}ku("bandwidth",Kl,vl),ku("copy",tu,vl),ku("domain",eu,vl),ku("range",iu,vl),ku("invert",nu,vl),ku("scale",ru,vl),ku("gradient",ou,vl),ku("geoArea",Ml,vl),ku("geoBounds",Tl,vl),ku("geoCentroid",Al,vl),ku("geoShape",su,vl),ku("indata",Kc,xl),ku("data",$c,bl),ku("treePath",uu,bl),ku("treeAncestors",hu,bl),ku("vlSelectionTest",(function(t,e,n){for(var i,r,o,s,a,c=this.context.data[t],l=c?c.values.value:[],u=c?c[Zc]&&c[Zc].value:void 0,h=n===zc,f=l.length,d=0;d<f;++d)if(i=l[d],u&&h){if(-1===(o=(r=r||{})[s=i.unit]||0))continue;if(a=Oc(e,i),r[s]=a?-1:++o,a&&1===u.size)return!0;if(!a&&o===u.get(s).count)return!1}else if(h^(a=Oc(e,i)))return a;return f&&h}),Uc),ku("vlSelectionIdTest",(function(t,e,n){const i=this.context.data[t],r=i?i.values.value:[],o=i?i[Zc]&&i[Zc].value:void 0,s=n===zc,a=Lc(e),c=Ic(r,a);if(c===r.length)return!1;if(Lc(r[c])!==a)return!1;if(o&&s){if(1===o.size)return!0;if(jc(r,a)-c<o.size)return!1}return!0}),Uc),ku("vlSelectionResolve",(function(t,e,n,i){for(var o,s,a,c,l,u,h,f,d,_,p,g,y=this.context.data[t],b=y?y.values.value:[],x={},v={},m={},w=b.length,k=0;k<w;++k)if(c=(o=b[k]).unit,s=o.fields,a=o.values,s&&a){for(p=0,g=s.length;p<g;++p)l=s[p],f=(h=x[l.field]||(x[l.field]={}))[c]||(h[c]=[]),m[l.field]=d=l.type.charAt(0),_=Xc["".concat(d,"_union")],h[c]=_(f,(0,r.IX)(a[p]));n&&(f=v[c]||(v[c]=[])).push((0,r.IX)(a).reduce(((t,e,n)=>(t[s[n].field]=e,t)),{}))}else l=Fc,u=Lc(o),(f=(h=x[l]||(x[l]={}))[c]||(h[c]=[])).push(u),n&&(f=v[c]||(v[c]=[])).push({[Fc]:u});return e=e||Dc,x._vgsid_?x._vgsid_=Xc["".concat(Fc,"_").concat(e)](...Object.values(x._vgsid_)):Object.keys(x).forEach((t=>{x[t]=Object.keys(x[t]).map((e=>x[t][e])).reduce(((n,i)=>void 0===n?i:Xc["".concat(m[t],"_").concat(e)](n,i)))})),b=Object.keys(v),n&&b.length&&(x[i?"vlPoint":"vlMulti"]=e===Dc?{or:b.reduce(((t,e)=>(t.push(...v[e]),t)),[])}:{and:b.map((t=>({or:v[t]})))}),x}),Uc),ku("vlSelectionTuples",(function(t,e){return t.map((t=>(0,r.l7)(e.fields?{values:e.fields.map((e=>(e.getter||(e.getter=(0,r.EP)(e.field)))(t.datum)))}:{[Fc]:Lc(t.datum)},e)))}))}}]);